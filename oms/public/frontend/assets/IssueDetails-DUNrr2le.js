var y=(h,m,s)=>new Promise((g,r)=>{var v=t=>{try{o(s.next(t))}catch(l){r(l)}},x=t=>{try{o(s.throw(t))}catch(l){r(l)}},o=t=>t.done?g(t.value):Promise.resolve(t.value).then(v,x);o((s=s.apply(h,m)).next())});import{o as a,c as n,a as e,r as f,b as _,e as d,f as u,t as i,n as b,i as c,H as w,u as k}from"./index-Dv3bTM60.js";import{r as C,a as j}from"./XMarkIcon-spaiDwVd.js";import{r as I,a as N}from"./PhotoIcon-BEWnUgxn.js";function $(h,m){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const D={class:"min-h-screen bg-gray-50"},S={class:"max-w-4xl mx-auto p-4"},M={class:"flex items-center justify-between mb-6"},O={class:"flex items-center"},R={key:0,class:"flex justify-center items-center h-64"},T={key:1,class:"space-y-6"},V={class:"bg-white rounded-xl shadow-sm p-6"},B={class:"flex items-center justify-between mb-4"},H={class:"text-xl font-semibold text-gray-900"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={class:"mt-1 text-gray-900"},A={class:"mt-1 text-gray-900"},E={class:"mt-1 text-gray-900"},P={class:"mt-1 text-gray-900"},J={key:0,class:"bg-white rounded-xl shadow-sm p-6"},U=["innerHTML"],Z={key:1,class:"bg-white rounded-xl shadow-sm p-6"},q={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},F={key:0,class:"space-y-2"},G={key:1,class:"space-y-2"},K=["href"],Q={class:"bg-white rounded-xl shadow-sm p-6"},W={class:"space-y-4"},X={class:"flex items-start"},Y={class:"flex-shrink-0"},ee={class:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center"},te={class:"ml-4"},se={class:"text-sm text-gray-500"},oe={key:2,class:"bg-white rounded-xl shadow-sm p-6 text-center"},ae={key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"},ne={class:"relative max-w-4xl w-full"},ie=["src"],ce={__name:"IssueDetails",setup(h){const m=w();k();const s=f(null),g=f(!0),r=f(!1),v=o=>{switch(o){case"Open":return"bg-yellow-100 text-yellow-800";case"Replied":return"bg-blue-100 text-blue-800";case"Closed":return"bg-green-100 text-green-800";case"Resolved":return"bg-indigo-100 text-indigo-800";case"On Hold":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},x=o=>new Date(o).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return _(()=>y(this,null,function*(){try{const t=yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Issue",name:m.params.id})})).json();t.message&&(s.value=t.message)}catch(o){console.error("Error fetching issue details:",o)}finally{g.value=!1}})),(o,t)=>{var l;return a(),n("div",D,[e("div",S,[e("div",M,[e("div",O,[e("button",{onClick:t[0]||(t[0]=p=>o.$router.back()),class:"mr-4 text-gray-600 hover:text-gray-800 transition-colors"},[d(u(C),{class:"h-6 w-6"})]),t[3]||(t[3]=e("h2",{class:"text-xl font-semibold"},"Issue Details",-1))])]),g.value?(a(),n("div",R,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):s.value?(a(),n("div",T,[e("div",V,[e("div",B,[e("h3",H,i(s.value.subject),1),e("span",{class:b([v(s.value.status),"px-3 py-1 rounded-full text-sm font-medium"])},i(s.value.status),3)]),e("div",L,[e("div",null,[t[5]||(t[5]=e("h4",{class:"text-sm font-medium text-gray-500"},"Project",-1)),e("p",z,i(s.value.project||"Not specified"),1)]),e("div",null,[t[6]||(t[6]=e("h4",{class:"text-sm font-medium text-gray-500"},"Created On",-1)),e("p",A,i(x(s.value.creation)),1)]),e("div",null,[t[7]||(t[7]=e("h4",{class:"text-sm font-medium text-gray-500"},"Raised by",-1)),e("p",E,i(s.value.custom_raised_by_contact||"Not specified"),1)]),e("div",null,[t[8]||(t[8]=e("h4",{class:"text-sm font-medium text-gray-500"},"Contact Number",-1)),e("p",P,i(s.value.custom_raised_by_mobile||"Not specified"),1)])])]),s.value.description?(a(),n("div",J,[t[9]||(t[9]=e("h4",{class:"text-sm font-medium text-gray-500 mb-3"},"Description",-1)),e("div",{class:"prose max-w-none",innerHTML:s.value.description},null,8,U)])):c("",!0),s.value.custom_issue_image||s.value.custom_other_attachment?(a(),n("div",Z,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-500 mb-4"},"Attachments",-1)),e("div",q,[s.value.custom_issue_image?(a(),n("div",F,[e("button",{onClick:t[1]||(t[1]=p=>r.value=!0),class:"w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors flex items-center"},[d(u(I),{class:"h-6 w-6 text-gray-500 mr-2"}),t[10]||(t[10]=e("span",{class:"text-sm font-medium"},"View Issue Image",-1))])])):c("",!0),s.value.custom_other_attachment?(a(),n("div",G,[e("a",{href:s.value.custom_other_attachment,target:"_blank",class:"block p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors flex items-center"},[d(u(N),{class:"h-6 w-6 text-gray-500 mr-2"}),t[11]||(t[11]=e("span",{class:"text-sm font-medium"},"View Attachment",-1))],8,K)])):c("",!0)])])):c("",!0),e("div",Q,[t[14]||(t[14]=e("h4",{class:"text-sm font-medium text-gray-500 mb-4"},"Timeline",-1)),e("div",W,[e("div",X,[e("div",Y,[e("div",ee,[d(u($),{class:"h-5 w-5 text-blue-600"})])]),e("div",te,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-900"},"Issue Created",-1)),e("p",se,i(x(s.value.creation)),1)])])])])])):(a(),n("div",oe,t[15]||(t[15]=[e("p",{class:"text-gray-600"},"Issue not found",-1)])))]),r.value?(a(),n("div",ae,[e("div",ne,[e("button",{onClick:t[2]||(t[2]=p=>r.value=!1),class:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-lg"},[d(u(j),{class:"h-6 w-6 text-gray-800"})]),e("img",{src:(l=s.value)==null?void 0:l.custom_issue_image,alt:"Issue Image",class:"max-w-full max-h-[80vh] mx-auto rounded-lg shadow-lg"},null,8,ie)])])):c("",!0)])}}};export{ce as default};
