var S=(u,n,i)=>new Promise((d,h)=>{var k=m=>{try{g(i.next(m))}catch(w){h(w)}},C=m=>{try{g(i.throw(m))}catch(w){h(w)}},g=m=>m.done?d(m.value):Promise.resolve(m.value).then(k,C);g((i=i.apply(u,n)).next())});import{o as a,c as l,a as e,_ as W,e as r,B as b,j as U,T,n as F,t as c,f as p,C as J,r as v,l as D,b as q,d as P,k as Z,F as B,g as N}from"./index-Cw_GSGqn.js";import{r as G}from"./XMarkIcon-CeD0nqzm.js";import{r as K}from"./ChevronLeftIcon-BHl7YYgo.js";import{r as Q}from"./UserIcon-dlnVkgXH.js";function X(u,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function Y(u,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function E(u,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function ee(u,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function te(u,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}const oe={class:"px-4 py-3 flex items-center justify-between border-b sticky top-3 bg-white z-10"},se={class:"text-lg font-semibold text-gray-900"},ne={class:"p-4"},ae={__name:"BottomSheet",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:"Details"},fullScreen:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u){return(n,i)=>(a(),l("div",null,[r(T,{name:"fade"},{default:b(()=>[u.modelValue?(a(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:i[0]||(i[0]=d=>n.$emit("update:modelValue",!1))})):U("",!0)]),_:1}),r(T,{name:"slide-up"},{default:b(()=>[u.modelValue?(a(),l("div",{key:0,class:F(["fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-2xl shadow-xl max-h-[90vh] overflow-y-auto",[u.fullScreen?"min-h-screen rounded-none":"max-w-3xl mx-auto"]])},[i[2]||(i[2]=e("div",{class:"w-full flex justify-center pt-2 pb-1 sticky top-0 bg-white z-10"},[e("div",{class:"w-12 h-1.5 bg-gray-300 rounded-full"})],-1)),e("div",oe,[e("h3",se,c(u.title),1),e("button",{onClick:i[1]||(i[1]=d=>n.$emit("update:modelValue",!1)),class:"rounded-full p-1 hover:bg-gray-100 transition-colors"},[r(p(G),{class:"h-6 w-6 text-gray-500"})])]),e("div",ne,[J(n.$slots,"default",{},void 0,!0)])],2)):U("",!0)]),_:3})]))}},M=W(ae,[["__scopeId","data-v-91346965"]]),le={class:"min-h-screen bg-gray-50"},re={class:"bg-white shadow-sm"},ie={class:"px-4 py-3 flex items-center max-w-5xl mx-auto"},de={class:"max-w-5xl mx-auto"},ue={class:"bg-white mt-2 px-6 py-8 flex flex-col items-center rounded-lg shadow-sm"},ce={class:"relative"},me={class:"h-28 w-28 rounded-full bg-gray-200 overflow-hidden shadow-md"},pe=["src","alt"],fe={key:1,class:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-600 font-semibold text-3xl"},he={class:"mt-4 text-2xl font-semibold"},ve={class:"text-gray-600"},ge={class:"mt-4 flex items-center text-sm text-gray-500"},we={class:"bg-white mt-4 rounded-lg shadow-sm overflow-hidden"},ye={class:"flex items-center"},_e={class:"flex items-center"},xe={class:"flex items-center"},be={class:"px-4 mt-6 mb-8"},ke={class:"space-y-4"},Ce={class:"text-sm text-gray-500 mb-1"},Ve={class:"font-medium text-gray-800"},je={class:"space-y-4"},$e={class:"text-sm text-gray-500 mb-1"},Se={class:"font-medium text-gray-800"},De={class:"space-y-4"},Be={class:"text-sm text-gray-500 mb-1"},Ne={class:"font-medium text-gray-800"},ze={__name:"Profile",setup(u){const n=v(null),i=v(null),d=v(null),h=v(window.innerWidth<768),k=v({}),C=v({}),g=v({}),m=D({get:()=>d.value==="employee",set:s=>{s||(d.value=null)}}),w=D({get:()=>d.value==="company",set:s=>{s||(d.value=null)}}),R=D({get:()=>d.value==="contact",set:s=>{s||(d.value=null)}}),A=s=>s?s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2):"",j=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),H=()=>S(this,null,function*(){try{yield fetch("/api/method/logout"),window.location.href="/account/login"}catch(s){console.error("Error logging out:",s)}}),O=s=>s?s.startsWith("/private/files")?`/api/method/frappe.utils.file_manager.download_file?file_url=${s}`:s:"",I=()=>{h.value=window.innerWidth<768};q(()=>S(this,null,function*(){var s,t;window.addEventListener("resize",I);try{const _=yield(yield fetch("/api/method/oms.api.get_current_user_info")).json();if(_.message){n.value=_.message;const x=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Employee",filters:{user_id:n.value.name},fields:["*"]})})).json();if((s=x.message)!=null&&s[0]){const o=x.message[0];i.value=o,k.value={first_name:o.first_name,middle_name:o.middle_name,last_name:o.last_name,gender:o.gender,date_of_birth:L(o.date_of_birth),date_of_joining:L(o.date_of_joining),employee_number:o.employee_number,status:o.status},C.value={company:o.company,department:o.department,designation:o.designation,grade:o.grade,branch:o.branch,reports_to:o.reports_to};const z=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Contact",filters:{user:n.value.name},fields:["*"]})})).json();if((t=z.message)!=null&&t[0]){const V=z.message[0];g.value={email:V.email_id,phone:V.phone,mobile_no:V.mobile_no,company_name:V.company_name}}}}}catch(y){console.error("Error fetching profile data:",y)}}));const L=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return s}};return P(()=>{window.removeEventListener("resize",I)}),(s,t)=>{var y,_,$,x;return a(),l("div",le,[e("div",re,[e("div",ie,[e("button",{onClick:t[0]||(t[0]=o=>s.$router.back()),class:"mr-2 hover:bg-gray-100 rounded-full p-1.5 transition-colors"},[r(p(K),{class:"h-6 w-6 text-gray-600"})]),t[8]||(t[8]=e("h1",{class:"text-xl font-semibold"},"Profile",-1))])]),e("div",de,[e("div",ue,[e("div",ce,[e("div",me,[n.value&&n.value.user_image?(a(),l("img",{key:0,src:O(n.value.user_image),alt:n.value.full_name,class:"h-full w-full object-cover"},null,8,pe)):(a(),l("div",fe,c(A((y=n.value)==null?void 0:y.full_name)),1))])]),e("h2",he,c((_=n.value)==null?void 0:_.full_name),1),e("p",ve,c((($=i.value)==null?void 0:$.designation)||"No Designation"),1),e("div",ge,[r(p(ee),{class:"h-4 w-4 mr-1"}),e("span",null,c(((x=n.value)==null?void 0:x.name)||"No Email"),1)])]),e("div",we,[e("button",{onClick:t[1]||(t[1]=o=>d.value="employee"),class:"w-full px-6 py-4 flex items-center justify-between border-b hover:bg-gray-50 transition-colors"},[e("div",ye,[r(p(Q),{class:"h-5 w-5 text-blue-500 mr-3"}),t[9]||(t[9]=e("span",{class:"font-medium"},"Employee Details",-1))]),r(p(E),{class:"h-5 w-5 text-gray-400"})]),e("button",{onClick:t[2]||(t[2]=o=>d.value="company"),class:"w-full px-6 py-4 flex items-center justify-between border-b hover:bg-gray-50 transition-colors"},[e("div",_e,[r(p(Y),{class:"h-5 w-5 text-green-500 mr-3"}),t[10]||(t[10]=e("span",{class:"font-medium"},"Company Information",-1))]),r(p(E),{class:"h-5 w-5 text-gray-400"})]),e("button",{onClick:t[3]||(t[3]=o=>d.value="contact"),class:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors"},[e("div",xe,[r(p(te),{class:"h-5 w-5 text-purple-500 mr-3"}),t[11]||(t[11]=e("span",{class:"font-medium"},"Contact Information",-1))]),r(p(E),{class:"h-5 w-5 text-gray-400"})])]),e("div",be,[e("button",{onClick:t[4]||(t[4]=o=>{H()}),class:"w-full bg-white text-red-600 font-medium py-4 rounded-lg border border-red-200 shadow-sm hover:bg-red-50 transition-colors flex items-center justify-center"},[r(p(X),{class:"h-5 w-5 mr-2"}),t[12]||(t[12]=Z(" Log Out "))])])]),r(M,{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=o=>m.value=o),title:"Employee Details","full-screen":h.value},{default:b(()=>[e("div",ke,[(a(!0),l(B,null,N(k.value,(o,f)=>(a(),l("div",{key:f,class:"bg-gray-50 p-4 rounded-lg"},[e("p",Ce,c(j(f)),1),e("p",Ve,c(o||"Not specified"),1)]))),128))])]),_:1},8,["modelValue","full-screen"]),r(M,{modelValue:w.value,"onUpdate:modelValue":t[6]||(t[6]=o=>w.value=o),title:"Company Information","full-screen":h.value},{default:b(()=>[e("div",je,[(a(!0),l(B,null,N(C.value,(o,f)=>(a(),l("div",{key:f,class:"bg-gray-50 p-4 rounded-lg"},[e("p",$e,c(j(f)),1),e("p",Se,c(o||"Not specified"),1)]))),128))])]),_:1},8,["modelValue","full-screen"]),r(M,{modelValue:R.value,"onUpdate:modelValue":t[7]||(t[7]=o=>R.value=o),title:"Contact Information","full-screen":h.value},{default:b(()=>[e("div",De,[(a(!0),l(B,null,N(g.value,(o,f)=>(a(),l("div",{key:f,class:"bg-gray-50 p-4 rounded-lg"},[e("p",Be,c(j(f)),1),e("p",Ne,c(o||"Not specified"),1)]))),128))])]),_:1},8,["modelValue","full-screen"])])}}};export{ze as default};
