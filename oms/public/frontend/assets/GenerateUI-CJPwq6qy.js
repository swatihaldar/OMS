const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FontColor-B5ZwxpBi.js","assets/index-zw0dkMdh.js","assets/index-CBvLPfO7.css","assets/InsertLink-BzX-40yL.js","assets/InsertImage-BPDmyf9I.js","assets/InsertVideo-DWzAvPeG.js"])))=>i.map(i=>d[i]);
var Xs=Object.defineProperty,Gs=Object.defineProperties;var Qs=Object.getOwnPropertyDescriptors;var go=Object.getOwnPropertySymbols;var pa=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable;var fa=(e,t,n)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||(t={}))pa.call(t,n)&&fa(e,n,t[n]);if(go)for(var n of go(t))va.call(t,n)&&fa(e,n,t[n]);return e},Te=(e,t)=>Gs(e,Qs(t));var Ue=(e,t)=>{var n={};for(var o in e)pa.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&go)for(var o of go(e))t.indexOf(o)<0&&va.call(e,o)&&(n[o]=e[o]);return n};var Q=(e,t,n)=>new Promise((o,r)=>{var a=l=>{try{s(n.next(l))}catch(d){r(d)}},i=l=>{try{s(n.throw(l))}catch(d){r(d)}},s=l=>l.done?o(l.value):Promise.resolve(l.value).then(a,i);s((n=n.apply(e,t)).next())});import{o as v,a as w,b as h,d as ii,h as Re,F as ge,i as Ge,p as dt,r as D,e as Se,w as Le,f as L,g as ve,t as Ne,j as _e,k as ct,n as lt,T as zo,l as Uo,s as Dr,m as de,_ as be,q as fe,u as Ct,v as Et,c as oe,x as N,y as q,z as et,A as Xn,B as Zs,C as jt,D as Ee,E as Fe,G as Pe,H as z,I as X,J as ke,K as Be,L as Gn,M as ye,N as ao,O as E,P as Pr,Q as si,R as Vt,S as ar,U as li,V as ui,W as di,X as el,Y as tl,Z as ci,$ as nl,a0 as fi,a1 as qo,a2 as pi,a3 as Pn,a4 as ol,a5 as wn,a6 as yo,a7 as bo,a8 as rl,a9 as al,aa as il,ab as sl,ac as ll,ad as ul,ae as dl,af as cl,ag as fl,ah as pl,ai as vl,aj as ml,ak as hl,al as gl,am as yl,an as bl,ao as wl,ap as vi,aq as mi,ar as yn,as as xl,at as _l,au as Cl,av as hi,aw as Ol,ax as gi,ay as $l,az as kl,aA as Al,aB as wo,aC as zn,aD as Fr,aE as yi,aF as Tl,aG as El,aH as Sl,aI as Dl,aJ as nn}from"./index-zw0dkMdh.js";function Pl(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function ma(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Fl(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Ll(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})])}function Ml(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Rl(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function Vl(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function jl(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Bl(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}function ha(e,t){return v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function qe(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,qe),o}var Jt=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Jt||{}),Wt=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Wt||{});function Qe(a){var i=a,{visible:e=!0,features:t=0,ourProps:n,theirProps:o}=i,r=Ue(i,["visible","features","ourProps","theirProps"]);var s;let l=wi(o,n),d=Object.assign(r,{props:l});if(e||t&2&&l.static)return ir(d);if(t&1){let u=(s=l.unmount)==null||s?0:1;return qe(u,{0(){return null},1(){return ir(Te(K({},r),{props:Te(K({},l),{hidden:!0,style:{display:"none"}})}))}})}return ir(d)}function ir({props:e,attrs:t,slots:n,slot:o,name:r}){var a,i;let c=Wo(e,["unmount","static"]),{as:s}=c,l=Ue(c,["as"]),d=(a=n.default)==null?void 0:a.call(n,o),u={};if(o){let f=!1,p=[];for(let[g,y]of Object.entries(o))typeof y=="boolean"&&(f=!0),y===!0&&p.push(g);f&&(u["data-headlessui-state"]=p.join(" "))}if(s==="template"){if(d=bi(d!=null?d:[]),Object.keys(l).length>0||Object.keys(t).length>0){let[f,...p]=d!=null?d:[];if(!Il(f)||p.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(t)).map(b=>b.trim()).filter((b,_,k)=>k.indexOf(b)===_).sort((b,_)=>b.localeCompare(_)).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let g=wi((i=f.props)!=null?i:{},l),y=ii(f,g);for(let b in g)b.startsWith("on")&&(y.props||(y.props={}),y.props[b]=g[b]);return y}return Array.isArray(d)&&d.length===1?d[0]:d}return Re(s,Object.assign({},l,u),{default:()=>d})}function bi(e){return e.flatMap(t=>t.type===ge?bi(t.children):[t])}function wi(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let o of e)for(let r in o)r.startsWith("on")&&typeof o[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(o[r])):t[r]=o[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(o=>[o,void 0])));for(let o in n)Object.assign(t,{[o](r,...a){let i=n[o];for(let s of i){if(r instanceof Event&&r.defaultPrevented)return;s(r,...a)}}});return t}function Hl(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Wo(e,t=[]){let n=Object.assign({},e);for(let o of t)o in n&&delete n[o];return n}function Il(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Nl=0;function zl(){return++Nl}function Gt(){return zl()}var Ze=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Ze||{});function Ul(e){throw new Error("Unexpected object: "+e)}var Je=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Je||{});function ql(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),r=o!=null?o:-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(i=>!t.resolveDisabled(i));case 1:{let i=n.slice().reverse().findIndex((s,l,d)=>r!==-1&&d.length-l-1>=r?!1:!t.resolveDisabled(s));return i===-1?i:n.length-1-i}case 2:return n.findIndex((i,s)=>s<=r?!1:!t.resolveDisabled(i));case 3:{let i=n.slice().reverse().findIndex(s=>!t.resolveDisabled(s));return i===-1?i:n.length-1-i}case 4:return n.findIndex(i=>t.resolveId(i)===e.id);case 5:return null;default:Ul(e)}})();return a===-1?o:a}function we(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let xi=Symbol("Context");var Ye=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ye||{});function Wl(){return Jo()!==null}function Jo(){return Ge(xi,null)}function _i(e){dt(xi,e)}function ga(e,t){if(e)return e;let n=t!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function Jl(e,t){let n=D(ga(e.value.type,e.value.as));return Se(()=>{n.value=ga(e.value.type,e.value.as)}),Le(()=>{var o;n.value||we(t)&&we(t)instanceof HTMLButtonElement&&!((o=we(t))!=null&&o.hasAttribute("type"))&&(n.value="button")}),n}var Yl=Object.defineProperty,Kl=(e,t,n)=>t in e?Yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ya=(e,t,n)=>(Kl(e,typeof t!="symbol"?t+"":t,n),n);class Xl{constructor(){ya(this,"current",this.detect()),ya(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window=="undefined"||typeof document=="undefined"?"server":"client"}}let io=new Xl;function Qt(e){if(io.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=we(e);if(t)return t.ownerDocument}return document}function Gl({container:e,accept:t,walk:n,enabled:o}){Le(()=>{let r=e.value;if(!r||o!==void 0&&!o.value)return;let a=Qt(e);if(!a)return;let i=Object.assign(l=>t(l),{acceptNode:t}),s=a.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,i,!1);for(;s.nextNode();)n(s.currentNode)})}let mr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var qt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(qt||{}),Ci=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Ci||{}),Ql=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Ql||{});function Zl(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(mr)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Oi=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Oi||{});function eu(e,t=0){var n;return e===((n=Qt(e))==null?void 0:n.body)?!1:qe(t,{0(){return e.matches(mr)},1(){let o=e;for(;o!==null;){if(o.matches(mr))return!0;o=o.parentElement}return!1}})}var tu=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(tu||{});typeof window!="undefined"&&typeof document!="undefined"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ln(e){e==null||e.focus({preventScroll:!0})}let nu=["textarea","input"].join(",");function ou(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,nu))!=null?n:!1}function $i(e,t=n=>n){return e.slice().sort((n,o)=>{let r=t(n),a=t(o);if(r===null||a===null)return 0;let i=r.compareDocumentPosition(a);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function So(e,t,{sorted:n=!0,relativeTo:o=null,skipElements:r=[]}={}){var a;let i=(a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?a:document,s=Array.isArray(e)?n?$i(e):e:Zl(e);r.length>0&&s.length>1&&(s=s.filter(g=>!r.includes(g))),o=o!=null?o:i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(o))-1;if(t&4)return Math.max(0,s.indexOf(o))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=s.length,p;do{if(c>=f||c+f<=0)return 0;let g=d+c;if(t&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}p=s[g],p==null||p.focus(u),c+=l}while(p!==i.activeElement);return t&6&&ou(p)&&p.select(),2}function xo(e,t,n){io.isServer||Le(o=>{document.addEventListener(e,t,n),o(()=>document.removeEventListener(e,t,n))})}function ki(e,t,n){io.isServer||Le(o=>{window.addEventListener(e,t,n),o(()=>window.removeEventListener(e,t,n))})}function Ai(e,t,n=L(()=>!0)){function o(a,i){if(!n.value||a.defaultPrevented)return;let s=i(a);if(s===null||!s.getRootNode().contains(s))return;let l=function d(u){return typeof u=="function"?d(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let d of l){if(d===null)continue;let u=d instanceof HTMLElement?d:we(d);if(u!=null&&u.contains(s)||a.composed&&a.composedPath().includes(u))return}return!eu(s,Oi.Loose)&&s.tabIndex!==-1&&a.preventDefault(),t(a,s)}let r=D(null);xo("pointerdown",a=>{var i,s;n.value&&(r.value=((s=(i=a.composedPath)==null?void 0:i.call(a))==null?void 0:s[0])||a.target)},!0),xo("mousedown",a=>{var i,s;n.value&&(r.value=((s=(i=a.composedPath)==null?void 0:i.call(a))==null?void 0:s[0])||a.target)},!0),xo("click",a=>{r.value&&(o(a,()=>r.value),r.value=null)},!0),xo("touchend",a=>o(a,()=>a.target instanceof HTMLElement?a.target:null),!0),ki("blur",a=>o(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Qn=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Qn||{});let Fo=ve({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{let i=e,{features:o}=i,r=Ue(i,["features"]),a={"aria-hidden":(o&2)===2?!0:void 0,style:K({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},(o&4)===4&&(o&2)!==2&&{display:"none"})};return Qe({ourProps:a,theirProps:r,slot:{},attrs:n,slots:t,name:"Hidden"})}}});function Ti(e={},t=null,n=[]){for(let[o,r]of Object.entries(e))Si(n,Ei(t,o),r);return n}function Ei(e,t){return e?e+"["+t+"]":t}function Si(e,t,n){if(Array.isArray(n))for(let[o,r]of n.entries())Si(e,Ei(t,o.toString()),r);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):Ti(n,t,e)}function ru(e,t,n){let o=D(n==null?void 0:n.value),r=L(()=>e.value!==void 0);return[L(()=>r.value?e.value:o.value),function(a){return r.value||(o.value=a),t==null?void 0:t(a)}]}function ba(e){return[e.screenX,e.screenY]}function au(){let e=D([-1,-1]);return{wasMoved(t){let n=ba(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=ba(t)}}}function Di(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function iu(){return/Android/gi.test(window.navigator.userAgent)}function su(){return Di()||iu()}function Lr(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Fn(){let e=[],t={addEventListener(n,o,r,a){return n.addEventListener(o,r,a),t.add(()=>n.removeEventListener(o,r,a))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return Lr(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,r){let a=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:r}),this.add(()=>{Object.assign(n.style,{[o]:a})})},group(n){let o=Fn();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let r of e.splice(o,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function lu(e,t){return e===t}var uu=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(uu||{}),du=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(du||{}),cu=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(cu||{});let Pi=Symbol("ComboboxContext");function so(e){let t=Ge(Pi,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,so),n}return t}let fu=ve({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>lu},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){let r=D(1),a=D(null),i=D(null),s=D(null),l=D(null),d=D({static:!1,hold:!1}),u=D([]),c=D(null),f=D(1),p=D(!1);function g(S=x=>x){let x=c.value!==null?u.value[c.value]:null,O=$i(S(u.value.slice()),C=>we(C.dataRef.domRef)),A=x?O.indexOf(x):null;return A===-1&&(A=null),{options:O,activeOptionIndex:A}}let y=L(()=>e.multiple?1:0),b=L(()=>e.nullable),[_,k]=ru(L(()=>e.modelValue),S=>o("update:modelValue",S),L(()=>e.defaultValue)),$=L(()=>_.value===void 0?qe(y.value,{1:[],0:void 0}):_.value),m=null,P=null,T={comboboxState:r,value:$,mode:y,compare(S,x){if(typeof e.by=="string"){let O=e.by;return(S==null?void 0:S[O])===(x==null?void 0:x[O])}return e.by(S,x)},defaultValue:L(()=>e.defaultValue),nullable:b,inputRef:i,labelRef:a,buttonRef:s,optionsRef:l,disabled:L(()=>e.disabled),options:u,change(S){k(S)},activeOptionIndex:L(()=>{if(p.value&&c.value===null&&u.value.length>0){let S=u.value.findIndex(x=>!x.dataRef.disabled);S!==-1&&(c.value=S)}return c.value}),activationTrigger:f,optionsPropsRef:d,closeCombobox(){p.value=!1,!e.disabled&&r.value!==1&&(r.value=1,c.value=null)},openCombobox(){if(p.value=!0,e.disabled||r.value===0)return;let S=u.value.findIndex(x=>{let O=Ne(x.dataRef.value);return qe(y.value,{0:()=>T.compare(Ne(T.value.value),Ne(O)),1:()=>Ne(T.value.value).some(A=>T.compare(Ne(A),Ne(O)))})});S!==-1&&(c.value=S),r.value=0},goToOption(S,x,O){p.value=!1,m!==null&&cancelAnimationFrame(m),m=requestAnimationFrame(()=>{if(e.disabled||l.value&&!d.value.static&&r.value===1)return;let A=g();if(A.activeOptionIndex===null){let V=A.options.findIndex(ae=>!ae.dataRef.disabled);V!==-1&&(A.activeOptionIndex=V)}let C=ql(S===Je.Specific?{focus:Je.Specific,id:x}:{focus:S},{resolveItems:()=>A.options,resolveActiveIndex:()=>A.activeOptionIndex,resolveId:V=>V.id,resolveDisabled:V=>V.dataRef.disabled});c.value=C,f.value=O!=null?O:1,u.value=A.options})},selectOption(S){let x=u.value.find(A=>A.id===S);if(!x)return;let{dataRef:O}=x;k(qe(y.value,{0:()=>O.value,1:()=>{let A=Ne(T.value.value).slice(),C=Ne(O.value),V=A.findIndex(ae=>T.compare(C,Ne(ae)));return V===-1?A.push(C):A.splice(V,1),A}}))},selectActiveOption(){if(T.activeOptionIndex.value===null)return;let{dataRef:S,id:x}=u.value[T.activeOptionIndex.value];k(qe(y.value,{0:()=>S.value,1:()=>{let O=Ne(T.value.value).slice(),A=Ne(S.value),C=O.findIndex(V=>T.compare(A,Ne(V)));return C===-1?O.push(A):O.splice(C,1),O}})),T.goToOption(Je.Specific,x)},registerOption(S,x){P&&cancelAnimationFrame(P);let O={id:S,dataRef:x},A=g(C=>(C.push(O),C));if(c.value===null){let C=x.value.value;qe(y.value,{0:()=>T.compare(Ne(T.value.value),Ne(C)),1:()=>Ne(T.value.value).some(V=>T.compare(Ne(V),Ne(C)))})&&(A.activeOptionIndex=A.options.indexOf(O))}u.value=A.options,c.value=A.activeOptionIndex,f.value=1,A.options.some(C=>!we(C.dataRef.domRef))&&(P=requestAnimationFrame(()=>{let C=g();u.value=C.options,c.value=C.activeOptionIndex}))},unregisterOption(S){var x;T.activeOptionIndex.value!==null&&((x=T.options.value[T.activeOptionIndex.value])==null?void 0:x.id)===S&&(p.value=!0);let O=g(A=>{let C=A.findIndex(V=>V.id===S);return C!==-1&&A.splice(C,1),A});u.value=O.options,c.value=O.activeOptionIndex,f.value=1}};Ai([i,s,l],()=>T.closeCombobox(),L(()=>r.value===0)),dt(Pi,T),_i(L(()=>qe(r.value,{0:Ye.Open,1:Ye.Closed})));let j=L(()=>T.activeOptionIndex.value===null?null:u.value[T.activeOptionIndex.value].dataRef.value),F=L(()=>{var S;return(S=we(i))==null?void 0:S.closest("form")});return Se(()=>{_e([F],()=>{if(!F.value||e.defaultValue===void 0)return;function S(){T.change(e.defaultValue)}return F.value.addEventListener("reset",S),()=>{var x;(x=F.value)==null||x.removeEventListener("reset",S)}},{immediate:!0})}),()=>{let V=e,{name:S,disabled:x,form:O}=V,A=Ue(V,["name","disabled","form"]),C={open:r.value===0,disabled:x,activeIndex:T.activeOptionIndex.value,activeOption:j.value,value:$.value};return Re(ge,[...S!=null&&$.value!=null?Ti({[S]:$.value}).map(([ae,ne])=>Re(Fo,Hl({features:Qn.Hidden,key:ae,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:ae,value:ne}))):[],Qe({theirProps:K(K({},n),Wo(A,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])),ourProps:{},slot:C,slots:t,attrs:n,name:"Combobox"})])}}}),pu=ve({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${Gt()}`}},setup(e,{attrs:t,slots:n,expose:o}){let r=so("ComboboxButton");o({el:r.buttonRef,$el:r.buttonRef});function a(l){r.disabled.value||(r.comboboxState.value===0?r.closeCombobox():(l.preventDefault(),r.openCombobox()),lt(()=>{var d;return(d=we(r.inputRef))==null?void 0:d.focus({preventScroll:!0})}))}function i(l){switch(l.key){case Ze.ArrowDown:l.preventDefault(),l.stopPropagation(),r.comboboxState.value===1&&r.openCombobox(),lt(()=>{var d;return(d=r.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case Ze.ArrowUp:l.preventDefault(),l.stopPropagation(),r.comboboxState.value===1&&(r.openCombobox(),lt(()=>{r.value.value||r.goToOption(Je.Last)})),lt(()=>{var d;return(d=r.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case Ze.Escape:if(r.comboboxState.value!==0)return;l.preventDefault(),r.optionsRef.value&&!r.optionsPropsRef.value.static&&l.stopPropagation(),r.closeCombobox(),lt(()=>{var d;return(d=r.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return}}let s=Jl(L(()=>({as:e.as,type:t.type})),r.buttonRef);return()=>{var l,d;let u={open:r.comboboxState.value===0,disabled:r.disabled.value,value:r.value.value},g=e,{id:c}=g,f=Ue(g,["id"]),p={ref:r.buttonRef,id:c,type:s.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(l=we(r.optionsRef))==null?void 0:l.id,"aria-expanded":r.comboboxState.value===0,"aria-labelledby":r.labelRef.value?[(d=we(r.labelRef))==null?void 0:d.id,c].join(" "):void 0,disabled:r.disabled.value===!0?!0:void 0,onKeydown:i,onClick:a};return Qe({ourProps:p,theirProps:f,slot:u,attrs:t,slots:n,name:"ComboboxButton"})}}}),vu=ve({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${Gt()}`}},emits:{change:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:r}){let a=so("ComboboxInput"),i=L(()=>Qt(we(a.inputRef))),s={value:!1};r({el:a.inputRef,$el:a.inputRef});function l(){a.change(null);let _=we(a.optionsRef);_&&(_.scrollTop=0),a.goToOption(Je.Nothing)}let d=L(()=>{var _;let k=a.value.value;return we(a.inputRef)?typeof e.displayValue!="undefined"&&k!==void 0?(_=e.displayValue(k))!=null?_:"":typeof k=="string"?k:"":""});Se(()=>{_e([d,a.comboboxState,i],([_,k],[$,m])=>{if(s.value)return;let P=we(a.inputRef);P&&((m===0&&k===1||_!==$)&&(P.value=_),requestAnimationFrame(()=>{var T;if(s.value||!P||((T=i.value)==null?void 0:T.activeElement)!==P)return;let{selectionStart:j,selectionEnd:F}=P;Math.abs((F!=null?F:0)-(j!=null?j:0))===0&&j===0&&P.setSelectionRange(P.value.length,P.value.length)}))},{immediate:!0}),_e([a.comboboxState],([_],[k])=>{if(_===0&&k===1){if(s.value)return;let $=we(a.inputRef);if(!$)return;let m=$.value,{selectionStart:P,selectionEnd:T,selectionDirection:j}=$;$.value="",$.value=m,j!==null?$.setSelectionRange(P,T,j):$.setSelectionRange(P,T)}})});let u=D(!1);function c(){u.value=!0}function f(){Fn().nextFrame(()=>{u.value=!1})}function p(_){switch(s.value=!0,_.key){case Ze.Enter:if(s.value=!1,a.comboboxState.value!==0||u.value)return;if(_.preventDefault(),_.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case Ze.ArrowDown:return s.value=!1,_.preventDefault(),_.stopPropagation(),qe(a.comboboxState.value,{0:()=>a.goToOption(Je.Next),1:()=>a.openCombobox()});case Ze.ArrowUp:return s.value=!1,_.preventDefault(),_.stopPropagation(),qe(a.comboboxState.value,{0:()=>a.goToOption(Je.Previous),1:()=>{a.openCombobox(),lt(()=>{a.value.value||a.goToOption(Je.Last)})}});case Ze.Home:if(_.shiftKey)break;return s.value=!1,_.preventDefault(),_.stopPropagation(),a.goToOption(Je.First);case Ze.PageUp:return s.value=!1,_.preventDefault(),_.stopPropagation(),a.goToOption(Je.First);case Ze.End:if(_.shiftKey)break;return s.value=!1,_.preventDefault(),_.stopPropagation(),a.goToOption(Je.Last);case Ze.PageDown:return s.value=!1,_.preventDefault(),_.stopPropagation(),a.goToOption(Je.Last);case Ze.Escape:if(s.value=!1,a.comboboxState.value!==0)return;_.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&_.stopPropagation(),a.nullable.value&&a.mode.value===0&&a.value.value===null&&l(),a.closeCombobox();break;case Ze.Tab:if(s.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function g(_){t("change",_),a.nullable.value&&a.mode.value===0&&_.target.value===""&&l(),a.openCombobox()}function y(){s.value=!1}let b=L(()=>{var _,k,$,m;return(m=($=(k=e.defaultValue)!=null?k:a.defaultValue.value!==void 0?(_=e.displayValue)==null?void 0:_.call(e,a.defaultValue.value):null)!=null?$:a.defaultValue.value)!=null?m:""});return()=>{var _,k,$,m,P,T;let j={open:a.comboboxState.value===0},C=e,{id:F,displayValue:S,onChange:x}=C,O=Ue(C,["id","displayValue","onChange"]),A={"aria-controls":(_=a.optionsRef.value)==null?void 0:_.id,"aria-expanded":a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(k=a.options.value[a.activeOptionIndex.value])==null?void 0:k.id,"aria-labelledby":(P=($=we(a.labelRef))==null?void 0:$.id)!=null?P:(m=we(a.buttonRef))==null?void 0:m.id,"aria-autocomplete":"list",id:F,onCompositionstart:c,onCompositionend:f,onKeydown:p,onInput:g,onBlur:y,role:"combobox",type:(T=n.type)!=null?T:"text",tabIndex:0,ref:a.inputRef,defaultValue:b.value,disabled:a.disabled.value===!0?!0:void 0};return Qe({ourProps:A,theirProps:O,slot:j,attrs:n,slots:o,features:Jt.RenderStrategy|Jt.Static,name:"ComboboxInput"})}}}),mu=ve({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:n,expose:o}){let r=so("ComboboxOptions"),a=`headlessui-combobox-options-${Gt()}`;o({el:r.optionsRef,$el:r.optionsRef}),Le(()=>{r.optionsPropsRef.value.static=e.static}),Le(()=>{r.optionsPropsRef.value.hold=e.hold});let i=Jo(),s=L(()=>i!==null?(i.value&Ye.Open)===Ye.Open:r.comboboxState.value===0);return Gl({container:L(()=>we(r.optionsRef)),enabled:L(()=>r.comboboxState.value===0),accept(l){return l.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}}),()=>{var l,d,u;let c={open:r.comboboxState.value===0},f={"aria-labelledby":(u=(l=we(r.labelRef))==null?void 0:l.id)!=null?u:(d=we(r.buttonRef))==null?void 0:d.id,id:a,ref:r.optionsRef,role:"listbox","aria-multiselectable":r.mode.value===1?!0:void 0},p=Wo(e,["hold"]);return Qe({ourProps:f,theirProps:p,slot:c,attrs:t,slots:n,features:Jt.RenderStrategy|Jt.Static,visible:s.value,name:"ComboboxOptions"})}}}),hu=ve({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:o}){let r=so("ComboboxOption"),a=`headlessui-combobox-option-${Gt()}`,i=D(null);o({el:i,$el:i});let s=L(()=>r.activeOptionIndex.value!==null?r.options.value[r.activeOptionIndex.value].id===a:!1),l=L(()=>qe(r.mode.value,{0:()=>r.compare(Ne(r.value.value),Ne(e.value)),1:()=>Ne(r.value.value).some(b=>r.compare(Ne(b),Ne(e.value)))})),d=L(()=>({disabled:e.disabled,value:e.value,domRef:i}));Se(()=>r.registerOption(a,d)),ct(()=>r.unregisterOption(a)),Le(()=>{r.comboboxState.value===0&&s.value&&r.activationTrigger.value!==0&&lt(()=>{var b,_;return(_=(b=we(i))==null?void 0:b.scrollIntoView)==null?void 0:_.call(b,{block:"nearest"})})});function u(b){if(e.disabled)return b.preventDefault();r.selectOption(a),r.mode.value===0&&r.closeCombobox(),su()||requestAnimationFrame(()=>{var _;return(_=we(r.inputRef))==null?void 0:_.focus()})}function c(){if(e.disabled)return r.goToOption(Je.Nothing);r.goToOption(Je.Specific,a)}let f=au();function p(b){f.update(b)}function g(b){f.wasMoved(b)&&(e.disabled||s.value||r.goToOption(Je.Specific,a,0))}function y(b){f.wasMoved(b)&&(e.disabled||s.value&&(r.optionsPropsRef.value.hold||r.goToOption(Je.Nothing)))}return()=>{let{disabled:b}=e,_={active:s.value,selected:l.value,disabled:b},k={id:a,ref:i,role:"option",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,"aria-selected":l.value,disabled:void 0,onClick:u,onFocus:c,onPointerenter:p,onMouseenter:p,onPointermove:g,onMousemove:g,onPointerleave:y,onMouseleave:y};return Qe({ourProps:k,theirProps:e,slot:_,attrs:n,slots:t,name:"ComboboxOption"})}}});var Un=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Un||{});function gu(){let e=D(0);return ki("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function Fi(e,t,n,o){io.isServer||Le(r=>{e=e!=null?e:window,e.addEventListener(t,n,o),r(()=>e.removeEventListener(t,n,o))})}function yu(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window!="undefined"&&typeof document!="undefined"&&(document.addEventListener("DOMContentLoaded",t),t())}function Li(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=we(n);o instanceof HTMLElement&&t.add(o)}return t}var Mi=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Mi||{});let jn=Object.assign(ve({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:D(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let r=D(null);o({el:r,$el:r});let a=L(()=>Qt(r)),i=D(!1);Se(()=>i.value=!0),ct(()=>i.value=!1),wu({ownerDocument:a},L(()=>i.value&&!!(e.features&16)));let s=xu({ownerDocument:a,container:r,initialFocus:L(()=>e.initialFocus)},L(()=>i.value&&!!(e.features&2)));_u({ownerDocument:a,container:r,containers:e.containers,previousActiveElement:s},L(()=>i.value&&!!(e.features&8)));let l=gu();function d(p){let g=we(r);g&&(y=>y())(()=>{qe(l.value,{[Un.Forwards]:()=>{So(g,qt.First,{skipElements:[p.relatedTarget]})},[Un.Backwards]:()=>{So(g,qt.Last,{skipElements:[p.relatedTarget]})}})})}let u=D(!1);function c(p){p.key==="Tab"&&(u.value=!0,requestAnimationFrame(()=>{u.value=!1}))}function f(p){if(!i.value)return;let g=Li(e.containers);we(r)instanceof HTMLElement&&g.add(we(r));let y=p.relatedTarget;y instanceof HTMLElement&&y.dataset.headlessuiFocusGuard!=="true"&&(Ri(g,y)||(u.value?So(we(r),qe(l.value,{[Un.Forwards]:()=>qt.Next,[Un.Backwards]:()=>qt.Previous})|qt.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&ln(p.target)))}return()=>{let p={},g={ref:r,onKeydown:c,onFocusout:f},$=e,{features:y,initialFocus:b,containers:_}=$,k=Ue($,["features","initialFocus","containers"]);return Re(ge,[!!(y&4)&&Re(Fo,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Qn.Focusable}),Qe({ourProps:g,theirProps:K(K({},t),k),slot:p,attrs:t,slots:n,name:"FocusTrap"}),!!(y&4)&&Re(Fo,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Qn.Focusable})])}}}),{features:Mi}),an=[];yu(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&an[0]!==t.target&&(an.unshift(t.target),an=an.filter(n=>n!=null&&n.isConnected),an.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function bu(e){let t=D(an.slice());return _e([e],([n],[o])=>{o===!0&&n===!1?Lr(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=an.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function wu({ownerDocument:e},t){let n=bu(t);Se(()=>{Le(()=>{var o,r;t.value||((o=e.value)==null?void 0:o.activeElement)===((r=e.value)==null?void 0:r.body)&&ln(n())},{flush:"post"})}),ct(()=>{t.value&&ln(n())})}function xu({ownerDocument:e,container:t,initialFocus:n},o){let r=D(null),a=D(!1);return Se(()=>a.value=!0),ct(()=>a.value=!1),Se(()=>{_e([t,n,o],(i,s)=>{if(i.every((d,u)=>(s==null?void 0:s[u])===d)||!o.value)return;let l=we(t);l&&Lr(()=>{var d,u;if(!a.value)return;let c=we(n),f=(d=e.value)==null?void 0:d.activeElement;if(c){if(c===f){r.value=f;return}}else if(l.contains(f)){r.value=f;return}c?ln(c):So(l,qt.First|qt.NoScroll)===Ci.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.value=(u=e.value)==null?void 0:u.activeElement})},{immediate:!0,flush:"post"})}),r}function _u({ownerDocument:e,container:t,containers:n,previousActiveElement:o},r){var a;Fi((a=e.value)==null?void 0:a.defaultView,"focus",i=>{if(!r.value)return;let s=Li(n);we(t)instanceof HTMLElement&&s.add(we(t));let l=o.value;if(!l)return;let d=i.target;d&&d instanceof HTMLElement?Ri(s,d)?(o.value=d,ln(d)):(i.preventDefault(),i.stopPropagation(),ln(l)):ln(o.value)},!0)}function Ri(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let sr=new Map,Bn=new Map;function wa(e,t=D(!0)){Le(n=>{var o;if(!t.value)return;let r=we(e);if(!r)return;n(function(){var i;if(!r)return;let s=(i=Bn.get(r))!=null?i:1;if(s===1?Bn.delete(r):Bn.set(r,s-1),s!==1)return;let l=sr.get(r);l&&(l["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",l["aria-hidden"]),r.inert=l.inert,sr.delete(r))});let a=(o=Bn.get(r))!=null?o:0;Bn.set(r,a+1),a===0&&(sr.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0)})}let Vi=Symbol("ForcePortalRootContext");function Cu(){return Ge(Vi,!1)}let xa=ve({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n}){return dt(Vi,e.force),()=>{let a=e,{force:o}=a,r=Ue(a,["force"]);return Qe({theirProps:r,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})}}});function Ou(e){let t=Qt(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)}let $u=ve({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let o=D(null),r=L(()=>Qt(o)),a=Cu(),i=Ge(ji,null),s=D(a===!0||i==null?Ou(o.value):i.resolveTarget());Le(()=>{a||i!=null&&(s.value=i.resolveTarget())});let l=Ge(hr,null);return Se(()=>{let d=we(o);d&&l&&ct(l.register(d))}),ct(()=>{var d,u;let c=(d=r.value)==null?void 0:d.getElementById("headlessui-portal-root");c&&s.value===c&&s.value.children.length<=0&&((u=s.value.parentElement)==null||u.removeChild(s.value))}),()=>{if(s.value===null)return null;let d={ref:o,"data-headlessui-portal":""};return Re(zo,{to:s.value},Qe({ourProps:d,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),hr=Symbol("PortalParentContext");function ku(){let e=Ge(hr,null),t=D([]);function n(a){return t.value.push(a),e&&e.register(a),()=>o(a)}function o(a){let i=t.value.indexOf(a);i!==-1&&t.value.splice(i,1),e&&e.unregister(a)}let r={register:n,unregister:o,portals:t};return[t,ve({name:"PortalWrapper",setup(a,{slots:i}){return dt(hr,r),()=>{var s;return(s=i.default)==null?void 0:s.call(i)}}})]}let ji=Symbol("PortalGroupContext"),Au=ve({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let o=Uo({resolveTarget(){return e.target}});return dt(ji,o),()=>{let i=e,{target:r}=i,a=Ue(i,["target"]);return Qe({theirProps:a,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}}),Bi=Symbol("StackContext");var gr=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(gr||{});function Tu(){return Ge(Bi,()=>{})}function Eu({type:e,enabled:t,element:n,onUpdate:o}){let r=Tu();function a(...i){o==null||o(...i),r(...i)}Se(()=>{_e(t,(i,s)=>{i?a(0,e,n):s===!0&&a(1,e,n)},{immediate:!0,flush:"sync"})}),ct(()=>{t.value&&a(1,e,n)}),dt(Bi,a)}let Su=Symbol("DescriptionContext");function Du({slot:e=D({}),name:t="Description",props:n={}}={}){let o=D([]);function r(a){return o.value.push(a),()=>{let i=o.value.indexOf(a);i!==-1&&o.value.splice(i,1)}}return dt(Su,{register:r,slot:e,name:t,props:n}),L(()=>o.value.length>0?o.value.join(" "):void 0)}function Pu(e){let t=Dr(e.getSnapshot());return ct(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function Fu(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(r){return o.add(r),()=>o.delete(r)},dispatch(r,...a){let i=t[r].call(n,...a);i&&(n=i,o.forEach(s=>s()))}}}function Lu(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,r=o.clientWidth-o.offsetWidth,a=e-r;n.style(o,"paddingRight",`${a}px`)}}}function Mu(){if(!Di())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:o}){function r(i){return o.containers.flatMap(s=>s()).some(s=>s.contains(i))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let i=Fn();i.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>i.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let a=null;n.addEventListener(t,"click",i=>{if(i.target instanceof HTMLElement)try{let s=i.target.closest("a");if(!s)return;let{hash:l}=new URL(s.href),d=t.querySelector(l);d&&!r(d)&&(a=d)}catch(s){}},!0),n.addEventListener(t,"touchmove",i=>{i.target instanceof HTMLElement&&!r(i.target)&&i.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})}}}function Ru(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Vu(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let sn=Fu(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Fn(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:Vu(n)},r=[Mu(),Lu(),Ru()];r.forEach(({before:a})=>a==null?void 0:a(o)),r.forEach(({after:a})=>a==null?void 0:a(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});sn.subscribe(()=>{let e=sn.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!o||!r&&o)&&sn.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&sn.dispatch("TEARDOWN",n)}});function ju(e,t,n){let o=Pu(sn),r=L(()=>{let a=e.value?o.value.get(e.value):void 0;return a?a.count>0:!1});return _e([e,t],([a,i],[s],l)=>{if(!a||!i)return;sn.dispatch("PUSH",a,n);let d=!1;l(()=>{d||(sn.dispatch("POP",s!=null?s:a,n),d=!0)})},{immediate:!0}),r}function Bu({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let o=D(null),r=Qt(o);function a(){var i;let s=[];for(let l of e)l!==null&&(l instanceof HTMLElement?s.push(l):"value"in l&&l.value instanceof HTMLElement&&s.push(l.value));if(t!=null&&t.value)for(let l of t.value)s.push(l);for(let l of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(l.contains(we(o))||s.some(d=>l.contains(d))||s.push(l));return s}return{resolveContainers:a,contains(i){return a().some(s=>s.contains(i))},mainTreeNodeRef:o,MainTreeNode(){return n!=null?null:Re(Fo,{features:Qn.Hidden,ref:o})}}}var Hu=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Hu||{});let yr=Symbol("DialogContext");function Mr(e){let t=Ge(yr,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Mr),n}return t}let _o="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Iu=ve({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:_o},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${Gt()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:r}){var a;let i=D(!1);Se(()=>{i.value=!0});let s=D(0),l=Jo(),d=L(()=>e.open===_o&&l!==null?(l.value&Ye.Open)===Ye.Open:e.open),u=D(null),c=L(()=>Qt(u));if(r({el:u,$el:u}),!(e.open!==_o||l!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof d.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${d.value===_o?void 0:e.open}`);let f=L(()=>i.value&&d.value?0:1),p=L(()=>f.value===0),g=L(()=>s.value>1),y=Ge(yr,null)!==null,[b,_]=ku(),{resolveContainers:k,mainTreeNodeRef:$,MainTreeNode:m}=Bu({portals:b,defaultContainers:[L(()=>{var te;return(te=C.panelRef.value)!=null?te:u.value})]}),P=L(()=>g.value?"parent":"leaf"),T=L(()=>l!==null?(l.value&Ye.Closing)===Ye.Closing:!1),j=L(()=>y||T.value?!1:p.value),F=L(()=>{var te,le,me;return(me=Array.from((le=(te=c.value)==null?void 0:te.querySelectorAll("body > *"))!=null?le:[]).find(he=>he.id==="headlessui-portal-root"?!1:he.contains(we($))&&he instanceof HTMLElement))!=null?me:null});wa(F,j);let S=L(()=>g.value?!0:p.value),x=L(()=>{var te,le,me;return(me=Array.from((le=(te=c.value)==null?void 0:te.querySelectorAll("[data-headlessui-portal]"))!=null?le:[]).find(he=>he.contains(we($))&&he instanceof HTMLElement))!=null?me:null});wa(x,S),Eu({type:"Dialog",enabled:L(()=>f.value===0),element:u,onUpdate:(te,le)=>{if(le==="Dialog")return qe(te,{[gr.Add]:()=>s.value+=1,[gr.Remove]:()=>s.value-=1})}});let O=Du({name:"DialogDescription",slot:L(()=>({open:d.value}))}),A=D(null),C={titleId:A,panelRef:D(null),dialogState:f,setTitleId(te){A.value!==te&&(A.value=te)},close(){t("close",!1)}};dt(yr,C);let V=L(()=>!(!p.value||g.value));Ai(k,(te,le)=>{C.close(),lt(()=>le==null?void 0:le.focus())},V);let ae=L(()=>!(g.value||f.value!==0));Fi((a=c.value)==null?void 0:a.defaultView,"keydown",te=>{ae.value&&(te.defaultPrevented||te.key===Ze.Escape&&(te.preventDefault(),te.stopPropagation(),C.close()))});let ne=L(()=>!(T.value||f.value!==0||y));return ju(c,ne,te=>{var le;return{containers:[...(le=te.containers)!=null?le:[],k]}}),Le(te=>{if(f.value!==0)return;let le=we(u);if(!le)return;let me=new ResizeObserver(he=>{for(let Ve of he){let Ce=Ve.target.getBoundingClientRect();Ce.x===0&&Ce.y===0&&Ce.width===0&&Ce.height===0&&C.close()}});me.observe(le),te(()=>me.disconnect())}),()=>{let Me=e,{id:te,open:le,initialFocus:me}=Me,he=Ue(Me,["id","open","initialFocus"]),Ve=Te(K({},n),{ref:u,id:te,role:"dialog","aria-modal":f.value===0?!0:void 0,"aria-labelledby":A.value,"aria-describedby":O.value}),Ce={open:f.value===0};return Re(xa,{force:!0},()=>[Re($u,()=>Re(Au,{target:u.value},()=>Re(xa,{force:!1},()=>Re(jn,{initialFocus:me,containers:k,features:p.value?qe(P.value,{parent:jn.features.RestoreFocus,leaf:jn.features.All&~jn.features.FocusLock}):jn.features.None},()=>Re(_,{},()=>Qe({ourProps:Ve,theirProps:K(K({},he),n),slot:Ce,attrs:n,slots:o,visible:f.value===0,features:Jt.RenderStrategy|Jt.Static,name:"Dialog"})))))),Re(m)])}}}),Nu=ve({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${Gt()}`}},setup(e,{attrs:t,slots:n,expose:o}){let r=Mr("DialogPanel");o({el:r.panelRef,$el:r.panelRef});function a(i){i.stopPropagation()}return()=>{let d=e,{id:i}=d,s=Ue(d,["id"]),l={id:i,ref:r.panelRef,onClick:a};return Qe({ourProps:l,theirProps:s,slot:{open:r.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),zu=ve({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:()=>`headlessui-dialog-title-${Gt()}`}},setup(e,{attrs:t,slots:n}){let o=Mr("DialogTitle");return Se(()=>{o.setTitleId(e.id),ct(()=>o.setTitleId(null))}),()=>{let i=e,{id:r}=i,a=Ue(i,["id"]);return Qe({ourProps:{id:r},theirProps:a,slot:{open:o.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}});function Uu(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function lr(e,...t){e&&t.length>0&&e.classList.add(...t)}function Co(e,...t){e&&t.length>0&&e.classList.remove(...t)}var br=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(br||{});function qu(e,t){let n=Fn();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:r}=getComputedStyle(e),[a,i]=[o,r].map(s=>{let[l=0]=s.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,u)=>u-d);return l});return a!==0?n.setTimeout(()=>t("finished"),a+i):t("finished"),n.add(()=>t("cancelled")),n.dispose}function _a(e,t,n,o,r,a){let i=Fn(),s=a!==void 0?Uu(a):()=>{};return Co(e,...r),lr(e,...t,...n),i.nextFrame(()=>{Co(e,...n),lr(e,...o),i.add(qu(e,l=>(Co(e,...o,...t),lr(e,...r),s(l))))}),i.add(()=>Co(e,...t,...n,...o,...r)),i.add(()=>s("cancelled")),i.dispose}function on(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let Rr=Symbol("TransitionContext");var Wu=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Wu||{});function Ju(){return Ge(Rr,null)!==null}function Yu(){let e=Ge(Rr,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Ku(){let e=Ge(Vr,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Vr=Symbol("NestingContext");function Yo(e){return"children"in e?Yo(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Hi(e){let t=D([]),n=D(!1);Se(()=>n.value=!0),ct(()=>n.value=!1);function o(a,i=Wt.Hidden){let s=t.value.findIndex(({id:l})=>l===a);s!==-1&&(qe(i,{[Wt.Unmount](){t.value.splice(s,1)},[Wt.Hidden](){t.value[s].state="hidden"}}),!Yo(t)&&n.value&&(e==null||e()))}function r(a){let i=t.value.find(({id:s})=>s===a);return i?i.state!=="visible"&&(i.state="visible"):t.value.push({id:a,state:"visible"}),()=>o(a,Wt.Unmount)}return{children:t,register:r,unregister:o}}let Ii=Jt.RenderStrategy,Ni=ve({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:r}){let a=D(0);function i(){a.value|=Ye.Opening,t("beforeEnter")}function s(){a.value&=~Ye.Opening,t("afterEnter")}function l(){a.value|=Ye.Closing,t("beforeLeave")}function d(){a.value&=~Ye.Closing,t("afterLeave")}if(!Ju()&&Wl())return()=>Re(zi,Te(K({},e),{onBeforeEnter:i,onAfterEnter:s,onBeforeLeave:l,onAfterLeave:d}),o);let u=D(null),c=L(()=>e.unmount?Wt.Unmount:Wt.Hidden);r({el:u,$el:u});let{show:f,appear:p}=Yu(),{register:g,unregister:y}=Ku(),b=D(f.value?"visible":"hidden"),_={value:!0},k=Gt(),$={value:!1},m=Hi(()=>{!$.value&&b.value!=="hidden"&&(b.value="hidden",y(k),d())});Se(()=>{let C=g(k);ct(C)}),Le(()=>{if(c.value===Wt.Hidden&&k){if(f.value&&b.value!=="visible"){b.value="visible";return}qe(b.value,{hidden:()=>y(k),visible:()=>g(k)})}});let P=on(e.enter),T=on(e.enterFrom),j=on(e.enterTo),F=on(e.entered),S=on(e.leave),x=on(e.leaveFrom),O=on(e.leaveTo);Se(()=>{Le(()=>{if(b.value==="visible"){let C=we(u);if(C instanceof Comment&&C.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function A(C){let V=_.value&&!p.value,ae=we(u);!ae||!(ae instanceof HTMLElement)||V||($.value=!0,f.value&&i(),f.value||l(),C(f.value?_a(ae,P,T,j,F,ne=>{$.value=!1,ne===br.Finished&&s()}):_a(ae,S,x,O,F,ne=>{$.value=!1,ne===br.Finished&&(Yo(m)||(b.value="hidden",y(k),d()))})))}return Se(()=>{_e([f],(C,V,ae)=>{A(ae),_.value=!1},{immediate:!0})}),dt(Vr,m),_i(L(()=>qe(b.value,{visible:Ye.Open,hidden:Ye.Closed})|a.value)),()=>{let Ae=e,{appear:C,show:V,enter:ae,enterFrom:ne,enterTo:te,entered:le,leave:me,leaveFrom:he,leaveTo:Ve}=Ae,Ce=Ue(Ae,["appear","show","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]),Me={ref:u},je=K(K({},Ce),p.value&&f.value&&io.isServer?{class:de([n.class,Ce.class,...P,...T])}:{});return Qe({theirProps:je,ourProps:Me,slot:{},slots:o,attrs:n,features:Ii,visible:b.value==="visible",name:"TransitionChild"})}}}),Xu=Ni,zi=ve({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let r=Jo(),a=L(()=>e.show===null&&r!==null?(r.value&Ye.Open)===Ye.Open:e.show);Le(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=D(a.value?"visible":"hidden"),s=Hi(()=>{i.value="hidden"}),l=D(!0),d={show:a,appear:L(()=>e.appear||!l.value)};return Se(()=>{Le(()=>{l.value=!1,a.value?i.value="visible":Yo(s)||(i.value="hidden")})}),dt(Vr,s),dt(Rr,d),()=>{let u=Wo(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),c={unmount:e.unmount};return Qe({ourProps:Te(K({},c),{as:"template"}),theirProps:{},slot:{},slots:Te(K({},o),{default:()=>[Re(Xu,K(K(K({onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave")},n),c),u),o.default)]}),attrs:{},features:Ii,visible:i.value==="visible",name:"Transition"})}}});var tt="top",yt="bottom",bt="right",nt="left",jr="auto",lo=[tt,yt,bt,nt],_n="start",Zn="end",Gu="clippingParents",Ui="viewport",Hn="popper",Qu="reference",Ca=lo.reduce(function(e,t){return e.concat([t+"-"+_n,t+"-"+Zn])},[]),qi=[].concat(lo,[jr]).reduce(function(e,t){return e.concat([t,t+"-"+_n,t+"-"+Zn])},[]),Zu="beforeRead",ed="read",td="afterRead",nd="beforeMain",od="main",rd="afterMain",ad="beforeWrite",id="write",sd="afterWrite",ld=[Zu,ed,td,nd,od,rd,ad,id,sd];function Pt(e){return e?(e.nodeName||"").toLowerCase():null}function kt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Cn(e){var t=kt(e).Element;return e instanceof t||e instanceof Element}function mt(e){var t=kt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Wi(e){if(typeof ShadowRoot=="undefined")return!1;var t=kt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ud(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var o=t.styles[n]||{},r=t.attributes[n]||{},a=t.elements[n];!mt(a)||!Pt(a)||(Object.assign(a.style,o),Object.keys(r).forEach(function(i){var s=r[i];s===!1?a.removeAttribute(i):a.setAttribute(i,s===!0?"":s)}))})}function dd(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(o){var r=t.elements[o],a=t.attributes[o]||{},i=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:n[o]),s=i.reduce(function(l,d){return l[d]="",l},{});!mt(r)||!Pt(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}}const cd={name:"applyStyles",enabled:!0,phase:"write",fn:ud,effect:dd,requires:["computeStyles"]};function St(e){return e.split("-")[0]}var un=Math.max,Lo=Math.min,On=Math.round;function $n(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),o=1,r=1;if(mt(e)&&t){var a=e.offsetHeight,i=e.offsetWidth;i>0&&(o=On(n.width)/i||1),a>0&&(r=On(n.height)/a||1)}return{width:n.width/o,height:n.height/r,top:n.top/r,right:n.right/o,bottom:n.bottom/r,left:n.left/o,x:n.left/o,y:n.top/r}}function Br(e){var t=$n(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function Ji(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Wi(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Bt(e){return kt(e).getComputedStyle(e)}function fd(e){return["table","td","th"].indexOf(Pt(e))>=0}function Zt(e){return((Cn(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ko(e){return Pt(e)==="html"?e:e.assignedSlot||e.parentNode||(Wi(e)?e.host:null)||Zt(e)}function Oa(e){return!mt(e)||Bt(e).position==="fixed"?null:e.offsetParent}function pd(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&mt(e)){var o=Bt(e);if(o.position==="fixed")return null}for(var r=Ko(e);mt(r)&&["html","body"].indexOf(Pt(r))<0;){var a=Bt(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function uo(e){for(var t=kt(e),n=Oa(e);n&&fd(n)&&Bt(n).position==="static";)n=Oa(n);return n&&(Pt(n)==="html"||Pt(n)==="body"&&Bt(n).position==="static")?t:n||pd(e)||t}function Hr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function qn(e,t,n){return un(e,Lo(t,n))}function vd(e,t,n){var o=qn(e,t,n);return o>n?n:o}function Yi(){return{top:0,right:0,bottom:0,left:0}}function Ki(e){return Object.assign({},Yi(),e)}function Xi(e,t){return t.reduce(function(n,o){return n[o]=e,n},{})}var md=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Ki(typeof t!="number"?t:Xi(t,lo))};function hd(e){var t,n=e.state,o=e.name,r=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,s=St(n.placement),l=Hr(s),d=[nt,bt].indexOf(s)>=0,u=d?"height":"width";if(!(!a||!i)){var c=md(r.padding,n),f=Br(a),p=l==="y"?tt:nt,g=l==="y"?yt:bt,y=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],b=i[l]-n.rects.reference[l],_=uo(a),k=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,$=y/2-b/2,m=c[p],P=k-f[u]-c[g],T=k/2-f[u]/2+$,j=qn(m,T,P),F=l;n.modifiersData[o]=(t={},t[F]=j,t.centerOffset=j-T,t)}}function gd(e){var t=e.state,n=e.options,o=n.element,r=o===void 0?"[data-popper-arrow]":o;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Ji(t.elements.popper,r)&&(t.elements.arrow=r))}const yd={name:"arrow",enabled:!0,phase:"main",fn:hd,effect:gd,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function kn(e){return e.split("-")[1]}var bd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wd(e){var t=e.x,n=e.y,o=window,r=o.devicePixelRatio||1;return{x:On(t*r)/r||0,y:On(n*r)/r||0}}function $a(e){var t,n=e.popper,o=e.popperRect,r=e.placement,a=e.variation,i=e.offsets,s=e.position,l=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,c=e.isFixed,f=i.x,p=f===void 0?0:f,g=i.y,y=g===void 0?0:g,b=typeof u=="function"?u({x:p,y}):{x:p,y};p=b.x,y=b.y;var _=i.hasOwnProperty("x"),k=i.hasOwnProperty("y"),$=nt,m=tt,P=window;if(d){var T=uo(n),j="clientHeight",F="clientWidth";if(T===kt(n)&&(T=Zt(n),Bt(T).position!=="static"&&s==="absolute"&&(j="scrollHeight",F="scrollWidth")),T=T,r===tt||(r===nt||r===bt)&&a===Zn){m=yt;var S=c&&P.visualViewport?P.visualViewport.height:T[j];y-=S-o.height,y*=l?1:-1}if(r===nt||(r===tt||r===yt)&&a===Zn){$=bt;var x=c&&P.visualViewport?P.visualViewport.width:T[F];p-=x-o.width,p*=l?1:-1}}var O=Object.assign({position:s},d&&bd),A=u===!0?wd({x:p,y}):{x:p,y};if(p=A.x,y=A.y,l){var C;return Object.assign({},O,(C={},C[m]=k?"0":"",C[$]=_?"0":"",C.transform=(P.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",C))}return Object.assign({},O,(t={},t[m]=k?y+"px":"",t[$]=_?p+"px":"",t.transform="",t))}function xd(e){var t=e.state,n=e.options,o=n.gpuAcceleration,r=o===void 0?!0:o,a=n.adaptive,i=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,d={placement:St(t.placement),variation:kn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,$a(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,$a(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _d={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xd,data:{}};var Oo={passive:!0};function Cd(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,a=r===void 0?!0:r,i=o.resize,s=i===void 0?!0:i,l=kt(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&d.forEach(function(u){u.addEventListener("scroll",n.update,Oo)}),s&&l.addEventListener("resize",n.update,Oo),function(){a&&d.forEach(function(u){u.removeEventListener("scroll",n.update,Oo)}),s&&l.removeEventListener("resize",n.update,Oo)}}const Od={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Cd,data:{}};var $d={left:"right",right:"left",bottom:"top",top:"bottom"};function Do(e){return e.replace(/left|right|bottom|top/g,function(t){return $d[t]})}var kd={start:"end",end:"start"};function ka(e){return e.replace(/start|end/g,function(t){return kd[t]})}function Ir(e){var t=kt(e),n=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:n,scrollTop:o}}function Nr(e){return $n(Zt(e)).left+Ir(e).scrollLeft}function Ad(e){var t=kt(e),n=Zt(e),o=t.visualViewport,r=n.clientWidth,a=n.clientHeight,i=0,s=0;return o&&(r=o.width,a=o.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=o.offsetLeft,s=o.offsetTop)),{width:r,height:a,x:i+Nr(e),y:s}}function Td(e){var t,n=Zt(e),o=Ir(e),r=(t=e.ownerDocument)==null?void 0:t.body,a=un(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),i=un(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-o.scrollLeft+Nr(e),l=-o.scrollTop;return Bt(r||n).direction==="rtl"&&(s+=un(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:i,x:s,y:l}}function zr(e){var t=Bt(e),n=t.overflow,o=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function Gi(e){return["html","body","#document"].indexOf(Pt(e))>=0?e.ownerDocument.body:mt(e)&&zr(e)?e:Gi(Ko(e))}function Wn(e,t){var n;t===void 0&&(t=[]);var o=Gi(e),r=o===((n=e.ownerDocument)==null?void 0:n.body),a=kt(o),i=r?[a].concat(a.visualViewport||[],zr(o)?o:[]):o,s=t.concat(i);return r?s:s.concat(Wn(Ko(i)))}function wr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ed(e){var t=$n(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Aa(e,t){return t===Ui?wr(Ad(e)):Cn(t)?Ed(t):wr(Td(Zt(e)))}function Sd(e){var t=Wn(Ko(e)),n=["absolute","fixed"].indexOf(Bt(e).position)>=0,o=n&&mt(e)?uo(e):e;return Cn(o)?t.filter(function(r){return Cn(r)&&Ji(r,o)&&Pt(r)!=="body"}):[]}function Dd(e,t,n){var o=t==="clippingParents"?Sd(e):[].concat(t),r=[].concat(o,[n]),a=r[0],i=r.reduce(function(s,l){var d=Aa(e,l);return s.top=un(d.top,s.top),s.right=Lo(d.right,s.right),s.bottom=Lo(d.bottom,s.bottom),s.left=un(d.left,s.left),s},Aa(e,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Qi(e){var t=e.reference,n=e.element,o=e.placement,r=o?St(o):null,a=o?kn(o):null,i=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(r){case tt:l={x:i,y:t.y-n.height};break;case yt:l={x:i,y:t.y+t.height};break;case bt:l={x:t.x+t.width,y:s};break;case nt:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var d=r?Hr(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(a){case _n:l[d]=l[d]-(t[u]/2-n[u]/2);break;case Zn:l[d]=l[d]+(t[u]/2-n[u]/2);break}}return l}function eo(e,t){t===void 0&&(t={});var n=t,o=n.placement,r=o===void 0?e.placement:o,a=n.boundary,i=a===void 0?Gu:a,s=n.rootBoundary,l=s===void 0?Ui:s,d=n.elementContext,u=d===void 0?Hn:d,c=n.altBoundary,f=c===void 0?!1:c,p=n.padding,g=p===void 0?0:p,y=Ki(typeof g!="number"?g:Xi(g,lo)),b=u===Hn?Qu:Hn,_=e.rects.popper,k=e.elements[f?b:u],$=Dd(Cn(k)?k:k.contextElement||Zt(e.elements.popper),i,l),m=$n(e.elements.reference),P=Qi({reference:m,element:_,strategy:"absolute",placement:r}),T=wr(Object.assign({},_,P)),j=u===Hn?T:m,F={top:$.top-j.top+y.top,bottom:j.bottom-$.bottom+y.bottom,left:$.left-j.left+y.left,right:j.right-$.right+y.right},S=e.modifiersData.offset;if(u===Hn&&S){var x=S[r];Object.keys(F).forEach(function(O){var A=[bt,yt].indexOf(O)>=0?1:-1,C=[tt,yt].indexOf(O)>=0?"y":"x";F[O]+=x[C]*A})}return F}function Pd(e,t){t===void 0&&(t={});var n=t,o=n.placement,r=n.boundary,a=n.rootBoundary,i=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?qi:l,u=kn(o),c=u?s?Ca:Ca.filter(function(g){return kn(g)===u}):lo,f=c.filter(function(g){return d.indexOf(g)>=0});f.length===0&&(f=c);var p=f.reduce(function(g,y){return g[y]=eo(e,{placement:y,boundary:r,rootBoundary:a,padding:i})[St(y)],g},{});return Object.keys(p).sort(function(g,y){return p[g]-p[y]})}function Fd(e){if(St(e)===jr)return[];var t=Do(e);return[ka(e),t,ka(t)]}function Ld(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,i=n.altAxis,s=i===void 0?!0:i,l=n.fallbackPlacements,d=n.padding,u=n.boundary,c=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,y=n.allowedAutoPlacements,b=t.options.placement,_=St(b),k=_===b,$=l||(k||!g?[Do(b)]:Fd(b)),m=[b].concat($).reduce(function(je,Ae){return je.concat(St(Ae)===jr?Pd(t,{placement:Ae,boundary:u,rootBoundary:c,padding:d,flipVariations:g,allowedAutoPlacements:y}):Ae)},[]),P=t.rects.reference,T=t.rects.popper,j=new Map,F=!0,S=m[0],x=0;x<m.length;x++){var O=m[x],A=St(O),C=kn(O)===_n,V=[tt,yt].indexOf(A)>=0,ae=V?"width":"height",ne=eo(t,{placement:O,boundary:u,rootBoundary:c,altBoundary:f,padding:d}),te=V?C?bt:nt:C?yt:tt;P[ae]>T[ae]&&(te=Do(te));var le=Do(te),me=[];if(a&&me.push(ne[A]<=0),s&&me.push(ne[te]<=0,ne[le]<=0),me.every(function(je){return je})){S=O,F=!1;break}j.set(O,me)}if(F)for(var he=g?3:1,Ve=function(Ae){var He=m.find(function(Ie){var I=j.get(Ie);if(I)return I.slice(0,Ae).every(function(W){return W})});if(He)return S=He,"break"},Ce=he;Ce>0;Ce--){var Me=Ve(Ce);if(Me==="break")break}t.placement!==S&&(t.modifiersData[o]._skip=!0,t.placement=S,t.reset=!0)}}const Md={name:"flip",enabled:!0,phase:"main",fn:Ld,requiresIfExists:["offset"],data:{_skip:!1}};function Ta(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ea(e){return[tt,bt,yt,nt].some(function(t){return e[t]>=0})}function Rd(e){var t=e.state,n=e.name,o=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,i=eo(t,{elementContext:"reference"}),s=eo(t,{altBoundary:!0}),l=Ta(i,o),d=Ta(s,r,a),u=Ea(l),c=Ea(d);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}const Vd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Rd};function jd(e,t,n){var o=St(e),r=[nt,tt].indexOf(o)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=a[0],s=a[1];return i=i||0,s=(s||0)*r,[nt,bt].indexOf(o)>=0?{x:s,y:i}:{x:i,y:s}}function Bd(e){var t=e.state,n=e.options,o=e.name,r=n.offset,a=r===void 0?[0,0]:r,i=qi.reduce(function(u,c){return u[c]=jd(c,t.rects,a),u},{}),s=i[t.placement],l=s.x,d=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[o]=i}const Hd={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Bd};function Id(e){var t=e.state,n=e.name;t.modifiersData[n]=Qi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Nd={name:"popperOffsets",enabled:!0,phase:"read",fn:Id,data:{}};function zd(e){return e==="x"?"y":"x"}function Ud(e){var t=e.state,n=e.options,o=e.name,r=n.mainAxis,a=r===void 0?!0:r,i=n.altAxis,s=i===void 0?!1:i,l=n.boundary,d=n.rootBoundary,u=n.altBoundary,c=n.padding,f=n.tether,p=f===void 0?!0:f,g=n.tetherOffset,y=g===void 0?0:g,b=eo(t,{boundary:l,rootBoundary:d,padding:c,altBoundary:u}),_=St(t.placement),k=kn(t.placement),$=!k,m=Hr(_),P=zd(m),T=t.modifiersData.popperOffsets,j=t.rects.reference,F=t.rects.popper,S=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,x=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(T){if(a){var C,V=m==="y"?tt:nt,ae=m==="y"?yt:bt,ne=m==="y"?"height":"width",te=T[m],le=te+b[V],me=te-b[ae],he=p?-F[ne]/2:0,Ve=k===_n?j[ne]:F[ne],Ce=k===_n?-F[ne]:-j[ne],Me=t.elements.arrow,je=p&&Me?Br(Me):{width:0,height:0},Ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Yi(),He=Ae[V],Ie=Ae[ae],I=qn(0,j[ne],je[ne]),W=$?j[ne]/2-he-I-He-x.mainAxis:Ve-I-He-x.mainAxis,M=$?-j[ne]/2+he+I+Ie+x.mainAxis:Ce+I+Ie+x.mainAxis,ee=t.elements.arrow&&uo(t.elements.arrow),re=ee?m==="y"?ee.clientTop||0:ee.clientLeft||0:0,$e=(C=O==null?void 0:O[m])!=null?C:0,at=te+W-$e-re,it=te+M-$e,We=qn(p?Lo(le,at):le,te,p?un(me,it):me);T[m]=We,A[m]=We-te}if(s){var U,J=m==="x"?tt:nt,Y=m==="x"?yt:bt,Z=T[P],ie=P==="y"?"height":"width",ze=Z+b[J],R=Z-b[Y],B=[tt,nt].indexOf(_)!==-1,G=(U=O==null?void 0:O[P])!=null?U:0,xe=B?ze:Z-j[ie]-F[ie]-G+x.altAxis,ue=B?Z+j[ie]+F[ie]-G-x.altAxis:R,ce=p&&B?vd(xe,Z,ue):qn(p?xe:ze,Z,p?ue:R);T[P]=ce,A[P]=ce-Z}t.modifiersData[o]=A}}const qd={name:"preventOverflow",enabled:!0,phase:"main",fn:Ud,requiresIfExists:["offset"]};function Wd(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Jd(e){return e===kt(e)||!mt(e)?Ir(e):Wd(e)}function Yd(e){var t=e.getBoundingClientRect(),n=On(t.width)/e.offsetWidth||1,o=On(t.height)/e.offsetHeight||1;return n!==1||o!==1}function Kd(e,t,n){n===void 0&&(n=!1);var o=mt(t),r=mt(t)&&Yd(t),a=Zt(t),i=$n(e,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!n)&&((Pt(t)!=="body"||zr(a))&&(s=Jd(t)),mt(t)?(l=$n(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=Nr(a))),{x:i.left+s.scrollLeft-l.x,y:i.top+s.scrollTop-l.y,width:i.width,height:i.height}}function Xd(e){var t=new Map,n=new Set,o=[];e.forEach(function(a){t.set(a.name,a)});function r(a){n.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&r(l)}}),o.push(a)}return e.forEach(function(a){n.has(a.name)||r(a)}),o}function Gd(e){var t=Xd(e);return ld.reduce(function(n,o){return n.concat(t.filter(function(r){return r.phase===o}))},[])}function Qd(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Zd(e){var t=e.reduce(function(n,o){var r=n[o.name];return n[o.name]=r?Object.assign({},r,o,{options:Object.assign({},r.options,o.options),data:Object.assign({},r.data,o.data)}):o,n},{});return Object.keys(t).map(function(n){return t[n]})}var Sa={placement:"bottom",modifiers:[],strategy:"absolute"};function Da(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function ec(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,o=n===void 0?[]:n,r=t.defaultOptions,a=r===void 0?Sa:r;return function(s,l,d){d===void 0&&(d=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Sa,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},c=[],f=!1,p={state:u,setOptions:function(_){var k=typeof _=="function"?_(u.options):_;y(),u.options=Object.assign({},a,u.options,k),u.scrollParents={reference:Cn(s)?Wn(s):s.contextElement?Wn(s.contextElement):[],popper:Wn(l)};var $=Gd(Zd([].concat(o,u.options.modifiers)));return u.orderedModifiers=$.filter(function(m){return m.enabled}),g(),p.update()},forceUpdate:function(){if(!f){var _=u.elements,k=_.reference,$=_.popper;if(Da(k,$)){u.rects={reference:Kd(k,uo($),u.options.strategy==="fixed"),popper:Br($)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(x){return u.modifiersData[x.name]=Object.assign({},x.data)});for(var m=0;m<u.orderedModifiers.length;m++){if(u.reset===!0){u.reset=!1,m=-1;continue}var P=u.orderedModifiers[m],T=P.fn,j=P.options,F=j===void 0?{}:j,S=P.name;typeof T=="function"&&(u=T({state:u,options:F,name:S,instance:p})||u)}}}},update:Qd(function(){return new Promise(function(b){p.forceUpdate(),b(u)})}),destroy:function(){y(),f=!0}};if(!Da(s,l))return p;p.setOptions(d).then(function(b){!f&&d.onFirstUpdate&&d.onFirstUpdate(b)});function g(){u.orderedModifiers.forEach(function(b){var _=b.name,k=b.options,$=k===void 0?{}:k,m=b.effect;if(typeof m=="function"){var P=m({state:u,name:_,instance:p,options:$}),T=function(){};c.push(P||T)}})}function y(){c.forEach(function(b){return b()}),c=[]}return p}}var tc=[Od,Nd,_d,cd,Hd,Md,qd,yd,Vd],nc=ec({defaultModifiers:tc});const oc={name:"Popover",inheritAttrs:!1,props:{show:{default:void 0},trigger:{type:String,default:"click"},hoverDelay:{type:Number,default:0},leaveDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array],transition:{default:null},hideOnBlur:{default:!0}},emits:["open","close","update:show"],expose:["open","close"],data(){return{popoverContainerClass:"body-container",showPopup:!1,targetWidth:null,pointerOverTargetOrPopup:!1}},watch:{show(e){e?this.open():this.close()}},created(){if(typeof window!="undefined"&&!document.getElementById("frappeui-popper-root")){const e=document.createElement("div");e.id="frappeui-popper-root",document.body.appendChild(e)}},mounted(){this.listener=e=>{const t=e.target,n=this.$refs.reference,o=this.$refs.popover;if(t===n||t===o||(n==null?void 0:n.contains(t))||(o==null?void 0:o.contains(t)))return;if(!document.getElementById("frappeui-popper-root").contains(t))return this.close();const s=`.${this.popoverContainerClass}`,l=t==null?void 0:t.closest(s),d=n==null?void 0:n.closest(s);l&&d&&l===d&&this.close()},this.hideOnBlur&&(document.addEventListener("click",this.listener),document.addEventListener("mousedown",this.listener)),this.$nextTick(()=>{this.targetWidth=this.$refs.target.clientWidth})},beforeDestroy(){this.popper&&this.popper.destroy(),document.removeEventListener("click",this.listener),document.removeEventListener("mousedown",this.listener)},computed:{showPropPassed(){return this.show!=null},isOpen:{get(){return this.showPropPassed?this.show:this.showPopup},set(e){e=!!e,this.showPropPassed?this.$emit("update:show",e):this.showPopup=e,e===!1?this.$emit("close"):e===!0&&this.$emit("open")}},popupTransition(){let e={default:{enterActiveClass:"transition duration-150 ease-out",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveActiveClass:"transition duration-150 ease-in",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"}};return typeof this.transition=="string"?e[this.transition]:this.transition}},methods:{setupPopper(){this.popper?this.updatePosition():this.popper=nc(this.$refs.reference,this.$refs.popover,{placement:this.placement})},updatePosition(){this.popper&&this.popper.update()},togglePopover(e){e instanceof Event&&(e=null),e==null&&(e=!this.isOpen),e=!!e,e?this.open():this.close()},open(){this.isOpen=!0,this.$nextTick(()=>this.setupPopper())},close(){this.isOpen=!1},onMouseover(){this.pointerOverTargetOrPopup=!0,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.trigger==="hover"&&(this.hoverDelay?this.hoverTimer=setTimeout(()=>{this.pointerOverTargetOrPopup&&this.open()},Number(this.hoverDelay)*1e3):this.open())},onMouseleave(e){this.pointerOverTargetOrPopup=!1,this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.trigger==="hover"&&(this.leaveTimer&&clearTimeout(this.leaveTimer),this.leaveDelay?this.leaveTimer=setTimeout(()=>{this.pointerOverTargetOrPopup||this.close()},Number(this.leaveDelay)*1e3):this.pointerOverTargetOrPopup||this.close())}}},rc={ref:"reference"},ac={class:"rounded-lg border border-gray-100 bg-white shadow-xl"};function ic(e,t,n,o,r,a){return v(),w("div",rc,[h("div",{ref:"target",class:de(["flex",e.$attrs.class]),onClick:t[0]||(t[0]=(...i)=>a.updatePosition&&a.updatePosition(...i)),onFocusin:t[1]||(t[1]=(...i)=>a.updatePosition&&a.updatePosition(...i)),onKeydown:t[2]||(t[2]=(...i)=>a.updatePosition&&a.updatePosition(...i)),onMouseover:t[3]||(t[3]=(...i)=>a.onMouseover&&a.onMouseover(...i)),onMouseleave:t[4]||(t[4]=(...i)=>a.onMouseleave&&a.onMouseleave(...i))},[fe(e.$slots,"target",Ct(Et({togglePopover:a.togglePopover,updatePosition:a.updatePosition,open:a.open,close:a.close,isOpen:a.isOpen})))],34),(v(),oe(zo,{to:"#frappeui-popper-root"},[h("div",{ref:"popover",class:de(["relative z-[100]",[r.popoverContainerClass,n.popoverClass]]),style:jt({minWidth:r.targetWidth?r.targetWidth+"px":null}),onMouseover:t[5]||(t[5]=i=>r.pointerOverTargetOrPopup=!0),onMouseleave:t[6]||(t[6]=(...i)=>a.onMouseleave&&a.onMouseleave(...i))},[N(Zs,Ct(Et(a.popupTransition)),{default:q(()=>[et(h("div",null,[fe(e.$slots,"body",Ct(Et({togglePopover:a.togglePopover,updatePosition:a.updatePosition,open:a.open,close:a.close,isOpen:a.isOpen})),()=>[h("div",ac,[fe(e.$slots,"body-main",Ct(Et({togglePopover:a.togglePopover,updatePosition:a.updatePosition,open:a.open,close:a.close,isOpen:a.isOpen})))])])],512),[[Xn,a.isOpen]])]),_:3},16)],38)]))],512)}const Ur=be(oc,[["render",ic]]),sc={name:"Autocomplete",props:{options:{type:Array,default:()=>[]},modelValue:{type:[String,Object,Array]},placeholder:{type:String},bodyClasses:{type:[String,Array,Object]},multiple:{type:Boolean,default:!1},hideSearch:{type:Boolean,default:!1}},emits:["update:modelValue","update:query","change"],components:{Popover:Ur,Button:Ee,FeatherIcon:Fe,Combobox:fu,ComboboxInput:vu,ComboboxOptions:mu,ComboboxOption:hu,ComboboxButton:pu},expose:["togglePopover","rootRef"],data(){return{query:"",showOptions:!1}},computed:{selectedValue:{get(){var e,t;return this.multiple?In((e=this.modelValue)==null?void 0:e[0])==="value"?(t=this.modelValue)==null?void 0:t.map(n=>this.findOption(n)):this.modelValue:this.findOption(this.modelValue)},set(e){if(this.query="",e&&!this.multiple&&(this.showOptions=!1),!this.multiple){this.$emit("update:modelValue",e);return}this.$emit("update:modelValue",e)}},groups(){var t;return!this.options||this.options.length==0?[]:((t=this.options[0])!=null&&t.group?this.options:[{group:"",items:this.sanitizeOptions(this.options)}]).map((n,o)=>({key:o,group:n.group,hideLabel:n.hideLabel||!1,items:this.filterOptions(this.sanitizeOptions(n.items))})).filter(n=>n.items.length>0)},allOptions(){return this.groups.flatMap(e=>e.items)},areAllOptionsSelected(){var e;return this.multiple?this.allOptions.length===((e=this.selectedValue)==null?void 0:e.length):!1}},watch:{query(e){this.$emit("update:query",e)},showOptions(e){e&&lt(()=>{var t,n;return(n=(t=this.$refs.searchInput)==null?void 0:t.$el)==null?void 0:n.focus()})}},methods:{rootRef(){return this.$refs.rootRef},togglePopover(e){this.showOptions=e!=null?e:!this.showOptions},findOption(e){if(!e)return e;const t=In(e)==="value"?e:e.value;return this.allOptions.find(n=>n.value===t)},filterOptions(e){return this.query?e.filter(t=>t.label.toLowerCase().includes(this.query.trim().toLowerCase())||t.value.toLowerCase().includes(this.query.trim().toLowerCase())):e},displayValue(e){return e?this.multiple?Array.isArray(e)?e.map(t=>this.getLabel(this.findOption(t))).join(", "):"":this.getLabel(this.findOption(e)):""},getLabel(e){return In(e)==="value"?e:(e==null?void 0:e.label)||(e==null?void 0:e.value)||"No label"},sanitizeOptions(e){return e?e.map(t=>In(t)==="option"?t:{label:t,value:t}):[]},isOptionSelected(e){var n,o;if(!this.selectedValue)return!1;const t=In(e)==="value"?e:e.value;return this.multiple?(o=this.selectedValue)==null?void 0:o.find(r=>r&&r.value===t):((n=this.selectedValue)==null?void 0:n.value)===t},selectAll(){this.selectedValue=this.allOptions},clearAll(){this.selectedValue=[]}}};function In(e){return typeof e=="object"?"option":"value"}const lc={class:"w-full"},uc=["onClick"],dc={class:"flex items-center overflow-hidden"},cc={key:0,class:"truncate text-base leading-5"},fc={key:1,class:"text-base leading-5 text-gray-500"},pc={key:0,class:"sticky top-0 z-10 flex items-stretch space-x-1.5 bg-white py-1.5"},vc={class:"relative w-full"},mc={key:0,class:"sticky top-10 truncate bg-white px-2.5 py-1.5 text-sm font-medium text-gray-600"},hc={class:"flex flex-1 gap-2 overflow-hidden"},gc={key:0,class:"flex-shrink-0"},yc={key:1,class:"h-4 w-4"},bc={class:"flex-1 truncate"},wc={key:0,class:"ml-2 flex-shrink-0"},xc={key:0,class:"text-sm text-gray-600"},_c={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-gray-600"},Cc={key:0,class:"border-t p-1"},Oc={key:0,class:"flex items-center justify-end"};function $c(e,t,n,o,r,a){const i=Pe("FeatherIcon"),s=Pe("ComboboxInput"),l=Pe("ComboboxOption"),d=Pe("ComboboxOptions"),u=Pe("Button"),c=Pe("Popover"),f=Pe("Combobox");return v(),oe(f,{modelValue:a.selectedValue,"onUpdate:modelValue":t[3]||(t[3]=p=>a.selectedValue=p),multiple:n.multiple,nullable:""},{default:q(({open:p})=>[N(c,{class:"w-full",show:r.showOptions,"onUpdate:show":t[2]||(t[2]=g=>r.showOptions=g),ref:"rootRef"},{target:q(({open:g,togglePopover:y})=>[fe(e.$slots,"target",Ct(Et({open:g,togglePopover:y})),()=>[h("div",lc,[h("button",{class:de(["flex h-7 w-full items-center justify-between gap-2 rounded bg-gray-100 px-2 py-1 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400",{"bg-gray-200":p}]),onClick:()=>y()},[h("div",dc,[fe(e.$slots,"prefix"),a.selectedValue?(v(),w("span",cc,z(a.displayValue(a.selectedValue)),1)):(v(),w("span",fc,z(n.placeholder||""),1))]),N(i,{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"})],10,uc)])])]),body:q(({isOpen:g,togglePopover:y})=>[et(h("div",null,[h("div",{class:de(["relative mt-1 rounded-lg bg-white text-base shadow-2xl",n.bodyClasses])},[N(d,{class:de(["max-h-[15rem] overflow-y-auto px-1.5 pb-1.5",{"pt-1.5":n.hideSearch}]),static:""},{default:q(()=>[n.hideSearch?X("",!0):(v(),w("div",pc,[h("div",vc,[N(s,{ref:"searchInput",class:"form-input w-full",type:"text",onChange:t[0]||(t[0]=b=>{r.query=b.target.value}),value:r.query,autocomplete:"off",placeholder:"Search"},null,8,["value"]),h("button",{class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center",onClick:t[1]||(t[1]=b=>a.selectedValue=null)},[N(i,{name:"x",class:"w-4"})])])])),(v(!0),w(ge,null,ke(a.groups,b=>et((v(),w("div",{key:b.key},[b.group&&!b.hideLabel?(v(),w("div",mc,z(b.group),1)):X("",!0),(v(!0),w(ge,null,ke(b.items.slice(0,50),(_,k)=>(v(),oe(l,{as:"template",key:(_==null?void 0:_.value)||k,value:_},{default:q(({active:$,selected:m})=>[h("li",{class:de(["flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base",{"bg-gray-100":$}])},[h("div",hc,[e.$slots["item-prefix"]||e.$props.multiple?(v(),w("div",gc,[fe(e.$slots,"item-prefix",Be({ref_for:!0},{active:$,selected:m,option:_}),()=>[a.isOptionSelected(_)?(v(),oe(i,{key:0,name:"check",class:"h-4 w-4 text-gray-700"})):(v(),w("div",yc))])])):X("",!0),h("span",bc,z(a.getLabel(_)),1)]),e.$slots["item-suffix"]||_!=null&&_.description?(v(),w("div",wc,[fe(e.$slots,"item-suffix",Be({ref_for:!0},{active:$,selected:m,option:_}),()=>[_!=null&&_.description?(v(),w("div",xc,z(_.description),1)):X("",!0)])])):X("",!0)],2)]),_:2},1032,["value"]))),128))])),[[Xn,b.items.length>0]])),128)),a.groups.length==0?(v(),w("li",_c," No results found ")):X("",!0)]),_:3},8,["class"]),e.$slots.footer||n.multiple?(v(),w("div",Cc,[fe(e.$slots,"footer",Ct(Et({togglePopover:y})),()=>[n.multiple?(v(),w("div",Oc,[a.areAllOptionsSelected?X("",!0):(v(),oe(u,{key:0,label:"Select All",onClick:Gn(a.selectAll,["stop"])},null,8,["onClick"])),a.areAllOptionsSelected?(v(),oe(u,{key:1,label:"Clear All",onClick:Gn(a.clearAll,["stop"])},null,8,["onClick"])):X("",!0)])):X("",!0)])])):X("",!0)],2)],512),[[Xn,g]])]),_:2},1032,["show"])]),_:3},8,["modelValue","multiple"])}const Mo=be(sc,[["render",$c]]),kc=ve({__name:"Badge",props:{theme:{default:"gray"},size:{default:"md"},variant:{default:"subtle"},label:{}},setup(e){const t=e,n=L(()=>{let o={gray:"text-text-icons-white bg-surface-gray-7",blue:"text-text-icons-blue-1 bg-surface-blue-2",green:"text-text-icons-green-1 bg-surface-green-3",orange:"text-text-icons-amber-1 bg-surface-amber-2",red:"text-text-icons-red-1 bg-surface-red-4"}[t.theme],r={gray:"text-text-icons-gray-6 bg-surface-gray-2",blue:"text-text-icons-blue-2 bg-surface-blue-1",green:"text-text-icons-green-3 bg-surface-green-2",orange:"text-text-icons-amber-3 bg-surface-amber-1",red:"text-text-icons-red-4 bg-surface-red-1"}[t.theme],a={gray:"text-text-icons-gray-6 bg-transparent border border-outline-gray-1",blue:"text-text-icons-blue-2 bg-transparent border border-outline-blue-1",green:"text-text-icons-green-3 bg-transparent border border-outline-green-2",orange:"text-text-icons-amber-3 bg-transparent border border-outline-amber-2",red:"text-text-icons-red-4 bg-transparent border border-outline-red-2"}[t.theme],i={gray:"text-text-icons-gray-6 bg-transparent",blue:"text-text-icons-blue-2 bg-transparent",green:"text-text-icons-green-3 bg-transparent",orange:"text-text-icons-amber-3 bg-transparent",red:"text-text-icons-red-4 bg-transparent"}[t.theme],s={subtle:r,solid:o,outline:a,ghost:i}[t.variant],l={sm:"h-4 text-xs px-1.5",md:"h-5 text-xs px-1.5",lg:"h-6 text-sm px-2"}[t.size];return[s,l]});return(o,r)=>(v(),w("div",{class:de(["inline-flex select-none items-center gap-1 rounded-full",n.value])},[o.$slots.prefix?(v(),w("div",{key:0,class:de([t.size=="lg"?"max-h-6":"max-h-4"])},[fe(o.$slots,"prefix")],2)):X("",!0),fe(o.$slots,"default",{},()=>{var a;return[ye(z((a=t.label)==null?void 0:a.toString()),1)]}),o.$slots.suffix?(v(),w("div",{key:1,class:de([t.size=="lg"?"max-h-6":"max-h-4"])},[fe(o.$slots,"suffix")],2)):X("",!0)],2))}});let Ac=0;function Tc(){return++Ac}function Zi(){return"frappe-ui-"+Tc()}const Ec=["disabled","id","checked"],Sc=["for"],xr=ve({__name:"Checkbox",props:{size:{default:"sm"},label:{},checked:{type:Boolean},disabled:{type:Boolean},padding:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number]},id:{}},setup(e){var i;const t=e,n=ao(),o=(i=t.id)!=null?i:Zi(),r=L(()=>[{sm:"text-base font-medium",md:"text-lg font-medium"}[t.size],t.disabled?"text-gray-500":"text-gray-800","select-none"]),a=L(()=>{let s=t.disabled?"border-gray-300 bg-gray-50 text-gray-400":"border-gray-500 text-gray-900 hover:border-gray-600 focus:ring-offset-0 focus:border-gray-900 active:border-gray-700 transition",l=t.disabled?"":t.padding?"focus:ring-0":"hover:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 active:bg-gray-100",d={sm:"w-3.5 h-3.5",md:"w-4 h-4"}[t.size];return[s,l,d]});return(s,l)=>(v(),w("div",{class:de(["inline-flex items-center space-x-2 rounded transition",{"px-2.5 py-1.5":s.padding&&s.size==="sm","px-3 py-2":s.padding&&s.size==="md","focus-within:bg-gray-100 focus-within:ring-2 focus-within:ring-gray-400 hover:bg-gray-200 active:bg-gray-300":s.padding&&!s.disabled}])},[h("input",Be({class:["rounded-sm",a.value],type:"checkbox",disabled:s.disabled,id:E(o),checked:!!s.modelValue,onChange:l[0]||(l[0]=d=>s.$emit("update:modelValue",d.target.checked))},E(n)),null,16,Ec),s.label?(v(),w("label",{key:0,class:de(["block",r.value]),for:E(o)},z(s.label),11,Sc)):X("",!0)],2))}}),Dc={class:"relative flex items-center"},Pc=["type","placeholder","disabled","id","value"],es=ve({__name:"TextInput",props:{type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,a=Pr(),i=ao(),s=D(null);t({el:s});const l=L(()=>o.disabled?"text-gray-600":"text-gray-800"),d=L(()=>{let g={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[o.size],y={sm:["py-1.5",a.prefix?"pl-8":"pl-2",a.suffix?"pr-8":"pr-2"],md:["py-1.5",a.prefix?"pl-9":"pl-2.5",a.suffix?"pr-9":"pr-2.5"],lg:["py-1.5",a.prefix?"pl-10":"pl-3",a.suffix?"pr-10":"pr-3"],xl:["py-1.5",a.prefix?"pl-10":"pl-3",a.suffix?"pr-10":"pr-3"]}[o.size],b=o.disabled?"disabled":o.variant,_={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",o.variant==="outline"?"border-gray-300":"border-transparent"]}[b];return[g,y,_,l.value,"transition-colors w-full"]});let u=L(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[o.size]),c=L(()=>({sm:"pr-2",md:"pr-2.5",lg:"pr-3",xl:"pr-3"})[o.size]),f=g=>{r("update:modelValue",g)};o.debounce&&(f=si(f,o.debounce));let p=g=>{f(g.target.value)};return(g,y)=>(v(),w("div",Dc,[g.$slots.prefix?(v(),w("div",{key:0,class:de(["absolute inset-y-0 left-0 flex items-center",l.value,E(u)])},[fe(g.$slots,"prefix")],2)):X("",!0),h("input",Be({ref_key:"inputRef",ref:s,type:g.type,placeholder:g.placeholder,class:d.value,disabled:g.disabled,id:g.id,value:g.modelValue,onInput:y[0]||(y[0]=(...b)=>E(p)&&E(p)(...b)),onChange:y[1]||(y[1]=(...b)=>E(p)&&E(p)(...b))},E(i)),null,16,Pc),g.$slots.suffix?(v(),w("div",{key:1,class:de(["absolute inset-y-0 right-0 flex items-center",l.value,E(c)])},[fe(g.$slots,"suffix")],2)):X("",!0)]))}}),Fc={name:"DateTimePicker",props:{value:{type:String},modelValue:{type:String},placeholder:{type:String},formatter:{type:Function,default:null},readonly:{type:Boolean},inputClass:{type:[String,Array,Object]}},emits:["update:modelValue","change"],components:{Popover:Ur,Input:Vt,Button:Ee,FeatherIcon:Fe,TextInput:es},data(){return{currentYear:null,currentMonth:null,hour:0,minute:0,second:0}},created(){this.selectCurrentMonthYear()},computed:{today(){return this.getDate()},datesAsWeeks(){let e=[],t=this.dates.slice();for(;t.length;){let n=t.splice(0,7);e.push(n)}return e},dates(){if(!(this.currentYear&&this.currentMonth))return[];let e=this.currentMonth-1,t=this.currentYear,n=this.getDate(t,e,1),o=this.getDate(t,e+1,0),r=n.getDay(),a=6-o.getDay(),i=this.getDatesAfter(n,-r),s=this.getDatesAfter(o,a),l=this.getDaysInMonth(e,t),d=this.getDatesAfter(n,l-1),u=[...i,n,...d,...s];if(u.length<42){const c=this.getDatesAfter(u.at(-1),42-u.length);u=u.concat(...c)}return u},formatMonth(){let e=this.getDate(this.currentYear,this.currentMonth-1,1);return`${e.toLocaleString("en-US",{month:"long"})}, ${e.getFullYear()}`},dateValue(){return this.value?this.value:this.modelValue}},methods:{changeTime(){let e=this.dateValue?this.getDate(this.dateValue):this.getDate();this.selectDate(e,!0)},selectDate(e,t=!1,n=!1){if(!t){let o=this.dateValue&&!n?this.getDate(this.dateValue):this.getDate();this.hour=o.getHours(),this.minute=o.getMinutes(),this.second=o.getSeconds()}this.$emit("change",this.toValue(e)),this.$emit("update:modelValue",this.toValue(e))},selectCurrentMonthYear(){let e=this.dateValue?this.getDate(this.dateValue):this.getDate();e==="Invalid Date"&&(e=this.getDate()),this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()+1,this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds()},prevMonth(){this.changeMonth(-1)},nextMonth(){this.changeMonth(1)},changeMonth(e){this.currentMonth=this.currentMonth+e,this.currentMonth<1&&(this.currentMonth=12,this.currentYear=this.currentYear-1),this.currentMonth>12&&(this.currentMonth=1,this.currentYear=this.currentYear+1)},getDatesAfter(e,t){let n=1;t<0&&(n=-1,t=Math.abs(t));let o=[];for(;t;)e=this.getDate(e.getFullYear(),e.getMonth(),e.getDate()+n),o.push(e),t--;return n===-1?o.reverse():o},getDaysInMonth(e,t){let o=[31,28,31,30,31,30,31,31,30,31,30,31][e];return e===1&&this.isLeapYear(t)?29:o},isLeapYear(e){return e%400===0?!0:e%100===0?!1:e%4===0},twoDigit(e){return e.toString().padStart(2,"0")},toValue(e){return e?(e.setHours(this.hour,this.minute,this.second,0),`${e.getFullYear()}-${this.twoDigit(e.getMonth()+1)}-${this.twoDigit(e.getDate())} ${this.twoDigit(e.getHours())}:${this.twoDigit(e.getMinutes())}:${this.twoDigit(e.getSeconds())}`):""},getDate(...e){return new Date(...e)},updateDate(e){e=this.getDate(e),this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.selectDate(e,!0)}}},Lc={class:"mt-2 w-fit select-none divide-y rounded-lg bg-white text-base shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},Mc={class:"flex items-center p-1 text-gray-500"},Rc={class:"flex-1 text-center text-base font-medium text-gray-700"},Vc={class:"flex items-center justify-center gap-1 p-1"},jc={class:"flex flex-col items-center justify-center p-1 text-gray-800"},Bc={class:"flex items-center text-xs uppercase"},Hc=["onClick"],Ic={class:"flex items-center justify-around gap-2 p-1"},Nc={class:"flex flex-col items-center justify-center"},zc={class:"slider flex min-h-4 items-center justify-center"},Uc={class:"slider flex min-h-4 items-center justify-center"},qc={class:"slider flex min-h-4 items-center justify-center"},Wc={class:"flex justify-end p-1"};function Jc(e,t,n,o,r,a){const i=Pe("Input"),s=Pe("FeatherIcon"),l=Pe("Button"),d=Pe("TextInput"),u=Pe("Popover");return v(),oe(u,{onOpen:a.selectCurrentMonthYear,class:"flex w-full [&>div:first-child]:w-full"},{target:q(({togglePopover:c})=>[N(i,Be({readonly:"",type:"text","icon-left":"calendar",placeholder:n.placeholder,value:a.dateValue&&n.formatter?n.formatter(a.dateValue):a.dateValue,onFocus:f=>n.readonly?null:c(),class:["w-full",n.inputClass]},e.$attrs),null,16,["placeholder","value","onFocus","class"])]),body:q(({togglePopover:c})=>[h("div",Lc,[h("div",Mc,[N(l,{variant:"ghost",class:"h-7 w-7",onClick:a.prevMonth},{default:q(()=>[N(s,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),h("div",Rc,z(a.formatMonth),1),N(l,{variant:"ghost",class:"h-7 w-7",onClick:a.nextMonth},{default:q(()=>[N(s,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),h("div",Vc,[N(d,{class:"text-sm",type:"text",value:a.dateValue,onChange:f=>a.updateDate(f.target.value)||c()},null,8,["value","onChange"]),N(l,{label:"Now",class:"text-sm",onClick:f=>a.selectDate(a.getDate(),!1,!0)||c()},null,8,["onClick"])]),h("div",jc,[h("div",Bc,[(v(),w(ge,null,ke(["su","mo","tu","we","th","fr","sa"],(f,p)=>h("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:p},z(f),1)),64))]),(v(!0),w(ge,null,ke(a.datesAsWeeks,(f,p)=>(v(),w("div",{class:"flex items-center",key:p},[(v(!0),w(ge,null,ke(f,g=>(v(),w("div",{key:a.toValue(g),class:de(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-gray-50",{"text-gray-400":g.getMonth()!==r.currentMonth-1,"font-extrabold text-gray-900":a.toValue(g)===a.toValue(a.today),"bg-gray-800 text-white hover:bg-gray-800":a.toValue(g)===a.dateValue}]),onClick:()=>{a.selectDate(g),c()}},z(g.getDate()),11,Hc))),128))]))),128))]),h("div",Ic,[h("div",null,z(a.twoDigit(r.hour))+" : "+z(a.twoDigit(r.minute))+" : "+z(a.twoDigit(r.second)),1),h("div",Nc,[h("div",zc,[N(d,{modelValue:r.hour,"onUpdate:modelValue":t[0]||(t[0]=f=>r.hour=f),name:"hours",type:"range",min:"0",max:"23",step:"1",onChange:()=>a.changeTime()||c()},null,8,["modelValue","onChange"])]),h("div",Uc,[N(d,{modelValue:r.minute,"onUpdate:modelValue":t[1]||(t[1]=f=>r.minute=f),name:"minutes",type:"range",min:"0",max:"59",step:"1",onChange:()=>a.changeTime()||c()},null,8,["modelValue","onChange"])]),h("div",qc,[N(d,{modelValue:r.second,"onUpdate:modelValue":t[2]||(t[2]=f=>r.second=f),name:"seconds",type:"range",min:"0",max:"59",step:"1",onChange:()=>a.changeTime()||c()},null,8,["modelValue","onChange"])])])]),h("div",Wc,[N(l,{label:"Clear",class:"text-sm",onClick:()=>{a.selectDate(""),c()}},null,8,["onClick"])])])]),_:1},8,["onOpen"])}const ts=be(Fc,[["render",Jc],["__scopeId","data-v-86e396b9"]]),Yc={name:"Dialog",props:{modelValue:{type:Boolean,required:!0},options:{type:Object,default(){return{}}},disableOutsideClickToClose:{type:Boolean,default:!1}},emits:["update:modelValue","close","after-leave"],components:{HDialog:Iu,DialogPanel:Nu,DialogTitle:zu,TransitionChild:Ni,TransitionRoot:zi,Button:Ee,FeatherIcon:Fe},data(){return{dialogActions:[]}},watch:{"options.actions":{handler(e){e&&(this.dialogActions=e.map(t=>{let n=D(!1);return Te(K({},t),{loading:n,onClick:t.onClick?()=>Q(this,null,function*(){n.value=!0;try{yield t.onClick(this.close)}finally{n.value=!1}}):this.close})}))},immediate:!0}},methods:{close(){this.open=!1}},computed:{open:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e),e||this.$emit("close")}},icon(){var t;if(!((t=this.options)!=null&&t.icon))return null;let e=this.options.icon;return typeof e=="string"&&(e={name:e}),e},dialogPositionClasses(){var t;let e=((t=this.options)==null?void 0:t.position)||"center";return{"justify-center":e==="center","pt-[20vh]":e==="top"}}}},Kc=["data-dialog"],Xc={class:"bg-white px-4 pb-6 pt-5 sm:px-6"},Gc={class:"flex"},Qc={class:"w-full flex-1"},Zc={class:"mb-6 flex items-center justify-between"},ef={class:"flex items-center space-x-2"},tf={class:"text-2xl font-semibold leading-6 text-gray-900"},nf={key:0,class:"text-p-base text-gray-700"},of={key:0,class:"px-4 pb-7 pt-4 sm:px-6"},rf={class:"space-y-2"};function af(e,t,n,o,r,a){const i=Pe("TransitionChild"),s=Pe("FeatherIcon"),l=Pe("DialogTitle"),d=Pe("Button"),u=Pe("DialogPanel"),c=Pe("HDialog"),f=Pe("TransitionRoot");return v(),oe(f,{as:"template",show:a.open,onAfterLeave:t[1]||(t[1]=p=>e.$emit("after-leave"))},{default:q(()=>[N(c,{as:"div",class:"fixed inset-0 z-10 overflow-y-auto",onClose:t[0]||(t[0]=p=>!n.disableOutsideClickToClose&&a.close())},{default:q(()=>[h("div",{class:de(["flex min-h-screen flex-col items-center px-4 py-4 text-center",a.dialogPositionClasses])},[N(i,{as:"template",enter:"ease-out duration-150","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-150","leave-from":"opacity-100","leave-to":"opacity-0"},{default:q(()=>[h("div",{class:"fixed inset-0 bg-black-overlay-200 transition-opacity","data-dialog":n.options.title},null,8,Kc)]),_:1}),N(i,{as:"template",enter:"ease-out duration-150","enter-from":"opacity-50 translate-y-2 scale-95","enter-to":"opacity-100 translate-y-0 scale-100",leave:"ease-in duration-150","leave-from":"opacity-100 translate-y-0 scale-100","leave-to":"opacity-50 translate-y-4 translate-y-4 scale-95"},{default:q(()=>[N(u,{class:de(["my-8 inline-block w-full transform overflow-hidden rounded-xl bg-white text-left align-middle shadow-xl transition-all",{"max-w-7xl":n.options.size==="7xl","max-w-6xl":n.options.size==="6xl","max-w-5xl":n.options.size==="5xl","max-w-4xl":n.options.size==="4xl","max-w-3xl":n.options.size==="3xl","max-w-2xl":n.options.size==="2xl","max-w-xl":n.options.size==="xl","max-w-lg":n.options.size==="lg"||!n.options.size,"max-w-md":n.options.size==="md","max-w-sm":n.options.size==="sm","max-w-xs":n.options.size==="xs"}])},{default:q(()=>[fe(e.$slots,"body",{},()=>[fe(e.$slots,"body-main",{},()=>[h("div",Xc,[h("div",Gc,[h("div",Qc,[h("div",Zc,[h("div",ef,[a.icon?(v(),w("div",{key:0,class:de(["flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full",{"bg-gray-100":!a.icon.appearance,"bg-yellow-100":a.icon.appearance==="warning","bg-blue-100":a.icon.appearance==="info","bg-red-100":a.icon.appearance==="danger","bg-green-100":a.icon.appearance==="success"}])},[N(s,{name:a.icon.name,class:de(["h-4 w-4",{"text-gray-600":!a.icon.appearance,"text-yellow-600":a.icon.appearance==="warning","text-blue-600":a.icon.appearance==="info","text-red-600":a.icon.appearance==="danger","text-green-600":a.icon.appearance==="success"}]),"aria-hidden":"true"},null,8,["name","class"])],2)):X("",!0),N(l,{as:"header"},{default:q(()=>[fe(e.$slots,"body-title",{},()=>[h("h3",tf,z(n.options.title||"Untitled"),1)])]),_:3})]),N(d,{variant:"ghost",onClick:a.close},{icon:q(()=>t[2]||(t[2]=[h("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.8567 3.85355C13.052 3.65829 13.052 3.34171 12.8567 3.14645C12.6615 2.95118 12.3449 2.95118 12.1496 3.14645L8.00201 7.29405L3.85441 3.14645C3.65914 2.95118 3.34256 2.95118 3.1473 3.14645C2.95204 3.34171 2.95204 3.65829 3.1473 3.85355L7.29491 8.00116L3.14645 12.1496C2.95118 12.3449 2.95118 12.6615 3.14645 12.8567C3.34171 13.052 3.65829 13.052 3.85355 12.8567L8.00201 8.70827L12.1505 12.8567C12.3457 13.052 12.6623 13.052 12.8576 12.8567C13.0528 12.6615 13.0528 12.3449 12.8576 12.1496L8.70912 8.00116L12.8567 3.85355Z",fill:"#383838"})],-1)])),_:1},8,["onClick"])]),fe(e.$slots,"body-content",{},()=>[n.options.message?(v(),w("p",nf,z(n.options.message),1)):X("",!0)])])])])]),r.dialogActions.length||e.$slots.actions?(v(),w("div",of,[fe(e.$slots,"actions",Ct(Et({close:a.close})),()=>[h("div",rf,[(v(!0),w(ge,null,ke(r.dialogActions,p=>(v(),oe(d,Be({class:"w-full",key:p.label,ref_for:!0},p),{default:q(()=>[ye(z(p.label),1)]),_:2},1040))),128))])])])):X("",!0)])]),_:3},8,["class"])]),_:3})],2)]),_:3})]),_:3},8,["show"])}const Ro=be(Yc,[["render",af]]),sf={name:"ErrorMessage",props:["message"],computed:{errorMessage(){return this.message?this.message instanceof Error?this.message.messages||this.message.message:this.message:""}}},lf=["innerHTML"];function uf(e,t,n,o,r,a){return n.message?(v(),w("div",{key:0,class:"whitespace-pre-line text-sm text-red-600",role:"alert",innerHTML:a.errorMessage},null,8,lf)):X("",!0)}const qr=be(sf,[["render",uf]]),df={class:"relative flex items-center"},cf=["disabled","id","value"],ff=["value","disabled","selected"],ns=ve({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t;Pr();const r=ao();function a(f){o("update:modelValue",f.target.value)}const i=L(()=>{var f;return((f=n.options)==null?void 0:f.map(p=>typeof p=="string"?{label:p,value:p}:p).filter(Boolean))||[]}),s=L(()=>n.disabled?"text-gray-500":"text-gray-800"),l=L(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[n.size]),d=L(()=>({sm:"px-2",md:"px-2.5",lg:"px-3",xl:"px-3"})[n.size]),u=L(()=>{let f={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[n.size],p=n.disabled?"disabled":n.variant,g={subtle:"border border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white hover:border-gray-400 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",ghost:"bg-transparent border-transparent hover:bg-gray-200 focus:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border",n.variant!=="ghost"?"bg-gray-50":"",n.variant==="outline"?"border-gray-300":"border-transparent"]}[p];return[f,l.value,d.value,g,s.value,"transition-colors w-full py-0"]});let c=L(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[n.size]);return(f,p)=>(v(),w("div",df,[f.$slots.prefix?(v(),w("div",{key:0,class:de(["absolute inset-y-0 left-0 flex items-center",s.value,E(c)])},[fe(f.$slots,"prefix")],2)):X("",!0),f.placeholder?et((v(),w("div",{key:1,class:de(["pointer-events-none absolute text-gray-500",[l.value,d.value]])},z(f.placeholder),3)),[[Xn,!f.modelValue]]):X("",!0),h("select",Be({class:u.value,disabled:f.disabled,id:f.id,value:f.modelValue,onChange:a},E(r)),[(v(!0),w(ge,null,ke(i.value,g=>(v(),w("option",{key:g.value,value:g.value,disabled:g.disabled||!1,selected:f.modelValue===g.value},z(g.label),9,ff))),128))],16,cf)]))}}),pf={class:"space-y-1.5"},vf=["for"],mf=["placeholder","disabled","id","value","rows"],hf=ve({__name:"Textarea",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},rows:{default:3},label:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,a=ao(),i=D(null),s=L(()=>{let c={sm:"text-base rounded",md:"text-base rounded",lg:"text-lg rounded-md",xl:"text-xl rounded-md"}[o.size],f={sm:["py-1.5 px-2"],md:["py-1.5 px-2.5"],lg:["py-1.5 px-3"],xl:["py-1.5 px-3"]}[o.size],p=o.disabled?"disabled":o.variant,g={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",o.variant==="outline"?"border-gray-300":"border-transparent"]}[p];return[c,f,g,o.disabled?"text-gray-600":"text-gray-800","transition-colors w-full block"]}),l=L(()=>[{sm:"text-xs",md:"text-base",lg:"text-lg",xl:"text-xl"}[o.size],"text-gray-600"]);let d=c=>{r("update:modelValue",c)};o.debounce&&(d=si(d,o.debounce));let u=c=>{d(c.target.value)};return t({el:i}),(c,f)=>(v(),w("div",pf,[c.label?(v(),w("label",{key:0,class:de(["block",l.value]),for:c.id},z(c.label),11,vf)):X("",!0),h("textarea",Be({ref_key:"textareaRef",ref:i,placeholder:c.placeholder,class:s.value,disabled:c.disabled,id:c.id,value:c.modelValue,rows:c.rows,onInput:f[0]||(f[0]=(...p)=>E(u)&&E(u)(...p)),onChange:f[1]||(f[1]=(...p)=>E(u)&&E(u)(...p))},E(a)),null,16,mf)]))}}),gf=["for"],yf={key:0,class:"text-red-500"},bf={inheritAttrs:!1},$o=ve(Te(K({},bf),{__name:"FormControl",props:{label:{},description:{},type:{default:"text"},size:{default:"sm"},required:{type:Boolean}},setup(e){const t=Zi(),n=e,o=ao(),r=L(()=>{let s={};for(let l in o)l!=="class"&&l!=="style"&&(s[l]=o[l]);return s}),a=L(()=>[{sm:"text-xs",md:"text-base"}[n.size],"text-gray-600"]),i=L(()=>[{sm:"text-xs",md:"text-base"}[n.size],"text-gray-600"]);return(s,l)=>s.type!="checkbox"?(v(),w("div",{key:0,class:de(["space-y-1.5",E(o).class])},[s.label?(v(),w("label",{key:0,class:de(["block",a.value]),for:E(t)},[ye(z(s.label)+" ",1),s.required?(v(),w("span",yf,"*")):X("",!0)],10,gf)):X("",!0),s.type==="select"?(v(),oe(ns,Be({key:1,id:E(t)},Te(K({},r.value),{size:s.size})),ar({_:2},[s.$slots.prefix?{name:"prefix",fn:q(()=>[fe(s.$slots,"prefix")]),key:"0"}:void 0]),1040,["id"])):s.type==="autocomplete"?(v(),oe(Mo,Ct(Be({key:2},K({},r.value))),ar({_:2},[s.$slots.prefix?{name:"prefix",fn:q(()=>[fe(s.$slots,"prefix")]),key:"0"}:void 0,s.$slots["item-prefix"]?{name:"item-prefix",fn:q(d=>[fe(s.$slots,"item-prefix",Ct(Et(d)))]),key:"1"}:void 0]),1040)):s.type==="textarea"?(v(),oe(hf,Be({key:3,id:E(t)},Te(K({},r.value),{size:s.size})),null,16,["id"])):(v(),oe(es,Be({key:4,id:E(t)},Te(K({},r.value),{type:s.type,size:s.size})),ar({_:2},[s.$slots.prefix?{name:"prefix",fn:q(()=>[fe(s.$slots,"prefix")]),key:"0"}:void 0,s.$slots.suffix?{name:"suffix",fn:q(()=>[fe(s.$slots,"suffix")]),key:"1"}:void 0]),1040,["id"])),fe(s.$slots,"description",{},()=>[s.description?(v(),w("p",{key:0,class:de(i.value)},z(s.description),3)):X("",!0)])],2)):(v(),oe(xr,Be({key:1,id:E(t)},Te(K({},r.value),{label:s.label,size:s.size,class:E(o).class})),null,16,["id"]))}}));var ot="top",wt="bottom",xt="right",rt="left",Wr="auto",co=[ot,wt,xt,rt],An="start",to="end",wf="clippingParents",os="viewport",Nn="popper",xf="reference",Pa=co.reduce(function(e,t){return e.concat([t+"-"+An,t+"-"+to])},[]),rs=[].concat(co,[Wr]).reduce(function(e,t){return e.concat([t,t+"-"+An,t+"-"+to])},[]),_f="beforeRead",Cf="read",Of="afterRead",$f="beforeMain",kf="main",Af="afterMain",Tf="beforeWrite",Ef="write",Sf="afterWrite",Df=[_f,Cf,Of,$f,kf,Af,Tf,Ef,Sf];function Ft(e){return e?(e.nodeName||"").toLowerCase():null}function ft(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fn(e){var t=ft(e).Element;return e instanceof t||e instanceof Element}function ht(e){var t=ft(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Jr(e){if(typeof ShadowRoot=="undefined")return!1;var t=ft(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Pf(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var o=t.styles[n]||{},r=t.attributes[n]||{},a=t.elements[n];!ht(a)||!Ft(a)||(Object.assign(a.style,o),Object.keys(r).forEach(function(i){var s=r[i];s===!1?a.removeAttribute(i):a.setAttribute(i,s===!0?"":s)}))})}function Ff(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(o){var r=t.elements[o],a=t.attributes[o]||{},i=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:n[o]),s=i.reduce(function(l,d){return l[d]="",l},{});!ht(r)||!Ft(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}}const as={name:"applyStyles",enabled:!0,phase:"write",fn:Pf,effect:Ff,requires:["computeStyles"]};function Dt(e){return e.split("-")[0]}var dn=Math.max,Vo=Math.min,Tn=Math.round;function _r(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function is(){return!/^((?!chrome|android).)*safari/i.test(_r())}function En(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var o=e.getBoundingClientRect(),r=1,a=1;t&&ht(e)&&(r=e.offsetWidth>0&&Tn(o.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Tn(o.height)/e.offsetHeight||1);var i=fn(e)?ft(e):window,s=i.visualViewport,l=!is()&&n,d=(o.left+(l&&s?s.offsetLeft:0))/r,u=(o.top+(l&&s?s.offsetTop:0))/a,c=o.width/r,f=o.height/a;return{width:c,height:f,top:u,right:d+c,bottom:u+f,left:d,x:d,y:u}}function Yr(e){var t=En(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function ss(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Jr(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Ht(e){return ft(e).getComputedStyle(e)}function Lf(e){return["table","td","th"].indexOf(Ft(e))>=0}function en(e){return((fn(e)?e.ownerDocument:e.document)||window.document).documentElement}function Xo(e){return Ft(e)==="html"?e:e.assignedSlot||e.parentNode||(Jr(e)?e.host:null)||en(e)}function Fa(e){return!ht(e)||Ht(e).position==="fixed"?null:e.offsetParent}function Mf(e){var t=/firefox/i.test(_r()),n=/Trident/i.test(_r());if(n&&ht(e)){var o=Ht(e);if(o.position==="fixed")return null}var r=Xo(e);for(Jr(r)&&(r=r.host);ht(r)&&["html","body"].indexOf(Ft(r))<0;){var a=Ht(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function fo(e){for(var t=ft(e),n=Fa(e);n&&Lf(n)&&Ht(n).position==="static";)n=Fa(n);return n&&(Ft(n)==="html"||Ft(n)==="body"&&Ht(n).position==="static")?t:n||Mf(e)||t}function Kr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Jn(e,t,n){return dn(e,Vo(t,n))}function Rf(e,t,n){var o=Jn(e,t,n);return o>n?n:o}function ls(){return{top:0,right:0,bottom:0,left:0}}function us(e){return Object.assign({},ls(),e)}function ds(e,t){return t.reduce(function(n,o){return n[o]=e,n},{})}var Vf=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,us(typeof t!="number"?t:ds(t,co))};function jf(e){var t,n=e.state,o=e.name,r=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,s=Dt(n.placement),l=Kr(s),d=[rt,xt].indexOf(s)>=0,u=d?"height":"width";if(!(!a||!i)){var c=Vf(r.padding,n),f=Yr(a),p=l==="y"?ot:rt,g=l==="y"?wt:xt,y=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],b=i[l]-n.rects.reference[l],_=fo(a),k=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,$=y/2-b/2,m=c[p],P=k-f[u]-c[g],T=k/2-f[u]/2+$,j=Jn(m,T,P),F=l;n.modifiersData[o]=(t={},t[F]=j,t.centerOffset=j-T,t)}}function Bf(e){var t=e.state,n=e.options,o=n.element,r=o===void 0?"[data-popper-arrow]":o;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||ss(t.elements.popper,r)&&(t.elements.arrow=r))}const Hf={name:"arrow",enabled:!0,phase:"main",fn:jf,effect:Bf,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sn(e){return e.split("-")[1]}var If={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Nf(e,t){var n=e.x,o=e.y,r=t.devicePixelRatio||1;return{x:Tn(n*r)/r||0,y:Tn(o*r)/r||0}}function La(e){var t,n=e.popper,o=e.popperRect,r=e.placement,a=e.variation,i=e.offsets,s=e.position,l=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,c=e.isFixed,f=i.x,p=f===void 0?0:f,g=i.y,y=g===void 0?0:g,b=typeof u=="function"?u({x:p,y}):{x:p,y};p=b.x,y=b.y;var _=i.hasOwnProperty("x"),k=i.hasOwnProperty("y"),$=rt,m=ot,P=window;if(d){var T=fo(n),j="clientHeight",F="clientWidth";if(T===ft(n)&&(T=en(n),Ht(T).position!=="static"&&s==="absolute"&&(j="scrollHeight",F="scrollWidth")),T=T,r===ot||(r===rt||r===xt)&&a===to){m=wt;var S=c&&T===P&&P.visualViewport?P.visualViewport.height:T[j];y-=S-o.height,y*=l?1:-1}if(r===rt||(r===ot||r===wt)&&a===to){$=xt;var x=c&&T===P&&P.visualViewport?P.visualViewport.width:T[F];p-=x-o.width,p*=l?1:-1}}var O=Object.assign({position:s},d&&If),A=u===!0?Nf({x:p,y},ft(n)):{x:p,y};if(p=A.x,y=A.y,l){var C;return Object.assign({},O,(C={},C[m]=k?"0":"",C[$]=_?"0":"",C.transform=(P.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",C))}return Object.assign({},O,(t={},t[m]=k?y+"px":"",t[$]=_?p+"px":"",t.transform="",t))}function zf(e){var t=e.state,n=e.options,o=n.gpuAcceleration,r=o===void 0?!0:o,a=n.adaptive,i=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,d={placement:Dt(t.placement),variation:Sn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,La(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,La(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Uf={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zf,data:{}};var ko={passive:!0};function qf(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,a=r===void 0?!0:r,i=o.resize,s=i===void 0?!0:i,l=ft(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&d.forEach(function(u){u.addEventListener("scroll",n.update,ko)}),s&&l.addEventListener("resize",n.update,ko),function(){a&&d.forEach(function(u){u.removeEventListener("scroll",n.update,ko)}),s&&l.removeEventListener("resize",n.update,ko)}}const Wf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qf,data:{}};var Jf={left:"right",right:"left",bottom:"top",top:"bottom"};function Po(e){return e.replace(/left|right|bottom|top/g,function(t){return Jf[t]})}var Yf={start:"end",end:"start"};function Ma(e){return e.replace(/start|end/g,function(t){return Yf[t]})}function Xr(e){var t=ft(e),n=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:n,scrollTop:o}}function Gr(e){return En(en(e)).left+Xr(e).scrollLeft}function Kf(e,t){var n=ft(e),o=en(e),r=n.visualViewport,a=o.clientWidth,i=o.clientHeight,s=0,l=0;if(r){a=r.width,i=r.height;var d=is();(d||!d&&t==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:a,height:i,x:s+Gr(e),y:l}}function Xf(e){var t,n=en(e),o=Xr(e),r=(t=e.ownerDocument)==null?void 0:t.body,a=dn(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),i=dn(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-o.scrollLeft+Gr(e),l=-o.scrollTop;return Ht(r||n).direction==="rtl"&&(s+=dn(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:i,x:s,y:l}}function Qr(e){var t=Ht(e),n=t.overflow,o=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function cs(e){return["html","body","#document"].indexOf(Ft(e))>=0?e.ownerDocument.body:ht(e)&&Qr(e)?e:cs(Xo(e))}function Yn(e,t){var n;t===void 0&&(t=[]);var o=cs(e),r=o===((n=e.ownerDocument)==null?void 0:n.body),a=ft(o),i=r?[a].concat(a.visualViewport||[],Qr(o)?o:[]):o,s=t.concat(i);return r?s:s.concat(Yn(Xo(i)))}function Cr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Gf(e,t){var n=En(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Ra(e,t,n){return t===os?Cr(Kf(e,n)):fn(t)?Gf(t,n):Cr(Xf(en(e)))}function Qf(e){var t=Yn(Xo(e)),n=["absolute","fixed"].indexOf(Ht(e).position)>=0,o=n&&ht(e)?fo(e):e;return fn(o)?t.filter(function(r){return fn(r)&&ss(r,o)&&Ft(r)!=="body"}):[]}function Zf(e,t,n,o){var r=t==="clippingParents"?Qf(e):[].concat(t),a=[].concat(r,[n]),i=a[0],s=a.reduce(function(l,d){var u=Ra(e,d,o);return l.top=dn(u.top,l.top),l.right=Vo(u.right,l.right),l.bottom=Vo(u.bottom,l.bottom),l.left=dn(u.left,l.left),l},Ra(e,i,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function fs(e){var t=e.reference,n=e.element,o=e.placement,r=o?Dt(o):null,a=o?Sn(o):null,i=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(r){case ot:l={x:i,y:t.y-n.height};break;case wt:l={x:i,y:t.y+t.height};break;case xt:l={x:t.x+t.width,y:s};break;case rt:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var d=r?Kr(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(a){case An:l[d]=l[d]-(t[u]/2-n[u]/2);break;case to:l[d]=l[d]+(t[u]/2-n[u]/2);break}}return l}function no(e,t){t===void 0&&(t={});var n=t,o=n.placement,r=o===void 0?e.placement:o,a=n.strategy,i=a===void 0?e.strategy:a,s=n.boundary,l=s===void 0?wf:s,d=n.rootBoundary,u=d===void 0?os:d,c=n.elementContext,f=c===void 0?Nn:c,p=n.altBoundary,g=p===void 0?!1:p,y=n.padding,b=y===void 0?0:y,_=us(typeof b!="number"?b:ds(b,co)),k=f===Nn?xf:Nn,$=e.rects.popper,m=e.elements[g?k:f],P=Zf(fn(m)?m:m.contextElement||en(e.elements.popper),l,u,i),T=En(e.elements.reference),j=fs({reference:T,element:$,strategy:"absolute",placement:r}),F=Cr(Object.assign({},$,j)),S=f===Nn?F:T,x={top:P.top-S.top+_.top,bottom:S.bottom-P.bottom+_.bottom,left:P.left-S.left+_.left,right:S.right-P.right+_.right},O=e.modifiersData.offset;if(f===Nn&&O){var A=O[r];Object.keys(x).forEach(function(C){var V=[xt,wt].indexOf(C)>=0?1:-1,ae=[ot,wt].indexOf(C)>=0?"y":"x";x[C]+=A[ae]*V})}return x}function ep(e,t){t===void 0&&(t={});var n=t,o=n.placement,r=n.boundary,a=n.rootBoundary,i=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?rs:l,u=Sn(o),c=u?s?Pa:Pa.filter(function(g){return Sn(g)===u}):co,f=c.filter(function(g){return d.indexOf(g)>=0});f.length===0&&(f=c);var p=f.reduce(function(g,y){return g[y]=no(e,{placement:y,boundary:r,rootBoundary:a,padding:i})[Dt(y)],g},{});return Object.keys(p).sort(function(g,y){return p[g]-p[y]})}function tp(e){if(Dt(e)===Wr)return[];var t=Po(e);return[Ma(e),t,Ma(t)]}function np(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var r=n.mainAxis,a=r===void 0?!0:r,i=n.altAxis,s=i===void 0?!0:i,l=n.fallbackPlacements,d=n.padding,u=n.boundary,c=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,y=n.allowedAutoPlacements,b=t.options.placement,_=Dt(b),k=_===b,$=l||(k||!g?[Po(b)]:tp(b)),m=[b].concat($).reduce(function(je,Ae){return je.concat(Dt(Ae)===Wr?ep(t,{placement:Ae,boundary:u,rootBoundary:c,padding:d,flipVariations:g,allowedAutoPlacements:y}):Ae)},[]),P=t.rects.reference,T=t.rects.popper,j=new Map,F=!0,S=m[0],x=0;x<m.length;x++){var O=m[x],A=Dt(O),C=Sn(O)===An,V=[ot,wt].indexOf(A)>=0,ae=V?"width":"height",ne=no(t,{placement:O,boundary:u,rootBoundary:c,altBoundary:f,padding:d}),te=V?C?xt:rt:C?wt:ot;P[ae]>T[ae]&&(te=Po(te));var le=Po(te),me=[];if(a&&me.push(ne[A]<=0),s&&me.push(ne[te]<=0,ne[le]<=0),me.every(function(je){return je})){S=O,F=!1;break}j.set(O,me)}if(F)for(var he=g?3:1,Ve=function(Ae){var He=m.find(function(Ie){var I=j.get(Ie);if(I)return I.slice(0,Ae).every(function(W){return W})});if(He)return S=He,"break"},Ce=he;Ce>0;Ce--){var Me=Ve(Ce);if(Me==="break")break}t.placement!==S&&(t.modifiersData[o]._skip=!0,t.placement=S,t.reset=!0)}}const op={name:"flip",enabled:!0,phase:"main",fn:np,requiresIfExists:["offset"],data:{_skip:!1}};function Va(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ja(e){return[ot,xt,wt,rt].some(function(t){return e[t]>=0})}function rp(e){var t=e.state,n=e.name,o=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,i=no(t,{elementContext:"reference"}),s=no(t,{altBoundary:!0}),l=Va(i,o),d=Va(s,r,a),u=ja(l),c=ja(d);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}const ap={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rp};function ip(e,t,n){var o=Dt(e),r=[rt,ot].indexOf(o)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=a[0],s=a[1];return i=i||0,s=(s||0)*r,[rt,xt].indexOf(o)>=0?{x:s,y:i}:{x:i,y:s}}function sp(e){var t=e.state,n=e.options,o=e.name,r=n.offset,a=r===void 0?[0,0]:r,i=rs.reduce(function(u,c){return u[c]=ip(c,t.rects,a),u},{}),s=i[t.placement],l=s.x,d=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[o]=i}const lp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sp};function up(e){var t=e.state,n=e.name;t.modifiersData[n]=fs({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const dp={name:"popperOffsets",enabled:!0,phase:"read",fn:up,data:{}};function cp(e){return e==="x"?"y":"x"}function fp(e){var t=e.state,n=e.options,o=e.name,r=n.mainAxis,a=r===void 0?!0:r,i=n.altAxis,s=i===void 0?!1:i,l=n.boundary,d=n.rootBoundary,u=n.altBoundary,c=n.padding,f=n.tether,p=f===void 0?!0:f,g=n.tetherOffset,y=g===void 0?0:g,b=no(t,{boundary:l,rootBoundary:d,padding:c,altBoundary:u}),_=Dt(t.placement),k=Sn(t.placement),$=!k,m=Kr(_),P=cp(m),T=t.modifiersData.popperOffsets,j=t.rects.reference,F=t.rects.popper,S=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,x=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(T){if(a){var C,V=m==="y"?ot:rt,ae=m==="y"?wt:xt,ne=m==="y"?"height":"width",te=T[m],le=te+b[V],me=te-b[ae],he=p?-F[ne]/2:0,Ve=k===An?j[ne]:F[ne],Ce=k===An?-F[ne]:-j[ne],Me=t.elements.arrow,je=p&&Me?Yr(Me):{width:0,height:0},Ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ls(),He=Ae[V],Ie=Ae[ae],I=Jn(0,j[ne],je[ne]),W=$?j[ne]/2-he-I-He-x.mainAxis:Ve-I-He-x.mainAxis,M=$?-j[ne]/2+he+I+Ie+x.mainAxis:Ce+I+Ie+x.mainAxis,ee=t.elements.arrow&&fo(t.elements.arrow),re=ee?m==="y"?ee.clientTop||0:ee.clientLeft||0:0,$e=(C=O==null?void 0:O[m])!=null?C:0,at=te+W-$e-re,it=te+M-$e,We=Jn(p?Vo(le,at):le,te,p?dn(me,it):me);T[m]=We,A[m]=We-te}if(s){var U,J=m==="x"?ot:rt,Y=m==="x"?wt:xt,Z=T[P],ie=P==="y"?"height":"width",ze=Z+b[J],R=Z-b[Y],B=[ot,rt].indexOf(_)!==-1,G=(U=O==null?void 0:O[P])!=null?U:0,xe=B?ze:Z-j[ie]-F[ie]-G+x.altAxis,ue=B?Z+j[ie]+F[ie]-G-x.altAxis:R,ce=p&&B?Rf(xe,Z,ue):Jn(p?xe:ze,Z,p?ue:R);T[P]=ce,A[P]=ce-Z}t.modifiersData[o]=A}}const pp={name:"preventOverflow",enabled:!0,phase:"main",fn:fp,requiresIfExists:["offset"]};function vp(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function mp(e){return e===ft(e)||!ht(e)?Xr(e):vp(e)}function hp(e){var t=e.getBoundingClientRect(),n=Tn(t.width)/e.offsetWidth||1,o=Tn(t.height)/e.offsetHeight||1;return n!==1||o!==1}function gp(e,t,n){n===void 0&&(n=!1);var o=ht(t),r=ht(t)&&hp(t),a=en(t),i=En(e,r,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!n)&&((Ft(t)!=="body"||Qr(a))&&(s=mp(t)),ht(t)?(l=En(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=Gr(a))),{x:i.left+s.scrollLeft-l.x,y:i.top+s.scrollTop-l.y,width:i.width,height:i.height}}function yp(e){var t=new Map,n=new Set,o=[];e.forEach(function(a){t.set(a.name,a)});function r(a){n.add(a.name);var i=[].concat(a.requires||[],a.requiresIfExists||[]);i.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&r(l)}}),o.push(a)}return e.forEach(function(a){n.has(a.name)||r(a)}),o}function bp(e){var t=yp(e);return Df.reduce(function(n,o){return n.concat(t.filter(function(r){return r.phase===o}))},[])}function wp(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function xp(e){var t=e.reduce(function(n,o){var r=n[o.name];return n[o.name]=r?Object.assign({},r,o,{options:Object.assign({},r.options,o.options),data:Object.assign({},r.data,o.data)}):o,n},{});return Object.keys(t).map(function(n){return t[n]})}var Ba={placement:"bottom",modifiers:[],strategy:"absolute"};function Ha(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function _p(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,o=n===void 0?[]:n,r=t.defaultOptions,a=r===void 0?Ba:r;return function(s,l,d){d===void 0&&(d=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ba,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},c=[],f=!1,p={state:u,setOptions:function(_){var k=typeof _=="function"?_(u.options):_;y(),u.options=Object.assign({},a,u.options,k),u.scrollParents={reference:fn(s)?Yn(s):s.contextElement?Yn(s.contextElement):[],popper:Yn(l)};var $=bp(xp([].concat(o,u.options.modifiers)));return u.orderedModifiers=$.filter(function(m){return m.enabled}),g(),p.update()},forceUpdate:function(){if(!f){var _=u.elements,k=_.reference,$=_.popper;if(Ha(k,$)){u.rects={reference:gp(k,fo($),u.options.strategy==="fixed"),popper:Yr($)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(x){return u.modifiersData[x.name]=Object.assign({},x.data)});for(var m=0;m<u.orderedModifiers.length;m++){if(u.reset===!0){u.reset=!1,m=-1;continue}var P=u.orderedModifiers[m],T=P.fn,j=P.options,F=j===void 0?{}:j,S=P.name;typeof T=="function"&&(u=T({state:u,options:F,name:S,instance:p})||u)}}}},update:wp(function(){return new Promise(function(b){p.forceUpdate(),b(u)})}),destroy:function(){y(),f=!0}};if(!Ha(s,l))return p;p.setOptions(d).then(function(b){!f&&d.onFirstUpdate&&d.onFirstUpdate(b)});function g(){u.orderedModifiers.forEach(function(b){var _=b.name,k=b.options,$=k===void 0?{}:k,m=b.effect;if(typeof m=="function"){var P=m({state:u,name:_,instance:p,options:$}),T=function(){};c.push(P||T)}})}function y(){c.forEach(function(b){return b()}),c=[]}return p}}var Cp=[Wf,dp,Uf,as,lp,op,pp,Hf,ap],Op=_p({defaultModifiers:Cp}),$p="tippy-box",ps="tippy-content",kp="tippy-backdrop",vs="tippy-arrow",ms="tippy-svg-arrow",rn={passive:!0,capture:!0},hs=function(){return document.body};function ur(e,t,n){if(Array.isArray(e)){var o=e[t];return o==null?Array.isArray(n)?n[t]:n:o}return e}function Zr(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function gs(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Ia(e,t){if(t===0)return e;var n;return function(o){clearTimeout(n),n=setTimeout(function(){e(o)},t)}}function Ap(e){return e.split(/\s+/).filter(Boolean)}function bn(e){return[].concat(e)}function Na(e,t){e.indexOf(t)===-1&&e.push(t)}function Tp(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function Ep(e){return e.split("-")[0]}function jo(e){return[].slice.call(e)}function za(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Kn(){return document.createElement("div")}function Go(e){return["Element","Fragment"].some(function(t){return Zr(e,t)})}function Sp(e){return Zr(e,"NodeList")}function Dp(e){return Zr(e,"MouseEvent")}function Pp(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Fp(e){return Go(e)?[e]:Sp(e)?jo(e):Array.isArray(e)?e:jo(document.querySelectorAll(e))}function dr(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Ua(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function Lp(e){var t,n=bn(e),o=n[0];return o!=null&&(t=o.ownerDocument)!=null&&t.body?o.ownerDocument:document}function Mp(e,t){var n=t.clientX,o=t.clientY;return e.every(function(r){var a=r.popperRect,i=r.popperState,s=r.props,l=s.interactiveBorder,d=Ep(i.placement),u=i.modifiersData.offset;if(!u)return!0;var c=d==="bottom"?u.top.y:0,f=d==="top"?u.bottom.y:0,p=d==="right"?u.left.x:0,g=d==="left"?u.right.x:0,y=a.top-o+c>l,b=o-a.bottom-f>l,_=a.left-n+p>l,k=n-a.right-g>l;return y||b||_||k})}function cr(e,t,n){var o=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){e[o](r,n)})}function qa(e,t){for(var n=t;n;){var o;if(e.contains(n))return!0;n=n.getRootNode==null||(o=n.getRootNode())==null?void 0:o.host}return!1}var At={isTouch:!1},Wa=0;function Rp(){At.isTouch||(At.isTouch=!0,window.performance&&document.addEventListener("mousemove",ys))}function ys(){var e=performance.now();e-Wa<20&&(At.isTouch=!1,document.removeEventListener("mousemove",ys)),Wa=e}function Vp(){var e=document.activeElement;if(Pp(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function jp(){document.addEventListener("touchstart",Rp,rn),window.addEventListener("blur",Vp)}var Bp=typeof window!="undefined"&&typeof document!="undefined",Hp=Bp?!!window.msCrypto:!1,Ip={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Np={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ot=Object.assign({appendTo:hs,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ip,Np),zp=Object.keys(Ot),Up=function(t){var n=Object.keys(t);n.forEach(function(o){Ot[o]=t[o]})};function bs(e){var t=e.plugins||[],n=t.reduce(function(o,r){var a=r.name,i=r.defaultValue;if(a){var s;o[a]=e[a]!==void 0?e[a]:(s=Ot[a])!=null?s:i}return o},{});return Object.assign({},e,n)}function qp(e,t){var n=t?Object.keys(bs(Object.assign({},Ot,{plugins:t}))):zp,o=n.reduce(function(r,a){var i=(e.getAttribute("data-tippy-"+a)||"").trim();if(!i)return r;if(a==="content")r[a]=i;else try{r[a]=JSON.parse(i)}catch(s){r[a]=i}return r},{});return o}function Ja(e,t){var n=Object.assign({},t,{content:gs(t.content,[e])},t.ignoreAttributes?{}:qp(e,t.plugins));return n.aria=Object.assign({},Ot.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var Wp=function(){return"innerHTML"};function Or(e,t){e[Wp()]=t}function Ya(e){var t=Kn();return e===!0?t.className=vs:(t.className=ms,Go(e)?t.appendChild(e):Or(t,e)),t}function Ka(e,t){Go(t.content)?(Or(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Or(e,t.content):e.textContent=t.content)}function $r(e){var t=e.firstElementChild,n=jo(t.children);return{box:t,content:n.find(function(o){return o.classList.contains(ps)}),arrow:n.find(function(o){return o.classList.contains(vs)||o.classList.contains(ms)}),backdrop:n.find(function(o){return o.classList.contains(kp)})}}function ws(e){var t=Kn(),n=Kn();n.className=$p,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var o=Kn();o.className=ps,o.setAttribute("data-state","hidden"),Ka(o,e.props),t.appendChild(n),n.appendChild(o),r(e.props,e.props);function r(a,i){var s=$r(t),l=s.box,d=s.content,u=s.arrow;i.theme?l.setAttribute("data-theme",i.theme):l.removeAttribute("data-theme"),typeof i.animation=="string"?l.setAttribute("data-animation",i.animation):l.removeAttribute("data-animation"),i.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof i.maxWidth=="number"?i.maxWidth+"px":i.maxWidth,i.role?l.setAttribute("role",i.role):l.removeAttribute("role"),(a.content!==i.content||a.allowHTML!==i.allowHTML)&&Ka(d,e.props),i.arrow?u?a.arrow!==i.arrow&&(l.removeChild(u),l.appendChild(Ya(i.arrow))):l.appendChild(Ya(i.arrow)):u&&l.removeChild(u)}return{popper:t,onUpdate:r}}ws.$$tippy=!0;var Jp=1,Ao=[],fr=[];function Yp(e,t){var n=Ja(e,Object.assign({},Ot,bs(za(t)))),o,r,a,i=!1,s=!1,l=!1,d=!1,u,c,f,p=[],g=Ia(at,n.interactiveDebounce),y,b=Jp++,_=null,k=Tp(n.plugins),$={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},m={id:b,reference:e,popper:Kn(),popperInstance:_,props:n,state:$,plugins:k,clearDelayTimeouts:xe,setProps:ue,setContent:ce,show:Ke,hide:Ut,hideWithInteractivity:Vn,enable:B,disable:G,unmount:Js,destroy:Ys};if(!n.render)return m;var P=n.render(m),T=P.popper,j=P.onUpdate;T.setAttribute("data-tippy-root",""),T.id="tippy-"+m.id,m.popper=T,e._tippy=m,T._tippy=m;var F=k.map(function(H){return H.fn(m)}),S=e.hasAttribute("aria-expanded");return ee(),he(),te(),le("onCreate",[m]),n.showOnCreate&&ze(),T.addEventListener("mouseenter",function(){m.props.interactive&&m.state.isVisible&&m.clearDelayTimeouts()}),T.addEventListener("mouseleave",function(){m.props.interactive&&m.props.trigger.indexOf("mouseenter")>=0&&V().addEventListener("mousemove",g)}),m;function x(){var H=m.props.touch;return Array.isArray(H)?H:[H,0]}function O(){return x()[0]==="hold"}function A(){var H;return!!((H=m.props.render)!=null&&H.$$tippy)}function C(){return y||e}function V(){var H=C().parentNode;return H?Lp(H):document}function ae(){return $r(T)}function ne(H){return m.state.isMounted&&!m.state.isVisible||At.isTouch||u&&u.type==="focus"?0:ur(m.props.delay,H?0:1,Ot.delay)}function te(H){H===void 0&&(H=!1),T.style.pointerEvents=m.props.interactive&&!H?"":"none",T.style.zIndex=""+m.props.zIndex}function le(H,se,pe){if(pe===void 0&&(pe=!0),F.forEach(function(Oe){Oe[H]&&Oe[H].apply(Oe,se)}),pe){var De;(De=m.props)[H].apply(De,se)}}function me(){var H=m.props.aria;if(H.content){var se="aria-"+H.content,pe=T.id,De=bn(m.props.triggerTarget||e);De.forEach(function(Oe){var Xe=Oe.getAttribute(se);if(m.state.isVisible)Oe.setAttribute(se,Xe?Xe+" "+pe:pe);else{var vt=Xe&&Xe.replace(pe,"").trim();vt?Oe.setAttribute(se,vt):Oe.removeAttribute(se)}})}}function he(){if(!(S||!m.props.aria.expanded)){var H=bn(m.props.triggerTarget||e);H.forEach(function(se){m.props.interactive?se.setAttribute("aria-expanded",m.state.isVisible&&se===C()?"true":"false"):se.removeAttribute("aria-expanded")})}}function Ve(){V().removeEventListener("mousemove",g),Ao=Ao.filter(function(H){return H!==g})}function Ce(H){if(!(At.isTouch&&(l||H.type==="mousedown"))){var se=H.composedPath&&H.composedPath()[0]||H.target;if(!(m.props.interactive&&qa(T,se))){if(bn(m.props.triggerTarget||e).some(function(pe){return qa(pe,se)})){if(At.isTouch||m.state.isVisible&&m.props.trigger.indexOf("click")>=0)return}else le("onClickOutside",[m,H]);m.props.hideOnClick===!0&&(m.clearDelayTimeouts(),m.hide(),s=!0,setTimeout(function(){s=!1}),m.state.isMounted||He())}}}function Me(){l=!0}function je(){l=!1}function Ae(){var H=V();H.addEventListener("mousedown",Ce,!0),H.addEventListener("touchend",Ce,rn),H.addEventListener("touchstart",je,rn),H.addEventListener("touchmove",Me,rn)}function He(){var H=V();H.removeEventListener("mousedown",Ce,!0),H.removeEventListener("touchend",Ce,rn),H.removeEventListener("touchstart",je,rn),H.removeEventListener("touchmove",Me,rn)}function Ie(H,se){W(H,function(){!m.state.isVisible&&T.parentNode&&T.parentNode.contains(T)&&se()})}function I(H,se){W(H,se)}function W(H,se){var pe=ae().box;function De(Oe){Oe.target===pe&&(cr(pe,"remove",De),se())}if(H===0)return se();cr(pe,"remove",c),cr(pe,"add",De),c=De}function M(H,se,pe){pe===void 0&&(pe=!1);var De=bn(m.props.triggerTarget||e);De.forEach(function(Oe){Oe.addEventListener(H,se,pe),p.push({node:Oe,eventType:H,handler:se,options:pe})})}function ee(){O()&&(M("touchstart",$e,{passive:!0}),M("touchend",it,{passive:!0})),Ap(m.props.trigger).forEach(function(H){if(H!=="manual")switch(M(H,$e),H){case"mouseenter":M("mouseleave",it);break;case"focus":M(Hp?"focusout":"blur",We);break;case"focusin":M("focusout",We);break}})}function re(){p.forEach(function(H){var se=H.node,pe=H.eventType,De=H.handler,Oe=H.options;se.removeEventListener(pe,De,Oe)}),p=[]}function $e(H){var se,pe=!1;if(!(!m.state.isEnabled||U(H)||s)){var De=((se=u)==null?void 0:se.type)==="focus";u=H,y=H.currentTarget,he(),!m.state.isVisible&&Dp(H)&&Ao.forEach(function(Oe){return Oe(H)}),H.type==="click"&&(m.props.trigger.indexOf("mouseenter")<0||i)&&m.props.hideOnClick!==!1&&m.state.isVisible?pe=!0:ze(H),H.type==="click"&&(i=!pe),pe&&!De&&R(H)}}function at(H){var se=H.target,pe=C().contains(se)||T.contains(se);if(!(H.type==="mousemove"&&pe)){var De=ie().concat(T).map(function(Oe){var Xe,vt=Oe._tippy,hn=(Xe=vt.popperInstance)==null?void 0:Xe.state;return hn?{popperRect:Oe.getBoundingClientRect(),popperState:hn,props:n}:null}).filter(Boolean);Mp(De,H)&&(Ve(),R(H))}}function it(H){var se=U(H)||m.props.trigger.indexOf("click")>=0&&i;if(!se){if(m.props.interactive){m.hideWithInteractivity(H);return}R(H)}}function We(H){m.props.trigger.indexOf("focusin")<0&&H.target!==C()||m.props.interactive&&H.relatedTarget&&T.contains(H.relatedTarget)||R(H)}function U(H){return At.isTouch?O()!==H.type.indexOf("touch")>=0:!1}function J(){Y();var H=m.props,se=H.popperOptions,pe=H.placement,De=H.offset,Oe=H.getReferenceClientRect,Xe=H.moveTransition,vt=A()?$r(T).arrow:null,hn=Oe?{getBoundingClientRect:Oe,contextElement:Oe.contextElement||C()}:e,ca={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(mo){var gn=mo.state;if(A()){var Ks=ae(),rr=Ks.box;["placement","reference-hidden","escaped"].forEach(function(ho){ho==="placement"?rr.setAttribute("data-placement",gn.placement):gn.attributes.popper["data-popper-"+ho]?rr.setAttribute("data-"+ho,""):rr.removeAttribute("data-"+ho)}),gn.attributes.popper={}}}},tn=[{name:"offset",options:{offset:De}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Xe}},ca];A()&&vt&&tn.push({name:"arrow",options:{element:vt,padding:3}}),tn.push.apply(tn,(se==null?void 0:se.modifiers)||[]),m.popperInstance=Op(hn,T,Object.assign({},se,{placement:pe,onFirstUpdate:f,modifiers:tn}))}function Y(){m.popperInstance&&(m.popperInstance.destroy(),m.popperInstance=null)}function Z(){var H=m.props.appendTo,se,pe=C();m.props.interactive&&H===hs||H==="parent"?se=pe.parentNode:se=gs(H,[pe]),se.contains(T)||se.appendChild(T),m.state.isMounted=!0,J()}function ie(){return jo(T.querySelectorAll("[data-tippy-root]"))}function ze(H){m.clearDelayTimeouts(),H&&le("onTrigger",[m,H]),Ae();var se=ne(!0),pe=x(),De=pe[0],Oe=pe[1];At.isTouch&&De==="hold"&&Oe&&(se=Oe),se?o=setTimeout(function(){m.show()},se):m.show()}function R(H){if(m.clearDelayTimeouts(),le("onUntrigger",[m,H]),!m.state.isVisible){He();return}if(!(m.props.trigger.indexOf("mouseenter")>=0&&m.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(H.type)>=0&&i)){var se=ne(!1);se?r=setTimeout(function(){m.state.isVisible&&m.hide()},se):a=requestAnimationFrame(function(){m.hide()})}}function B(){m.state.isEnabled=!0}function G(){m.hide(),m.state.isEnabled=!1}function xe(){clearTimeout(o),clearTimeout(r),cancelAnimationFrame(a)}function ue(H){if(!m.state.isDestroyed){le("onBeforeUpdate",[m,H]),re();var se=m.props,pe=Ja(e,Object.assign({},se,za(H),{ignoreAttributes:!0}));m.props=pe,ee(),se.interactiveDebounce!==pe.interactiveDebounce&&(Ve(),g=Ia(at,pe.interactiveDebounce)),se.triggerTarget&&!pe.triggerTarget?bn(se.triggerTarget).forEach(function(De){De.removeAttribute("aria-expanded")}):pe.triggerTarget&&e.removeAttribute("aria-expanded"),he(),te(),j&&j(se,pe),m.popperInstance&&(J(),ie().forEach(function(De){requestAnimationFrame(De._tippy.popperInstance.forceUpdate)})),le("onAfterUpdate",[m,H])}}function ce(H){m.setProps({content:H})}function Ke(){var H=m.state.isVisible,se=m.state.isDestroyed,pe=!m.state.isEnabled,De=At.isTouch&&!m.props.touch,Oe=ur(m.props.duration,0,Ot.duration);if(!(H||se||pe||De)&&!C().hasAttribute("disabled")&&(le("onShow",[m],!1),m.props.onShow(m)!==!1)){if(m.state.isVisible=!0,A()&&(T.style.visibility="visible"),te(),Ae(),m.state.isMounted||(T.style.transition="none"),A()){var Xe=ae(),vt=Xe.box,hn=Xe.content;dr([vt,hn],0)}f=function(){var tn;if(!(!m.state.isVisible||d)){if(d=!0,T.offsetHeight,T.style.transition=m.props.moveTransition,A()&&m.props.animation){var or=ae(),mo=or.box,gn=or.content;dr([mo,gn],Oe),Ua([mo,gn],"visible")}me(),he(),Na(fr,m),(tn=m.popperInstance)==null||tn.forceUpdate(),le("onMount",[m]),m.props.animation&&A()&&I(Oe,function(){m.state.isShown=!0,le("onShown",[m])})}},Z()}}function Ut(){var H=!m.state.isVisible,se=m.state.isDestroyed,pe=!m.state.isEnabled,De=ur(m.props.duration,1,Ot.duration);if(!(H||se||pe)&&(le("onHide",[m],!1),m.props.onHide(m)!==!1)){if(m.state.isVisible=!1,m.state.isShown=!1,d=!1,i=!1,A()&&(T.style.visibility="hidden"),Ve(),He(),te(!0),A()){var Oe=ae(),Xe=Oe.box,vt=Oe.content;m.props.animation&&(dr([Xe,vt],De),Ua([Xe,vt],"hidden"))}me(),he(),m.props.animation?A()&&Ie(De,m.unmount):m.unmount()}}function Vn(H){V().addEventListener("mousemove",g),Na(Ao,g),g(H)}function Js(){m.state.isVisible&&m.hide(),m.state.isMounted&&(Y(),ie().forEach(function(H){H._tippy.unmount()}),T.parentNode&&T.parentNode.removeChild(T),fr=fr.filter(function(H){return H!==m}),m.state.isMounted=!1,le("onHidden",[m]))}function Ys(){m.state.isDestroyed||(m.clearDelayTimeouts(),m.unmount(),re(),delete e._tippy,m.state.isDestroyed=!0,le("onDestroy",[m]))}}function vn(e,t){t===void 0&&(t={});var n=Ot.plugins.concat(t.plugins||[]);jp();var o=Object.assign({},t,{plugins:n}),r=Fp(e),a=r.reduce(function(i,s){var l=s&&Yp(s,o);return l&&i.push(l),i},[]);return Go(e)?a[0]:a}vn.defaultProps=Ot;vn.setDefaultProps=Up;vn.currentInput=At;Object.assign({},as,{effect:function(t){var n=t.state,o={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,o.popper),n.styles=o,n.elements.arrow&&Object.assign(n.elements.arrow.style,o.arrow)}});vn.setDefaultProps({render:ws});class Kp{constructor({editor:t,element:n,view:o,tippyOptions:r={},updateDelay:a=250,shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:s,state:l,from:d,to:u})=>{const{doc:c,selection:f}=l,{empty:p}=f,g=!c.textBetween(d,u).length&&el(l.selection),y=this.element.contains(document.activeElement);return!(!(s.hasFocus()||y)||p||g||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var l;if(this.preventHide){this.preventHide=!1;return}s!=null&&s.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(s.relatedTarget))||this.hide()},this.tippyBlurHandler=s=>{this.blurHandler({event:s})},this.handleDebouncedUpdate=(s,l)=>{const d=!(l!=null&&l.selection.eq(s.state.selection)),u=!(l!=null&&l.doc.eq(s.state.doc));!d&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(s,d,u,l)},this.updateDelay))},this.updateHandler=(s,l,d,u)=>{var c,f,p;const{state:g,composing:y}=s,{selection:b}=g;if(y||!l&&!d)return;this.createTooltip();const{ranges:k}=b,$=Math.min(...k.map(T=>T.$from.pos)),m=Math.max(...k.map(T=>T.$to.pos));if(!((c=this.shouldShow)===null||c===void 0?void 0:c.call(this,{editor:this.editor,view:s,state:g,oldState:u,from:$,to:m}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((p=this.tippyOptions)===null||p===void 0?void 0:p.getReferenceClientRect)||(()=>{if(tl(g.selection)){let T=s.nodeDOM($);const j=T.dataset.nodeViewWrapper?T:T.querySelector("[data-node-view-wrapper]");if(j&&(T=j.firstChild),T)return T.getBoundingClientRect()}return ci(s,$,m)})}),this.show()},this.editor=t,this.element=n,this.view=o,this.updateDelay=a,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=vn(t,K({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){const{state:o}=t,r=o.selection.$from.pos!==o.selection.$to.pos;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,n);return}const a=!(n!=null&&n.selection.eq(t.state.selection)),i=!(n!=null&&n.doc.eq(t.state.doc));this.updateHandler(t,a,i,n)}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const xs=e=>new li({key:typeof e.pluginKey=="string"?new ui(e.pluginKey):e.pluginKey,view:t=>new Kp(K({view:t},e))});di.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[xs({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class Xp{constructor({editor:t,element:n,view:o,tippyOptions:r={},shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:i,state:s})=>{const{selection:l}=s,{$anchor:d,empty:u}=l,c=d.depth===1,f=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent;return!(!i.hasFocus()||!u||!c||!f||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:i})=>{var s;if(this.preventHide){this.preventHide=!1;return}i!=null&&i.relatedTarget&&(!((s=this.element.parentNode)===null||s===void 0)&&s.contains(i.relatedTarget))||this.hide()},this.tippyBlurHandler=i=>{this.blurHandler({event:i})},this.editor=t,this.element=n,this.view=o,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=vn(t,K({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){var o,r,a;const{state:i}=t,{doc:s,selection:l}=i,{from:d,to:u}=l;if(n&&n.doc.eq(s)&&n.selection.eq(l))return;if(this.createTooltip(),!((o=this.shouldShow)===null||o===void 0?void 0:o.call(this,{editor:this.editor,view:t,state:i,oldState:n}))){this.hide();return}(r=this.tippy)===null||r===void 0||r.setProps({getReferenceClientRect:((a=this.tippyOptions)===null||a===void 0?void 0:a.getReferenceClientRect)||(()=>ci(t,d,u))}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const _s=e=>new li({key:typeof e.pluginKey=="string"?new ui(e.pluginKey):e.pluginKey,view:t=>new Xp(K({view:t},e))});di.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[_s({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const Gp=ve({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=D(null);return Se(()=>{const{updateDelay:o,editor:r,pluginKey:a,shouldShow:i,tippyOptions:s}=e;r.registerPlugin(xs({updateDelay:o,editor:r,element:n.value,pluginKey:a,shouldShow:i,tippyOptions:s}))}),qo(()=>{const{pluginKey:o,editor:r}=e;r.unregisterPlugin(o)}),()=>{var o;return Re("div",{ref:n},(o=t.default)===null||o===void 0?void 0:o.call(t))}}});function Xa(e){return pi((t,n)=>({get(){return t(),e},set(o){e=o,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Qp extends nl{constructor(t={}){return super(t),this.vueRenderers=Uo(new Map),this.contentComponent=null,this.reactiveState=Xa(this.view.state),this.reactiveExtensionStorage=Xa(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),fi(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,n){super.registerPlugin(t,n),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const Zp=ve({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=D(),n=Pn();return Le(()=>{const o=e.editor;o&&o.options.element&&t.value&&lt(()=>{if(!t.value||!o.options.element.firstChild)return;const r=E(t.value);t.value.append(...o.options.element.childNodes),o.contentComponent=n.ctx._,o.setOptions({element:r}),o.createNodeViews()})}),qo(()=>{const o=e.editor;if(!o||(o.isDestroyed||o.view.setProps({nodeViews:{}}),o.contentComponent=null,!o.options.element.firstChild))return;const r=document.createElement("div");r.append(...o.options.element.childNodes),o.setOptions({element:r})}),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const n=Re(zo,{to:t.teleportElement,key:t.id},Re(t.component,K({ref:t.id},t.props)));e.push(n)}),Re("div",{ref:t=>{this.rootEl=t}},...e)}}),ev=ve({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=D(null);return Se(()=>{const{pluginKey:o,editor:r,tippyOptions:a,shouldShow:i}=e;r.registerPlugin(_s({pluginKey:o,editor:r,element:n.value,tippyOptions:a,shouldShow:i}))}),qo(()=>{const{pluginKey:o,editor:r}=e;r.unregisterPlugin(o)}),()=>{var o;return Re("div",{ref:n},(o=t.default)===null||o===void 0?void 0:o.call(t))}}});class tv{constructor(t,{props:n={},editor:o}){if(this.id=Math.floor(Math.random()*4294967295).toString(),this.editor=o,this.component=fi(t),this.teleportElement=document.createElement("div"),this.element=this.teleportElement,this.props=Uo(n),this.editor.vueRenderers.set(this.id,this),this.editor.contentComponent){if(this.editor.contentComponent.update(),this.teleportElement.children.length!==1)throw Error("VueRenderer doesn’t support multiple child elements.");this.element=this.teleportElement.firstElementChild}}get ref(){var t;return(t=this.editor.contentComponent)===null||t===void 0?void 0:t.refs[this.id]}updateProps(t={}){Object.entries(t).forEach(([n,o])=>{this.props[n]=o})}destroy(){this.editor.vueRenderers.delete(this.id)}}const nv={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0}},methods:{onKeyDown({event:e}){return e.key==="ArrowUp"?(this.upHandler(),!0):e.key==="ArrowDown"?(this.downHandler(),!0):e.key==="Enter"?(this.enterHandler(),!0):!1},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(){this.selectItem(this.selectedIndex)},selectItem(e){const t=this.items[e];t&&this.command({id:t.value,label:t.label})}}},ov={key:0,class:"min-w-40 rounded-lg border bg-white p-1 text-base shadow-lg"},rv=["onClick","onMouseover"];function av(e,t,n,o,r,a){return v(),w("div",null,[n.items.length?(v(),w("div",ov,[(v(!0),w(ge,null,ke(n.items,(i,s)=>(v(),w("button",{class:de([s===r.selectedIndex?"bg-gray-100":"text-gray-900","flex w-full items-center whitespace-nowrap rounded-md px-2 py-2 text-sm"]),key:s,onClick:l=>a.selectItem(s),onMouseover:l=>r.selectedIndex=s},z(i.label),43,rv))),128))])):X("",!0)])}const iv=be(nv,[["render",av]]);function sv(e){return ol.configure({HTMLAttributes:{class:"mention"},suggestion:lv(e)})}function lv(e){return{items:({query:t})=>e.filter(n=>n.label.toLowerCase().startsWith(t.toLowerCase())).slice(0,10),render:()=>{let t,n;return{onStart:o=>{t=new tv(iv,{props:o,editor:o.editor}),o.clientRect&&(n=vn("body",{getReferenceClientRect:o.clientRect,appendTo:()=>document.body,content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(o){t.updateProps(o),o.clientRect&&n[0].setProps({getReferenceClientRect:o.clientRect})},onKeyDown(o){var r;return o.event.key==="Escape"?(n[0].hide(),!0):(r=t.ref)==null?void 0:r.onKeyDown(o)},onExit(){n[0].destroy(),t.destroy()}}}}}const uv={name:"TipTapMenu",props:["buttons"],inject:["editor"],components:{Popover:Ur},methods:{onButtonClick(e){e.action(this.editor)}}},dv={class:"inline-flex bg-white px-1 py-1"},cv={class:"inline-flex items-center gap-1"},fv={key:0,class:"h-4 w-[2px] border-l"},pv={key:1,class:"shrink-0"},vv=["onClick","set"],mv={key:1},hv={class:"rounded border bg-white p-1 shadow-md"},gv={class:"w-full"},yv=["onClick"],bv=["onClick","title"],wv={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function xv(e,t,n,o,r,a){const i=Pe("Popover");return v(),w("div",dv,[h("div",cv,[(v(!0),w(ge,null,ke(n.buttons,s=>(v(),w(ge,{key:s.label},[s.type==="separator"?(v(),w("div",fv)):s.map?(v(),w("div",pv,[N(i,null,{target:q(({togglePopover:l})=>[h("button",{class:"rounded px-2 py-1 text-base font-medium text-gray-800 transition-colors hover:bg-gray-100",onClick:l,set:e.activeBtn=s.find(d=>d.isActive(a.editor))||s[0]},[e.activeBtn.icon?(v(),oe(wn(e.activeBtn.icon),{key:0,class:"h-4 w-4"})):(v(),w("span",mv,z(e.activeBtn.label),1))],8,vv)]),body:q(({close:l})=>[h("ul",hv,[(v(!0),w(ge,null,ke(s,d=>et((v(),w("li",gv,[h("button",{class:"w-full rounded px-2 py-1 text-left text-base hover:bg-gray-50",onClick:()=>{a.onButtonClick(d),l()}},z(d.label),9,yv)],512)),[[Xn,d.isDisabled?!d.isDisabled(a.editor):!0]])),256))])]),_:2},1024)])):(v(),oe(wn(s.component||"div"),Be({key:2,ref_for:!0},{editor:a.editor}),{default:q(l=>[h("button",{class:de(["flex rounded p-1 text-gray-800 transition-colors",s.isActive(a.editor)||l!=null&&l.isActive?"bg-gray-100":"hover:bg-gray-100"]),onClick:d=>l!=null&&l.onClick?l.onClick(s):a.onButtonClick(s),title:s.label},[s.icon?(v(),oe(wn(s.icon),{key:0,class:"h-4 w-4"})):(v(),w("span",wv,z(s.text),1))],10,bv)]),_:2},1040))],64))),128))])])}const Cs=be(uv,[["render",xv]]),_v={},Cv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ov(e,t){return v(),w("svg",Cv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z",fill:"currentColor"},null,-1)]))}const $v=be(_v,[["render",Ov]]),kv={},Av={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Tv(e,t){return v(),w("svg",Av,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z",fill:"currentColor"},null,-1)]))}const Ev=be(kv,[["render",Tv]]),Sv={},Dv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Pv(e,t){return v(),w("svg",Dv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)]))}const Fv=be(Sv,[["render",Pv]]),Lv={},Mv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Rv(e,t){return v(),w("svg",Mv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm9-12v8h1.5v2H22v2h-2v-2h-5.5v-1.34l5-8.66H22zm-2 3.133L17.19 16H20v-4.867z",fill:"currentColor"},null,-1)]))}const Vv=be(Lv,[["render",Rv]]),jv={},Bv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Hv(e,t){return v(),w("svg",Bv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M22 8v2h-4.323l-.464 2.636c.33-.089.678-.136 1.037-.136 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.827 0-3.367-1.224-3.846-2.897l1.923-.551c.24.836 1.01 1.448 1.923 1.448 1.105 0 2-.895 2-2s-.895-2-2-2c-.63 0-1.193.292-1.56.748l-1.81-.904L16 8h6zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)]))}const Iv=be(jv,[["render",Hv]]),Nv={},zv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Uv(e,t){return v(),w("svg",zv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M21.097 8l-2.598 4.5c2.21 0 4.001 1.79 4.001 4s-1.79 4-4 4-4-1.79-4-4c0-.736.199-1.426.546-2.019L18.788 8h2.309zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 10.5c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2z",fill:"currentColor"},null,-1)]))}const qv=be(Nv,[["render",Uv]]),Wv={},Jv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Yv(e,t){return v(),w("svg",Jv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M13 6v15h-2V6H5V4h14v2z",fill:"currentColor"},null,-1)]))}const Kv=be(Wv,[["render",Yv]]),Xv={},Gv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Qv(e,t){return v(),w("svg",Gv,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z",fill:"currentColor"},null,-1)]))}const Zv=be(Xv,[["render",Qv]]),em={},tm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function nm(e,t){return v(),w("svg",tm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z",fill:"currentColor"},null,-1)]))}const om=be(em,[["render",nm]]),rm={},am={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function im(e,t){return v(),w("svg",am,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z",fill:"currentColor"},null,-1)]))}const sm=be(rm,[["render",im]]),lm={},um={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function dm(e,t){return v(),w("svg",um,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z",fill:"currentColor"},null,-1)]))}const cm=be(lm,[["render",dm]]),fm={},pm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function vm(e,t){return v(),w("svg",pm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z",fill:"currentColor"},null,-1)]))}const mm=be(fm,[["render",vm]]),hm={},gm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function ym(e,t){return v(),w("svg",gm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z",fill:"currentColor"},null,-1)]))}const bm=be(hm,[["render",ym]]),wm={},xm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function _m(e,t){return v(),w("svg",xm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M15.246 14H8.754l-1.6 4H5l6-15h2l6 15h-2.154l-1.6-4zm-.8-2L12 5.885 9.554 12h4.892zM3 20h18v2H3v-2z",fill:"currentColor"},null,-1)]))}const Cm=be(wm,[["render",_m]]),Om={},$m={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function km(e,t){return v(),w("svg",$m,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)]))}const Am=be(Om,[["render",km]]),Tm={},Em={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Sm(e,t){return v(),w("svg",Em,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)]))}const Dm=be(Tm,[["render",Sm]]),Pm={},Fm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Lm(e,t){return v(),w("svg",Fm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M19.417 6.679C20.447 7.773 21 9 21 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311-1.804-.167-3.226-1.648-3.226-3.489a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179zm-10 0C10.447 7.773 11 9 11 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311C4.591 12.322 3.17 10.841 3.17 9a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179z",fill:"currentColor"},null,-1)]))}const Mm=be(Pm,[["render",Lm]]),Rm={},Vm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function jm(e,t){return v(),w("svg",Vm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M16.95 8.464l1.414-1.414 4.95 4.95-4.95 4.95-1.414-1.414L20.485 12 16.95 8.464zm-9.9 0L3.515 12l3.535 3.536-1.414 1.414L.686 12l4.95-4.95L7.05 8.464z",fill:"currentColor"},null,-1)]))}const Bm=be(Rm,[["render",jm]]),Hm={},Im={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Nm(e,t){return v(),w("svg",Im,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z",fill:"currentColor"},null,-1)]))}const zm=be(Hm,[["render",Nm]]),Um={},qm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Wm(e,t){return v(),w("svg",qm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z",fill:"currentColor"},null,-1)]))}const Jm=be(Um,[["render",Wm]]),Ym={},Km={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Xm(e,t){return v(),w("svg",Km,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),h("path",{d:"M16 4c.552 0 1 .448 1 1v4.2l5.213-3.65c.226-.158.538-.103.697.124.058.084.09.184.09.286v12.08c0 .276-.224.5-.5.5-.103 0-.203-.032-.287-.09L17 14.8V19c0 .552-.448 1-1 1H2c-.552 0-1-.448-1-1V5c0-.552.448-1 1-1h14zm-1 2H3v12h12V6zM8 8h2v3h3v2H9.999L10 16H8l-.001-3H5v-2h3V8zm13 .841l-4 2.8v.718l4 2.8V8.84z",fill:"currentColor"},null,-1)]))}const Gm=be(Ym,[["render",Xm]]),Qm={},Zm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function eh(e,t){return v(),w("svg",Zm,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M5.828 7l2.536 2.536L6.95 10.95 2 6l4.95-4.95 1.414 1.414L5.828 5H13a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H5.828z",fill:"currentColor"},null,-1)]))}const th=be(Qm,[["render",eh]]),nh={},oh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function rh(e,t){return v(),w("svg",oh,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M18.172 7H11a6 6 0 1 0 0 12h9v2h-9a8 8 0 1 1 0-16h7.172l-2.536-2.536L17.05 1.05 22 6l-4.95 4.95-1.414-1.414L18.172 7z",fill:"currentColor"},null,-1)]))}const ah=be(nh,[["render",rh]]),ih={},sh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function lh(e,t){return v(),w("svg",sh,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M2 11h2v2H2v-2zm4 0h12v2H6v-2zm14 0h2v2h-2v-2z",fill:"currentColor"},null,-1)]))}const uh=be(ih,[["render",lh]]),dh={},ch={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function fh(e,t){return v(),w("svg",ch,t[0]||(t[0]=[h("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),h("path",{d:"M13 10v4h6v-4h-6zm-2 0H5v4h6v-4zm2 9h6v-3h-6v3zm-2 0v-3H5v3h6zm2-14v3h6V5h-6zm-2 0H5v3h6V5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z",fill:"currentColor"},null,-1)]))}const ph=be(dh,[["render",fh]]),vh={Paragraph:{label:"Paragraph",icon:Kv,action:e=>e.chain().focus().setParagraph().run(),isActive:e=>e.isActive("paragraph")},"Heading 1":{label:"Heading 1",text:"H1",icon:$v,action:e=>e.chain().focus().toggleHeading({level:1}).run(),isActive:e=>e.isActive("heading",{level:1})},"Heading 2":{label:"Heading 2",text:"H2",icon:Ev,action:e=>e.chain().focus().toggleHeading({level:2}).run(),isActive:e=>e.isActive("heading",{level:2})},"Heading 3":{label:"Heading 3",text:"H3",icon:Fv,action:e=>e.chain().focus().toggleHeading({level:3}).run(),isActive:e=>e.isActive("heading",{level:3})},"Heading 4":{label:"Heading 4",text:"H4",icon:Vv,action:e=>e.chain().focus().toggleHeading({level:4}).run(),isActive:e=>e.isActive("heading",{level:4})},"Heading 5":{label:"Heading 5",text:"H5",icon:Iv,action:e=>e.chain().focus().toggleHeading({level:5}).run(),isActive:e=>e.isActive("heading",{level:5})},"Heading 6":{label:"Heading 6",text:"H6",icon:qv,action:e=>e.chain().focus().toggleHeading({level:6}).run(),isActive:e=>e.isActive("heading",{level:6})},Bold:{label:"Bold",icon:Zv,action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold")},Italic:{label:"Italic",icon:om,action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic")},Underline:{label:"Underline",icon:sm,action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline")},"Bullet List":{label:"Bullet List",icon:Dm,action:e=>e.chain().focus().toggleBulletList().run(),isActive:e=>e.isActive("bulletList")},"Numbered List":{label:"Numbered List",icon:Am,action:e=>e.chain().focus().toggleOrderedList().run(),isActive:e=>e.isActive("orderedList")},"Align Center":{label:"Align Center",icon:cm,action:e=>e.chain().focus().setTextAlign("center").run(),isActive:e=>e.isActive({textAlign:"center"})},"Align Left":{label:"Align Left",icon:mm,action:e=>e.chain().focus().setTextAlign("left").run(),isActive:e=>e.isActive({textAlign:"left"})},"Align Right":{label:"Align Right",icon:bm,action:e=>e.chain().focus().setTextAlign("right").run(),isActive:e=>e.isActive({textAlign:"right"})},FontColor:{label:"Font Color",icon:Cm,isActive:e=>e.isActive("textStyle")||e.isActive("highlight"),component:yo(()=>bo(()=>import("./FontColor-B5ZwxpBi.js"),__vite__mapDeps([0,1,2])))},Blockquote:{label:"Blockquote",icon:Mm,action:e=>e.chain().focus().toggleBlockquote().run(),isActive:e=>e.isActive("blockquote")},Code:{label:"Code",icon:Bm,action:e=>e.chain().focus().toggleCodeBlock().run(),isActive:e=>e.isActive("codeBlock")},"Horizontal Rule":{label:"Horizontal Rule",icon:uh,action:e=>e.chain().focus().setHorizontalRule().run(),isActive:e=>!1},Link:{label:"Link",icon:zm,isActive:e=>e.isActive("link"),component:yo(()=>bo(()=>import("./InsertLink-BzX-40yL.js"),__vite__mapDeps([3,1,2])))},Image:{label:"Image",icon:Jm,isActive:e=>!1,component:yo(()=>bo(()=>import("./InsertImage-BPDmyf9I.js"),__vite__mapDeps([4,1,2])))},Video:{label:"Video",icon:Gm,isActive:e=>!1,component:yo(()=>bo(()=>import("./InsertVideo-DWzAvPeG.js"),__vite__mapDeps([5,1,2])))},Undo:{label:"Undo",icon:th,action:e=>e.chain().focus().undo().run(),isActive:e=>!1},Redo:{label:"Redo",icon:ah,action:e=>e.chain().focus().redo().run(),isActive:e=>!1},InsertTable:{label:"Insert Table",icon:ph,action:e=>e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),isActive:e=>!1},AddColumnBefore:{label:"Add Column Before",action:e=>e.chain().focus().addColumnBefore().run(),isActive:e=>!1,isDisabled:e=>!e.can().addColumnBefore()},AddColumnAfter:{label:"Add Column After",action:e=>e.chain().focus().addColumnAfter().run(),isActive:e=>!1,isDisabled:e=>!e.can().addColumnAfter()},DeleteColumn:{label:"Delete Column",action:e=>e.chain().focus().deleteColumn().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteColumn()},AddRowBefore:{label:"Add Row Before",action:e=>e.chain().focus().addRowBefore().run(),isActive:e=>!1,isDisabled:e=>!e.can().addRowBefore()},AddRowAfter:{label:"Add Row After",action:e=>e.chain().focus().addRowAfter().run(),isActive:e=>!1,isDisabled:e=>!e.can().addRowAfter()},DeleteRow:{label:"Delete Row",action:e=>e.chain().focus().deleteRow().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteRow()},DeleteTable:{label:"Delete Table",action:e=>e.chain().focus().deleteTable().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteTable()},MergeCells:{label:"Merge Cells",action:e=>e.chain().focus().mergeCells().run(),isActive:e=>!1,isDisabled:e=>!e.can().mergeCells()},SplitCell:{label:"Split Cell",action:e=>e.chain().focus().splitCell().run(),isActive:e=>!1,isDisabled:e=>!e.can().splitCell()},ToggleHeaderColumn:{label:"Toggle Header Column",action:e=>e.chain().focus().toggleHeaderColumn().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderColumn()},ToggleHeaderRow:{label:"Toggle Header Row",action:e=>e.chain().focus().toggleHeaderRow().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderRow()},ToggleHeaderCell:{label:"Toggle Header Cell",action:e=>e.chain().focus().toggleHeaderCell().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderCell()},Separator:{type:"separator"}};function Qo(e){return e instanceof Array?e.map(Qo):typeof e=="object"?e:vh[e]}const mh={name:"TextEditorFixedMenu",props:["buttons"],components:{Menu:Cs},inject:["editor"],computed:{fixedMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=[["Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Paragraph","Separator","Bold","Italic","Separator","Bullet List","Numbered List","Separator","Align Left","Align Center","Align Right","FontColor","Separator","Image","Video","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"],e.map(Qo)}}};function hh(e,t,n,o,r,a){const i=Pe("Menu");return a.fixedMenuButtons?(v(),oe(i,{key:0,buttons:a.fixedMenuButtons},null,8,["buttons"])):X("",!0)}const gh=be(mh,[["render",hh]]),yh={name:"TextEditorBubbleMenu",props:["buttons","options"],components:{BubbleMenu:Gp,Menu:Cs},inject:["editor"],computed:{bubbleMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=["Paragraph","Heading 2","Heading 3","Separator","Bold","Italic","Link","Separator","Bullet List","Numbered List","Separator","Image","Video","Blockquote","Code",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"]],e.map(Qo)}}};function bh(e,t,n,o,r,a){const i=Pe("Menu"),s=Pe("BubbleMenu");return a.bubbleMenuButtons?(v(),oe(s,Be({key:0,class:"bubble-menu rounded-md shadow-sm","tippy-options":{duration:100},editor:a.editor},n.options),{default:q(()=>[N(i,{class:"rounded-md border border-gray-100 shadow-lg",buttons:a.bubbleMenuButtons},null,8,["buttons"])]),_:1},16,["editor"])):X("",!0)}const wh=be(yh,[["render",bh]]),xh={name:"TextEditorFloatingMenu",props:["buttons"],components:{FloatingMenu:ev},inject:["editor"],computed:{floatingMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=["Paragraph","Heading 2","Heading 3","Bullet List","Numbered List","Blockquote","Code","Horizontal Rule"],e.map(Qo)}}},_h=["onClick","title"],Ch={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function Oh(e,t,n,o,r,a){const i=Pe("FloatingMenu");return a.floatingMenuButtons?(v(),oe(i,{key:0,"tippy-options":{duration:100},editor:a.editor,class:"flex"},{default:q(()=>[(v(!0),w(ge,null,ke(a.floatingMenuButtons,s=>(v(),w("button",{key:s.label,class:de(["flex rounded p-1 text-gray-800 transition-colors",s.isActive(a.editor)?"bg-gray-100":"hover:bg-gray-100"]),onClick:()=>s.action(a.editor),title:s.label},[s.icon?(v(),oe(wn(s.icon),{key:0,class:"h-4 w-4"})):(v(),w("span",Ch,z(s.text),1))],10,_h))),128))]),_:1},8,["editor"])):X("",!0)}const $h=be(xh,[["render",Oh]]);function kh(e){return new rl.Converter().makeHtml(e)}function Ah(e){return e.split(`
`).filter(o=>o.startsWith("![")||o.startsWith("#")||o.startsWith("> ")||o.startsWith("*")||o.startsWith("- ")||o.startsWith("1. ")||o.startsWith("```")||o.startsWith("`")||o.startsWith("[")||o.startsWith("---")).length>0}const Th={name:"TextEditor",inheritAttrs:!1,components:{EditorContent:Zp,TextEditorFixedMenu:gh,TextEditorBubbleMenu:wh,TextEditorFloatingMenu:$h},props:{content:{type:String,default:null},placeholder:{type:[String,Function],default:""},editorClass:{type:[String,Array,Object],default:""},editable:{type:Boolean,default:!0},bubbleMenu:{type:[Boolean,Array],default:!1},bubbleMenuOptions:{type:Object,default:()=>({})},fixedMenu:{type:[Boolean,Array],default:!1},floatingMenu:{type:[Boolean,Array],default:!1},extensions:{type:Array,default:()=>[]},starterkitOptions:{type:Object,default:()=>({})},mentions:{type:Array,default:()=>[]}},emits:["change","focus","blur"],expose:["editor"],provide(){return{editor:al(()=>this.editor)}},data(){return{editor:null}},watch:{content(e){this.editor.getHTML()!==e&&this.editor.commands.setContent(e)},editable(e){this.editor.setEditable(e)},editorProps:{deep:!0,handler(e){this.editor&&this.editor.setOptions({editorProps:e})}}},mounted(){this.editor=new Qp({content:this.content||null,editorProps:this.editorProps,editable:this.editable,extensions:[il.configure(K({},this.starterkitOptions)),sl.configure({resizable:!0}),ll,ul,dl,cl,fl.configure({types:["heading","paragraph"]}),pl,vl,ml.configure({multicolor:!0}),hl,gl,yl.configure({openOnClick:!1}),bl.configure({showOnlyWhenEditable:!1,placeholder:typeof this.placeholder=="function"?this.placeholder:()=>this.placeholder}),sv(this.mentions),...this.extensions||[]],onUpdate:({editor:e})=>{this.$emit("change",e.getHTML())},onFocus:({editor:e,event:t})=>{this.$emit("focus",t)},onBlur:({editor:e,event:t})=>{this.$emit("blur",t)}})},beforeUnmount(){this.editor.destroy(),this.editor=null},computed:{editorProps(){return{attributes:{class:de(["prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-gray-300 prose-th:border-gray-300 prose-td:relative prose-th:relative prose-th:bg-gray-100",this.editorClass])},clipboardTextParser:(e,t)=>{if(!Ah(e)||!confirm("Do you want to convert markdown content to HTML before pasting?"))return;let n=document.createElement("div");return n.innerHTML=kh(e),(this.editor.view.someProp("clipboardParser")||this.editor.view.someProp("domParser")||wl.fromSchema(this.editor.schema)).parseSlice(n,{preserveWhitespace:!0,context:t})}}}}};function Eh(e,t,n,o,r,a){const i=Pe("TextEditorBubbleMenu"),s=Pe("TextEditorFixedMenu"),l=Pe("TextEditorFloatingMenu"),d=Pe("editor-content");return r.editor?(v(),w("div",{key:0,class:de(["relative w-full",e.$attrs.class])},[N(i,{buttons:n.bubbleMenu,options:n.bubbleMenuOptions},null,8,["buttons","options"]),N(s,{class:"w-full overflow-x-auto rounded-t-lg border border-gray-200",buttons:n.fixedMenu},null,8,["buttons"]),N(l,{buttons:n.floatingMenu},null,8,["buttons"]),fe(e.$slots,"top"),fe(e.$slots,"editor",{editor:r.editor},()=>[N(d,{editor:r.editor},null,8,["editor"])]),fe(e.$slots,"bottom")],2)):X("",!0)}const Os=be(Th,[["render",Eh]]),Sh=["top","right","bottom","left"],Yt=Math.min,st=Math.max,Bo=Math.round,To=Math.floor,Kt=e=>({x:e,y:e}),Dh={left:"right",right:"left",bottom:"top",top:"bottom"},Ph={start:"end",end:"start"};function kr(e,t,n){return st(e,Yt(t,n))}function It(e,t){return typeof e=="function"?e(t):e}function Nt(e){return e.split("-")[0]}function Ln(e){return e.split("-")[1]}function ea(e){return e==="x"?"y":"x"}function ta(e){return e==="y"?"height":"width"}function Mn(e){return["top","bottom"].includes(Nt(e))?"y":"x"}function na(e){return ea(Mn(e))}function Fh(e,t,n){n===void 0&&(n=!1);const o=Ln(e),r=na(e),a=ta(r);let i=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Ho(i)),[i,Ho(i)]}function Lh(e){const t=Ho(e);return[Ar(e),t,Ar(t)]}function Ar(e){return e.replace(/start|end/g,t=>Ph[t])}function Mh(e,t,n){const o=["left","right"],r=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:o:t?o:r;case"left":case"right":return t?a:i;default:return[]}}function Rh(e,t,n,o){const r=Ln(e);let a=Mh(Nt(e),n==="start",o);return r&&(a=a.map(i=>i+"-"+r),t&&(a=a.concat(a.map(Ar)))),a}function Ho(e){return e.replace(/left|right|bottom|top/g,t=>Dh[t])}function Vh(e){return K({top:0,right:0,bottom:0,left:0},e)}function $s(e){return typeof e!="number"?Vh(e):{top:e,right:e,bottom:e,left:e}}function Io(e){const{x:t,y:n,width:o,height:r}=e;return{width:o,height:r,top:n,left:t,right:t+o,bottom:n+r,x:t,y:n}}function Ga(e,t,n){let{reference:o,floating:r}=e;const a=Mn(t),i=na(t),s=ta(i),l=Nt(t),d=a==="y",u=o.x+o.width/2-r.width/2,c=o.y+o.height/2-r.height/2,f=o[s]/2-r[s]/2;let p;switch(l){case"top":p={x:u,y:o.y-r.height};break;case"bottom":p={x:u,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:c};break;case"left":p={x:o.x-r.width,y:c};break;default:p={x:o.x,y:o.y}}switch(Ln(t)){case"start":p[i]-=f*(n&&d?-1:1);break;case"end":p[i]+=f*(n&&d?-1:1);break}return p}const jh=(e,t,n)=>Q(void 0,null,function*(){const{placement:o="bottom",strategy:r="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),l=yield i.isRTL==null?void 0:i.isRTL(t);let d=yield i.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:c}=Ga(d,o,l),f=o,p={},g=0;for(let y=0;y<s.length;y++){const{name:b,fn:_}=s[y],{x:k,y:$,data:m,reset:P}=yield _({x:u,y:c,initialPlacement:o,placement:f,strategy:r,middlewareData:p,rects:d,platform:i,elements:{reference:e,floating:t}});u=k!=null?k:u,c=$!=null?$:c,p=Te(K({},p),{[b]:K(K({},p[b]),m)}),P&&g<=50&&(g++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(d=P.rects===!0?yield i.getElementRects({reference:e,floating:t,strategy:r}):P.rects),{x:u,y:c}=Ga(d,f,l)),y=-1)}return{x:u,y:c,placement:f,strategy:r,middlewareData:p}});function oo(e,t){return Q(this,null,function*(){var n;t===void 0&&(t={});const{x:o,y:r,platform:a,rects:i,elements:s,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:c="floating",altBoundary:f=!1,padding:p=0}=It(t,e),g=$s(p),b=s[f?c==="floating"?"reference":"floating":c],_=Io(yield a.getClippingRect({element:(n=yield a.isElement==null?void 0:a.isElement(b))==null||n?b:b.contextElement||(yield a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:d,rootBoundary:u,strategy:l})),k=c==="floating"?{x:o,y:r,width:i.floating.width,height:i.floating.height}:i.reference,$=yield a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating),m=(yield a.isElement==null?void 0:a.isElement($))?(yield a.getScale==null?void 0:a.getScale($))||{x:1,y:1}:{x:1,y:1},P=Io(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:k,offsetParent:$,strategy:l}):k);return{top:(_.top-P.top+g.top)/m.y,bottom:(P.bottom-_.bottom+g.bottom)/m.y,left:(_.left-P.left+g.left)/m.x,right:(P.right-_.right+g.right)/m.x}})}const Bh=e=>({name:"arrow",options:e,fn(n){return Q(this,null,function*(){const{x:o,y:r,placement:a,rects:i,platform:s,elements:l,middlewareData:d}=n,{element:u,padding:c=0}=It(e,n)||{};if(u==null)return{};const f=$s(c),p={x:o,y:r},g=na(a),y=ta(g),b=yield s.getDimensions(u),_=g==="y",k=_?"top":"left",$=_?"bottom":"right",m=_?"clientHeight":"clientWidth",P=i.reference[y]+i.reference[g]-p[g]-i.floating[y],T=p[g]-i.reference[g],j=yield s.getOffsetParent==null?void 0:s.getOffsetParent(u);let F=j?j[m]:0;(!F||!(yield s.isElement==null?void 0:s.isElement(j)))&&(F=l.floating[m]||i.floating[y]);const S=P/2-T/2,x=F/2-b[y]/2-1,O=Yt(f[k],x),A=Yt(f[$],x),C=O,V=F-b[y]-A,ae=F/2-b[y]/2+S,ne=kr(C,ae,V),te=!d.arrow&&Ln(a)!=null&&ae!==ne&&i.reference[y]/2-(ae<C?O:A)-b[y]/2<0,le=te?ae<C?ae-C:ae-V:0;return{[g]:p[g]+le,data:K({[g]:ne,centerOffset:ae-ne-le},te&&{alignmentOffset:le}),reset:te}})}}),Hh=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(n){return Q(this,null,function*(){var o,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:l,platform:d,elements:u}=n,C=It(e,n),{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0}=C,_=Ue(C,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((o=i.arrow)!=null&&o.alignmentOffset)return{};const k=Nt(a),$=Nt(l)===l,m=yield d.isRTL==null?void 0:d.isRTL(u.floating),P=p||($||!b?[Ho(l)]:Lh(l));!p&&y!=="none"&&P.push(...Rh(l,b,y,m));const T=[l,...P],j=yield oo(n,_),F=[];let S=((r=i.flip)==null?void 0:r.overflows)||[];if(c&&F.push(j[k]),f){const V=Fh(a,s,m);F.push(j[V[0]],j[V[1]])}if(S=[...S,{placement:a,overflows:F}],!F.every(V=>V<=0)){var x,O;const V=(((x=i.flip)==null?void 0:x.index)||0)+1,ae=T[V];if(ae)return{data:{index:V,overflows:S},reset:{placement:ae}};let ne=(O=S.filter(te=>te.overflows[0]<=0).sort((te,le)=>te.overflows[1]-le.overflows[1])[0])==null?void 0:O.placement;if(!ne)switch(g){case"bestFit":{var A;const te=(A=S.map(le=>[le.placement,le.overflows.filter(me=>me>0).reduce((me,he)=>me+he,0)]).sort((le,me)=>le[1]-me[1])[0])==null?void 0:A[0];te&&(ne=te);break}case"initialPlacement":ne=l;break}if(a!==ne)return{reset:{placement:ne}}}return{}})}}};function Qa(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Za(e){return Sh.some(t=>e[t]>=0)}const Ih=function(e){return e===void 0&&(e={}),{name:"hide",options:e,fn(n){return Q(this,null,function*(){const{rects:o}=n,i=It(e,n),{strategy:r="referenceHidden"}=i,a=Ue(i,["strategy"]);switch(r){case"referenceHidden":{const s=yield oo(n,Te(K({},a),{elementContext:"reference"})),l=Qa(s,o.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Za(l)}}}case"escaped":{const s=yield oo(n,Te(K({},a),{altBoundary:!0})),l=Qa(s,o.floating);return{data:{escapedOffsets:l,escaped:Za(l)}}}default:return{}}})}}};function Nh(e,t){return Q(this,null,function*(){const{placement:n,platform:o,elements:r}=e,a=yield o.isRTL==null?void 0:o.isRTL(r.floating),i=Nt(n),s=Ln(n),l=Mn(n)==="y",d=["left","top"].includes(i)?-1:1,u=a&&l?-1:1,c=It(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:K({mainAxis:0,crossAxis:0,alignmentAxis:null},c);return s&&typeof g=="number"&&(p=s==="end"?g*-1:g),l?{x:p*u,y:f*d}:{x:f*d,y:p*u}})}const zh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(n){return Q(this,null,function*(){var o,r;const{x:a,y:i,placement:s,middlewareData:l}=n,d=yield Nh(n,e);return s===((o=l.offset)==null?void 0:o.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:Te(K({},d),{placement:s})}})}}},Uh=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(n){return Q(this,null,function*(){const{x:o,y:r,placement:a}=n,_=It(e,n),{mainAxis:i=!0,crossAxis:s=!1,limiter:l={fn:k=>{let{x:$,y:m}=k;return{x:$,y:m}}}}=_,d=Ue(_,["mainAxis","crossAxis","limiter"]),u={x:o,y:r},c=yield oo(n,d),f=Mn(Nt(a)),p=ea(f);let g=u[p],y=u[f];if(i){const k=p==="y"?"top":"left",$=p==="y"?"bottom":"right",m=g+c[k],P=g-c[$];g=kr(m,g,P)}if(s){const k=f==="y"?"top":"left",$=f==="y"?"bottom":"right",m=y+c[k],P=y-c[$];y=kr(m,y,P)}const b=l.fn(Te(K({},n),{[p]:g,[f]:y}));return Te(K({},b),{data:{x:b.x-o,y:b.y-r}})})}}},qh=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:r,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:l=!0,crossAxis:d=!0}=It(e,t),u={x:n,y:o},c=Mn(r),f=ea(c);let p=u[f],g=u[c];const y=It(s,t),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:K({mainAxis:0,crossAxis:0},y);if(l){const $=f==="y"?"height":"width",m=a.reference[f]-a.floating[$]+b.mainAxis,P=a.reference[f]+a.reference[$]-b.mainAxis;p<m?p=m:p>P&&(p=P)}if(d){var _,k;const $=f==="y"?"width":"height",m=["top","left"].includes(Nt(r)),P=a.reference[c]-a.floating[$]+(m&&((_=i.offset)==null?void 0:_[c])||0)+(m?0:b.crossAxis),T=a.reference[c]+a.reference[$]+(m?0:((k=i.offset)==null?void 0:k[c])||0)-(m?b.crossAxis:0);g<P?g=P:g>T&&(g=T)}return{[f]:p,[c]:g}}}},Wh=function(e){return e===void 0&&(e={}),{name:"size",options:e,fn(n){return Q(this,null,function*(){const{placement:o,rects:r,platform:a,elements:i}=n,j=It(e,n),{apply:s=()=>{}}=j,l=Ue(j,["apply"]),d=yield oo(n,l),u=Nt(o),c=Ln(o),f=Mn(o)==="y",{width:p,height:g}=r.floating;let y,b;u==="top"||u==="bottom"?(y=u,b=c===((yield a.isRTL==null?void 0:a.isRTL(i.floating))?"start":"end")?"left":"right"):(b=u,y=c==="end"?"top":"bottom");const _=g-d[y],k=p-d[b],$=!n.middlewareData.shift;let m=_,P=k;if(f){const F=p-d.left-d.right;P=c||$?Yt(k,F):F}else{const F=g-d.top-d.bottom;m=c||$?Yt(_,F):F}if($&&!c){const F=st(d.left,0),S=st(d.right,0),x=st(d.top,0),O=st(d.bottom,0);f?P=p-2*(F!==0||S!==0?F+S:st(d.left,d.right)):m=g-2*(x!==0||O!==0?x+O:st(d.top,d.bottom))}yield s(Te(K({},n),{availableWidth:P,availableHeight:m}));const T=yield a.getDimensions(i.floating);return p!==T.width||g!==T.height?{reset:{rects:!0}}:{}})}}};function mn(e){return oa(e)?(e.nodeName||"").toLowerCase():"#document"}function ut(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zt(e){var t;return(t=(oa(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function oa(e){return e instanceof Node||e instanceof ut(e).Node}function Lt(e){return e instanceof Element||e instanceof ut(e).Element}function Mt(e){return e instanceof HTMLElement||e instanceof ut(e).HTMLElement}function ei(e){return typeof ShadowRoot=="undefined"?!1:e instanceof ShadowRoot||e instanceof ut(e).ShadowRoot}function po(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=$t(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(r)}function Jh(e){return["table","td","th"].includes(mn(e))}function ra(e){const t=aa(),n=$t(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Yh(e){let t=Xt(e);for(;Mt(t)&&!Dn(t);){if(ra(t))return t;t=Xt(t)}return null}function aa(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dn(e){return["html","body","#document"].includes(mn(e))}function $t(e){return ut(e).getComputedStyle(e)}function Zo(e){return Lt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Xt(e){if(mn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ei(e)&&e.host||zt(e);return ei(t)?t.host:t}function ks(e){const t=Xt(e);return Dn(t)?e.ownerDocument?e.ownerDocument.body:e.body:Mt(t)&&po(t)?t:ks(t)}function ro(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=ks(e),a=r===((o=e.ownerDocument)==null?void 0:o.body),i=ut(r);return a?t.concat(i,i.visualViewport||[],po(r)?r:[],i.frameElement&&n?ro(i.frameElement):[]):t.concat(r,ro(r,[],n))}function As(e){const t=$t(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=Mt(e),a=r?e.offsetWidth:n,i=r?e.offsetHeight:o,s=Bo(n)!==a||Bo(o)!==i;return s&&(n=a,o=i),{width:n,height:o,$:s}}function ia(e){return Lt(e)?e:e.contextElement}function xn(e){const t=ia(e);if(!Mt(t))return Kt(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:a}=As(t);let i=(a?Bo(n.width):n.width)/o,s=(a?Bo(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const Kh=Kt(0);function Ts(e){const t=ut(e);return!aa()||!t.visualViewport?Kh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Xh(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ut(e)?!1:t}function pn(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=ia(e);let i=Kt(1);t&&(o?Lt(o)&&(i=xn(o)):i=xn(e));const s=Xh(a,n,o)?Ts(a):Kt(0);let l=(r.left+s.x)/i.x,d=(r.top+s.y)/i.y,u=r.width/i.x,c=r.height/i.y;if(a){const f=ut(a),p=o&&Lt(o)?ut(o):o;let g=f,y=g.frameElement;for(;y&&o&&p!==g;){const b=xn(y),_=y.getBoundingClientRect(),k=$t(y),$=_.left+(y.clientLeft+parseFloat(k.paddingLeft))*b.x,m=_.top+(y.clientTop+parseFloat(k.paddingTop))*b.y;l*=b.x,d*=b.y,u*=b.x,c*=b.y,l+=$,d+=m,g=ut(y),y=g.frameElement}}return Io({width:u,height:c,x:l,y:d})}const Gh=[":popover-open",":modal"];function sa(e){return Gh.some(t=>{try{return e.matches(t)}catch(n){return!1}})}function Qh(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const a=r==="fixed",i=zt(o),s=t?sa(t.floating):!1;if(o===i||s&&a)return n;let l={scrollLeft:0,scrollTop:0},d=Kt(1);const u=Kt(0),c=Mt(o);if((c||!c&&!a)&&((mn(o)!=="body"||po(i))&&(l=Zo(o)),Mt(o))){const f=pn(o);d=xn(o),u.x=f.x+o.clientLeft,u.y=f.y+o.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+u.x,y:n.y*d.y-l.scrollTop*d.y+u.y}}function Zh(e){return Array.from(e.getClientRects())}function Es(e){return pn(zt(e)).left+Zo(e).scrollLeft}function eg(e){const t=zt(e),n=Zo(e),o=e.ownerDocument.body,r=st(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=st(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let i=-n.scrollLeft+Es(e);const s=-n.scrollTop;return $t(o).direction==="rtl"&&(i+=st(t.clientWidth,o.clientWidth)-r),{width:r,height:a,x:i,y:s}}function tg(e,t){const n=ut(e),o=zt(e),r=n.visualViewport;let a=o.clientWidth,i=o.clientHeight,s=0,l=0;if(r){a=r.width,i=r.height;const d=aa();(!d||d&&t==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:a,height:i,x:s,y:l}}function ng(e,t){const n=pn(e,!0,t==="fixed"),o=n.top+e.clientTop,r=n.left+e.clientLeft,a=Mt(e)?xn(e):Kt(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,l=r*a.x,d=o*a.y;return{width:i,height:s,x:l,y:d}}function ti(e,t,n){let o;if(t==="viewport")o=tg(e,n);else if(t==="document")o=eg(zt(e));else if(Lt(t))o=ng(t,n);else{const r=Ts(e);o=Te(K({},t),{x:t.x-r.x,y:t.y-r.y})}return Io(o)}function Ss(e,t){const n=Xt(e);return n===t||!Lt(n)||Dn(n)?!1:$t(n).position==="fixed"||Ss(n,t)}function og(e,t){const n=t.get(e);if(n)return n;let o=ro(e,[],!1).filter(s=>Lt(s)&&mn(s)!=="body"),r=null;const a=$t(e).position==="fixed";let i=a?Xt(e):e;for(;Lt(i)&&!Dn(i);){const s=$t(i),l=ra(i);!l&&s.position==="fixed"&&(r=null),(a?!l&&!r:!l&&s.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||po(i)&&!l&&Ss(e,i))?o=o.filter(u=>u!==i):r=s,i=Xt(i)}return t.set(e,o),o}function rg(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i=[...n==="clippingAncestors"?sa(t)?[]:og(t,this._c):[].concat(n),o],s=i[0],l=i.reduce((d,u)=>{const c=ti(t,u,r);return d.top=st(c.top,d.top),d.right=Yt(c.right,d.right),d.bottom=Yt(c.bottom,d.bottom),d.left=st(c.left,d.left),d},ti(t,s,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ag(e){const{width:t,height:n}=As(e);return{width:t,height:n}}function ig(e,t,n){const o=Mt(t),r=zt(t),a=n==="fixed",i=pn(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=Kt(0);if(o||!o&&!a)if((mn(t)!=="body"||po(r))&&(s=Zo(t)),o){const c=pn(t,!0,a,t);l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}else r&&(l.x=Es(r));const d=i.left+s.scrollLeft-l.x,u=i.top+s.scrollTop-l.y;return{x:d,y:u,width:i.width,height:i.height}}function pr(e){return $t(e).position==="static"}function ni(e,t){return!Mt(e)||$t(e).position==="fixed"?null:t?t(e):e.offsetParent}function Ds(e,t){const n=ut(e);if(sa(e))return n;if(!Mt(e)){let r=Xt(e);for(;r&&!Dn(r);){if(Lt(r)&&!pr(r))return r;r=Xt(r)}return n}let o=ni(e,t);for(;o&&Jh(o)&&pr(o);)o=ni(o,t);return o&&Dn(o)&&pr(o)&&!ra(o)?n:o||Yh(e)||n}const sg=function(e){return Q(this,null,function*(){const t=this.getOffsetParent||Ds,n=this.getDimensions,o=yield n(e.floating);return{reference:ig(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}})};function lg(e){return $t(e).direction==="rtl"}const ug={convertOffsetParentRelativeRectToViewportRelativeRect:Qh,getDocumentElement:zt,getClippingRect:rg,getOffsetParent:Ds,getElementRects:sg,getClientRects:Zh,getDimensions:ag,getScale:xn,isElement:Lt,isRTL:lg};function dg(e,t){let n=null,o;const r=zt(e);function a(){var s;clearTimeout(o),(s=n)==null||s.disconnect(),n=null}function i(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:d,top:u,width:c,height:f}=e.getBoundingClientRect();if(s||t(),!c||!f)return;const p=To(u),g=To(r.clientWidth-(d+c)),y=To(r.clientHeight-(u+f)),b=To(d),k={rootMargin:-p+"px "+-g+"px "+-y+"px "+-b+"px",threshold:st(0,Yt(1,l))||1};let $=!0;function m(P){const T=P[0].intersectionRatio;if(T!==l){if(!$)return i();T?i(!1,T):o=setTimeout(()=>{i(!1,1e-7)},1e3)}$=!1}try{n=new IntersectionObserver(m,Te(K({},k),{root:r.ownerDocument}))}catch(P){n=new IntersectionObserver(m,k)}n.observe(e)}return i(!0),a}function cg(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,d=ia(e),u=r||a?[...d?ro(d):[],...ro(t)]:[];u.forEach(_=>{r&&_.addEventListener("scroll",n,{passive:!0}),a&&_.addEventListener("resize",n)});const c=d&&s?dg(d,n):null;let f=-1,p=null;i&&(p=new ResizeObserver(_=>{let[k]=_;k&&k.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var $;($=p)==null||$.observe(t)})),n()}),d&&!l&&p.observe(d),p.observe(t));let g,y=l?pn(e):null;l&&b();function b(){const _=pn(e);y&&(_.x!==y.x||_.y!==y.y||_.width!==y.width||_.height!==y.height)&&n(),y=_,g=requestAnimationFrame(b)}return n(),()=>{var _;u.forEach(k=>{r&&k.removeEventListener("scroll",n),a&&k.removeEventListener("resize",n)}),c==null||c(),(_=p)==null||_.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const fg=zh,pg=Uh,oi=Hh,vg=Wh,mg=Ih,hg=Bh,gg=qh,yg=(e,t,n)=>{const o=new Map,r=K({platform:ug},n),a=Te(K({},r.platform),{_c:o});return jh(e,t,Te(K({},r),{platform:a}))};function bg(e){return e!=null&&typeof e=="object"&&"$el"in e}function Tr(e){if(bg(e)){const t=e.$el;return oa(t)&&mn(t)==="#comment"?null:t}return e}function wg(e){return{name:"arrow",options:e,fn(t){const n=Tr(E(e.element));return n==null?{}:hg({element:n,padding:e.padding}).fn(t)}}}function Ps(e){return typeof window=="undefined"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ri(e,t){const n=Ps(e);return Math.round(t*n)/n}function xg(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,r=L(()=>{var j;return(j=E(n.open))!=null?j:!0}),a=L(()=>E(n.middleware)),i=L(()=>{var j;return(j=E(n.placement))!=null?j:"bottom"}),s=L(()=>{var j;return(j=E(n.strategy))!=null?j:"absolute"}),l=L(()=>{var j;return(j=E(n.transform))!=null?j:!0}),d=L(()=>Tr(e.value)),u=L(()=>Tr(t.value)),c=D(0),f=D(0),p=D(s.value),g=D(i.value),y=Dr({}),b=D(!1),_=L(()=>{const j={position:p.value,left:"0",top:"0"};if(!u.value)return j;const F=ri(u.value,c.value),S=ri(u.value,f.value);return l.value?K(Te(K({},j),{transform:"translate("+F+"px, "+S+"px)"}),Ps(u.value)>=1.5&&{willChange:"transform"}):{position:p.value,left:F+"px",top:S+"px"}});let k;function $(){d.value==null||u.value==null||yg(d.value,u.value,{middleware:a.value,placement:i.value,strategy:s.value}).then(j=>{c.value=j.x,f.value=j.y,p.value=j.strategy,g.value=j.placement,y.value=j.middlewareData,b.value=!0})}function m(){typeof k=="function"&&(k(),k=void 0)}function P(){if(m(),o===void 0){$();return}if(d.value!=null&&u.value!=null){k=o(d.value,u.value,$);return}}function T(){r.value||(b.value=!1)}return _e([a,i,s],$,{flush:"sync"}),_e([d,u],P,{flush:"sync"}),_e(r,T,{flush:"sync"}),vi()&&mi(m),{x:yn(c),y:yn(f),strategy:yn(p),placement:yn(g),middlewareData:yn(y),isPositioned:yn(b),floatingStyles:_,update:$}}function vo(e,t){const n=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(n);return[r=>{const a=Ge(o,r);if(a||a===null)return a;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},r=>(dt(o,r),r)]}function Fs(e,t,n){const o=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),o.dispatchEvent(r)}function _g(e,t){var n;const o=Dr();return Le(()=>{o.value=e()},Te(K({},t),{flush:(n=void 0)!=null?n:"sync"})),hi(o)}function er(e){return vi()?(mi(e),!0):!1}function Cg(){const e=new Set,t=n=>{e.delete(n)};return{on:n=>{e.add(n);const o=()=>t(n);return er(o),{off:o}},off:t,trigger:(...n)=>Promise.all(Array.from(e).map(o=>o(...n)))}}function Og(e){let t=!1,n;const o=Cl(!0);return(...r)=>(t||(n=o.run(()=>e(...r)),t=!0),n)}function cn(e){return typeof e=="function"?e():E(e)}const tr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $g=e=>typeof e<"u",kg=Object.prototype.toString,Ag=e=>kg.call(e)==="[object Object]",Tg=()=>{};function Eg(e,t=1e4){return pi((n,o)=>{let r=cn(e),a;const i=()=>setTimeout(()=>{r=cn(e),o()},cn(t));return er(()=>{clearTimeout(a)}),{get(){return n(),r},set(s){r=s,o(),clearTimeout(a),a=i()}}})}function Ls(e,t,n={}){const{immediate:o=!0}=n,r=D(!1);let a=null;function i(){a&&(clearTimeout(a),a=null)}function s(){r.value=!1,i()}function l(...d){i(),r.value=!0,a=setTimeout(()=>{r.value=!1,a=null,e(...d)},cn(t))}return o&&(r.value=!0,tr&&l()),er(s),{isPending:hi(r),start:l,stop:s}}function la(e){var t;const n=cn(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Ms=tr?window:void 0;function Er(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=Ms):[t,n,o,r]=e,!t)return Tg;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],i=()=>{a.forEach(u=>u()),a.length=0},s=(u,c,f,p)=>(u.addEventListener(c,f,p),()=>u.removeEventListener(c,f,p)),l=_e(()=>[la(t),cn(r)],([u,c])=>{if(i(),!u)return;const f=Ag(c)?K({},c):c;a.push(...n.flatMap(p=>o.map(g=>s(u,p,g,f))))},{immediate:!0,flush:"post"}),d=()=>{l(),i()};return er(d),d}function Sg(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Dg(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=Ms,eventName:a="keydown",passive:i=!1,dedupe:s=!1}=o,l=Sg(t);return Er(r,a,d=>{d.repeat&&cn(s)||l(d)&&n(d)},i)}function Pg(){const e=D(!1),t=Pn();return t&&Se(()=>{e.value=!0},t),e}function Fg(e){return JSON.parse(JSON.stringify(e))}function Lg(e,t,n,o={}){var r,a,i;const{clone:s=!1,passive:l=!1,eventName:d,deep:u=!1,defaultValue:c,shouldEmit:f}=o,p=Pn(),g=n||(p==null?void 0:p.emit)||((r=p==null?void 0:p.$emit)==null?void 0:r.bind(p))||((i=(a=p==null?void 0:p.proxy)==null?void 0:a.$emit)==null?void 0:i.bind(p==null?void 0:p.proxy));let y=d;y=y||`update:${t.toString()}`;const b=$=>s?typeof s=="function"?s($):Fg($):$,_=()=>$g(e[t])?b(e[t]):c,k=$=>{f?f($)&&g(y,$):g(y,$)};if(l){const $=_(),m=D($);let P=!1;return _e(()=>e[t],T=>{P||(P=!0,m.value=b(T),lt(()=>P=!1))}),_e(m,T=>{!P&&(T!==e[t]||u)&&k(T)},{deep:u}),m}else return L({get(){return _()},set($){k($)}})}function Rs(e){return e?e.flatMap(t=>t.type===ge?Rs(t.children):[t]):[]}const[Mg,sx]=vo("ConfigProvider");function Rg(e){const t=Pn(),n=t==null?void 0:t.type.emits,o={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${t==null?void 0:t.type.__name}`),n==null||n.forEach(r=>{o[Ol(gi(r))]=(...a)=>e(r,...a)}),o}function Vs(e){var r;const t=Pn(),n=Object.keys((r=t==null?void 0:t.type.props)!=null?r:{}).reduce((a,i)=>{const s=(t==null?void 0:t.type.props[i]).default;return s!==void 0&&(a[i]=s),a},{}),o=$l(e);return L(()=>{var s;const a={},i=(s=t==null?void 0:t.vnode.props)!=null?s:{};return Object.keys(i).forEach(l=>{a[gi(l)]=i[l]}),Object.keys(K(K({},n),a)).reduce((l,d)=>(o.value[d]!==void 0&&(l[d]=o.value[d]),l),{})})}function Vg(e,t){const n=Vs(e),o=t?Rg(t):{};return L(()=>K(K({},n.value),o))}function pt(){const e=Pn(),t=D(),n=L(()=>{var i,s;return["#text","#comment"].includes((i=t.value)==null?void 0:i.$el.nodeName)?(s=t.value)==null?void 0:s.$el.nextElementSibling:la(t)}),o=Object.assign({},e.exposed),r={};for(const i in e.props)Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>e.props[i]});if(Object.keys(o).length>0)for(const i in o)Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>o[i]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=r;function a(i){t.value=i,!(i instanceof Element||!i)&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>i.$el}),e.exposed=r)}return{forwardRef:a,currentRef:t,currentElement:n}}function jg(e,t){const n=Eg(!1,300),o=D(null),r=Cg();function a(){o.value=null,n.value=!1}function i(s,l){const d=s.currentTarget,u={x:s.clientX,y:s.clientY},c=Bg(u,d.getBoundingClientRect()),f=Hg(u,c),p=Ig(l.getBoundingClientRect()),g=zg([...f,...p]);o.value=g,n.value=!0}return Le(s=>{if(e.value&&t.value){const l=u=>i(u,t.value),d=u=>i(u,e.value);e.value.addEventListener("pointerleave",l),t.value.addEventListener("pointerleave",d),s(()=>{var u,c;(u=e.value)==null||u.removeEventListener("pointerleave",l),(c=t.value)==null||c.removeEventListener("pointerleave",d)})}}),Le(s=>{if(o.value){const l=d=>{var u,c;if(!o.value)return;const f=d.target,p={x:d.clientX,y:d.clientY},g=((u=e.value)==null?void 0:u.contains(f))||((c=t.value)==null?void 0:c.contains(f)),y=!Ng(p,o.value);g?a():y&&(a(),r.trigger())};document.addEventListener("pointermove",l),s(()=>document.removeEventListener("pointermove",l))}}),{isPointerInTransit:n,onPointerExit:r.on}}function Bg(e,t){const n=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,o,r,a)){case a:return"left";case r:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Hg(e,t,n=5){const o=[];switch(t){case"top":o.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":o.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":o.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":o.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return o}function Ig(e){const{top:t,right:n,bottom:o,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:o},{x:r,y:o}]}function Ng(e,t){const{x:n,y:o}=e;let r=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,l=t[a].y,d=t[i].x,u=t[i].y;l>o!=u>o&&n<(d-s)*(o-l)/(u-l)+s&&(r=!r)}return r}function zg(e){const t=e.slice();return t.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),Ug(t)}function Ug(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const r=e[o];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(r.y-i.y)>=(a.y-i.y)*(r.x-i.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(r.y-i.y)>=(a.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}let qg=0;function Wg(e,t="radix"){const{useId:n}=Mg({useId:void 0});return n&&typeof n=="function"?`${t}-${n()}`:`${t}-${++qg}`}function Jg(e){const t=D(),n=L(()=>{var a;var r;return(a=(r=t.value)==null?void 0:r.width)!=null?a:0}),o=L(()=>{var a;var r;return(a=(r=t.value)==null?void 0:r.height)!=null?a:0});return Se(()=>{const r=la(e);if(r){t.value={width:r.offsetWidth,height:r.offsetHeight};const a=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let l,d;if("borderBoxSize"in s){const u=s.borderBoxSize,c=Array.isArray(u)?u[0]:u;l=c.inlineSize,d=c.blockSize}else l=r.offsetWidth,d=r.offsetHeight;t.value={width:l,height:d}});return a.observe(r,{box:"border-box"}),()=>a.unobserve(r)}else t.value=void 0}),{width:n,height:o}}const Yg=ve({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>{var o,r;if(!n.default)return null;const a=Rs(n.default()),i=a.findIndex(u=>u.type!==kl);if(i===-1)return a;const s=a[i];(o=s.props)==null||delete o.ref;const l=s.props?Be(t,s.props):t;t.class&&(r=s.props)!=null&&r.class&&delete s.props.class;const d=ii(s,l);for(const u in l)u.startsWith("on")&&(d.props||(d.props={}),d.props[u]=l[u]);return a.length===1?d:(a[i]=d,a)}}}),Rn=ve({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:n}){const o=e.asChild?"template":e.as;return typeof o=="string"&&["area","img","input"].includes(o)?()=>Re(o,t):o!=="template"?()=>Re(e.as,t,{default:n.default}):()=>Re(Yg,t,{default:n.default})}}),Kg=ve({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=Pg();return(n,o)=>E(t)||n.forceMount?(v(),oe(zo,{key:0,to:n.to,disabled:n.disabled},[fe(n.$slots,"default")],8,["to","disabled"])):X("",!0)}}),Xg="dismissableLayer.pointerDownOutside",Gg="dismissableLayer.focusOutside";function js(e,t){const n=t.closest("[data-dismissable-layer]"),o=e.querySelector("[data-dismissable-layer]"),r=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&o===n||r.indexOf(o)<r.indexOf(n))}function Qg(e,t){var i;var n;const o=(i=(n=t==null?void 0:t.value)==null?void 0:n.ownerDocument)!=null?i:globalThis==null?void 0:globalThis.document,r=D(!1),a=D(()=>{});return Le(s=>{if(!tr)return;const l=u=>Q(this,null,function*(){const c=u.target;if(t!=null&&t.value){if(js(t.value,c)){r.value=!1;return}if(u.target&&!r.value){let f=function(){Fs(Xg,e,p)};const p={originalEvent:u};u.pointerType==="touch"?(o.removeEventListener("click",a.value),a.value=f,o.addEventListener("click",a.value,{once:!0})):f()}else o.removeEventListener("click",a.value);r.value=!1}}),d=window.setTimeout(()=>{o.addEventListener("pointerdown",l)},0);s(()=>{window.clearTimeout(d),o.removeEventListener("pointerdown",l),o.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>r.value=!0}}function Zg(e,t){var a;var n;const o=(a=(n=t==null?void 0:t.value)==null?void 0:n.ownerDocument)!=null?a:globalThis==null?void 0:globalThis.document,r=D(!1);return Le(i=>{if(!tr)return;const s=l=>Q(this,null,function*(){t!=null&&t.value&&(yield lt(),!(!t.value||js(t.value,l.target))&&l.target&&!r.value&&Fs(Gg,e,{originalEvent:l}))});o.addEventListener("focusin",s),i(()=>o.removeEventListener("focusin",s))}),{onFocusCapture:()=>r.value=!0,onBlurCapture:()=>r.value=!1}}const Rt=Uo({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),e0=ve({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const n=e,o=t,{forwardRef:r,currentElement:a}=pt(),i=L(()=>{var y;var g;return(y=(g=a.value)==null?void 0:g.ownerDocument)!=null?y:globalThis.document}),s=L(()=>Rt.layersRoot),l=L(()=>a.value?Array.from(s.value).indexOf(a.value):-1),d=L(()=>Rt.layersWithOutsidePointerEventsDisabled.size>0),u=L(()=>{const g=Array.from(s.value),[y]=[...Rt.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y);return l.value>=b}),c=Qg(g=>Q(this,null,function*(){const y=[...Rt.branches].some(b=>b.contains(g.target));!u.value||y||(o("pointerDownOutside",g),o("interactOutside",g),yield lt(),g.defaultPrevented||o("dismiss"))}),a),f=Zg(g=>{[...Rt.branches].some(y=>y.contains(g.target))||(o("focusOutside",g),o("interactOutside",g),g.defaultPrevented||o("dismiss"))},a);Dg("Escape",g=>{l.value===s.value.size-1&&(o("escapeKeyDown",g),g.defaultPrevented||o("dismiss"))});let p;return Le(g=>{a.value&&(n.disableOutsidePointerEvents&&(Rt.layersWithOutsidePointerEventsDisabled.size===0&&(p=i.value.body.style.pointerEvents,i.value.body.style.pointerEvents="none"),Rt.layersWithOutsidePointerEventsDisabled.add(a.value)),s.value.add(a.value),g(()=>{n.disableOutsidePointerEvents&&Rt.layersWithOutsidePointerEventsDisabled.size===1&&(i.value.body.style.pointerEvents=p)}))}),Le(g=>{g(()=>{a.value&&(s.value.delete(a.value),Rt.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(g,y)=>(v(),oe(E(Rn),{ref:E(r),"as-child":g.asChild,as:g.as,"data-dismissable-layer":"",style:jt({pointerEvents:d.value?u.value?"auto":"none":void 0}),onFocusCapture:E(f).onFocusCapture,onBlurCapture:E(f).onBlurCapture,onPointerdownCapture:E(c).onPointerDownCapture},{default:q(()=>[fe(g.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}});Og(()=>D([]));const[Bs,t0]=vo("PopperRoot"),n0=ve({__name:"PopperRoot",setup(e){const t=D();return t0({anchor:t,onAnchorChange:n=>t.value=n}),(n,o)=>fe(n.$slots,"default")}}),o0=ve({__name:"PopperAnchor",props:{element:{},asChild:{type:Boolean},as:{}},setup(e){const t=e,{forwardRef:n,currentElement:o}=pt(),r=Bs();return _e(o,()=>{var a;r.onAnchorChange((a=t.element)!=null?a:o.value)}),(a,i)=>(v(),oe(E(Rn),{ref:E(n),as:a.as,"as-child":a.asChild},{default:q(()=>[fe(a.$slots,"default")]),_:3},8,["as","as-child"]))}});function r0(e){return e!==null}function a0(e){return{name:"transformOrigin",options:e,fn(t){var k,$;var n,o,r;const{placement:a,rects:i,middlewareData:s}=t,l=((n=s.arrow)==null?void 0:n.centerOffset)!==0,d=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[c,f]=Sr(a),p={start:"0%",center:"50%",end:"100%"}[f],g=((k=(o=s.arrow)==null?void 0:o.x)!=null?k:0)+d/2,y=(($=(r=s.arrow)==null?void 0:r.y)!=null?$:0)+u/2;let b="",_="";return c==="bottom"?(b=l?p:`${g}px`,_=`${-u}px`):c==="top"?(b=l?p:`${g}px`,_=`${i.floating.height+u}px`):c==="right"?(b=`${-u}px`,_=l?p:`${y}px`):c==="left"&&(b=`${i.floating.width+u}px`,_=l?p:`${y}px`),{data:{x:b,y:_}}}}}function Sr(e){const[t,n="center"]=e.split("-");return[t,n]}const i0={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,updatePositionStrategy:"optimized",prioritizePosition:!1},[s0,l0]=vo("PopperContent"),u0=ve({inheritAttrs:!1,__name:"PopperContent",props:Al({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{}},K({},i0)),emits:["placed"],setup(e,{emit:t}){const n=e,o=t,r=Bs(),{forwardRef:a,currentElement:i}=pt(),s=D(),l=D(),{width:d,height:u}=Jg(l),c=L(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),f=L(()=>typeof n.collisionPadding=="number"?n.collisionPadding:K({top:0,right:0,bottom:0,left:0},n.collisionPadding)),p=L(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),g=L(()=>({padding:f.value,boundary:p.value.filter(r0),altBoundary:p.value.length>0})),y=_g(()=>[fg({mainAxis:n.sideOffset+u.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&oi(K({},g.value)),n.avoidCollisions&&pg(K({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?gg():void 0},g.value)),!n.prioritizePosition&&n.avoidCollisions&&oi(K({},g.value)),vg(Te(K({},g.value),{apply:({elements:x,rects:O,availableWidth:A,availableHeight:C})=>{const{width:V,height:ae}=O.reference,ne=x.floating.style;Object.assign(x.floating.style,{maxWidth:`${A}px`,maxHeight:`${C}px`}),ne.setProperty("--radix-popper-available-width",`${A}px`),ne.setProperty("--radix-popper-available-height",`${C}px`),ne.setProperty("--radix-popper-anchor-width",`${V}px`),ne.setProperty("--radix-popper-anchor-height",`${ae}px`)}})),l.value&&wg({element:l.value,padding:n.arrowPadding}),a0({arrowWidth:d.value,arrowHeight:u.value}),n.hideWhenDetached&&mg(K({strategy:"referenceHidden"},g.value))]),{floatingStyles:b,placement:_,isPositioned:k,middlewareData:$}=xg(r.anchor,s,{strategy:"fixed",placement:c,whileElementsMounted:(...x)=>cg(...x,{animationFrame:n.updatePositionStrategy==="always"}),middleware:y}),m=L(()=>Sr(_.value)[0]),P=L(()=>Sr(_.value)[1]);Le(()=>{k.value&&o("placed")});const T=L(()=>{var x;return((x=$.value.arrow)==null?void 0:x.centerOffset)!==0}),j=D("");Le(()=>{i.value&&(j.value=window.getComputedStyle(i.value).zIndex)});const F=L(()=>{var O;var x;return(O=(x=$.value.arrow)==null?void 0:x.x)!=null?O:0}),S=L(()=>{var O;var x;return(O=(x=$.value.arrow)==null?void 0:x.y)!=null?O:0});return l0({placedSide:m,onArrowChange:x=>l.value=x,arrowX:F,arrowY:S,shouldHideArrow:T}),(x,O)=>{var A,C,V;return v(),w("div",{ref_key:"floatingRef",ref:s,"data-radix-popper-content-wrapper":"",style:jt(K(Te(K({},E(b)),{transform:E(k)?E(b).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j.value,"--radix-popper-transform-origin":[(A=E($).transformOrigin)==null?void 0:A.x,(C=E($).transformOrigin)==null?void 0:C.y].join(" ")}),((V=E($).hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}))},[N(E(Rn),Be({ref:E(a)},x.$attrs,{"as-child":n.asChild,as:x.as,"data-side":m.value,"data-align":P.value,style:{animation:E(k)?void 0:"none"}}),{default:q(()=>[fe(x.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),d0=h("polygon",{points:"0,0 30,0 15,10"},null,-1),c0=ve({__name:"Arrow",props:{width:{default:10},height:{default:5},asChild:{type:Boolean},as:{default:"svg"}},setup(e){const t=e;return pt(),(n,o)=>(v(),oe(E(Rn),Be(t,{width:n.width,height:n.height,viewBox:n.asChild?void 0:"0 0 30 10",preserveAspectRatio:n.asChild?void 0:"none"}),{default:q(()=>[fe(n.$slots,"default",{},()=>[d0])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),f0={top:"bottom",right:"left",bottom:"top",left:"right"},p0=ve({inheritAttrs:!1,__name:"PopperArrow",props:{width:{},height:{},asChild:{type:Boolean},as:{default:"svg"}},setup(e){const{forwardRef:t}=pt(),n=s0(),o=L(()=>f0[n.placedSide.value]);return(r,a)=>{var i,s,l,d;return v(),w("span",{ref:u=>{E(n).onArrowChange(u)},style:jt({position:"absolute",left:(i=E(n).arrowX)!=null&&i.value?`${(s=E(n).arrowX)==null?void 0:s.value}px`:void 0,top:(l=E(n).arrowY)!=null&&l.value?`${(d=E(n).arrowY)==null?void 0:d.value}px`:void 0,[o.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[E(n).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[E(n).placedSide.value],visibility:E(n).shouldHideArrow.value?"hidden":void 0})},[N(c0,Be(r.$attrs,{ref:E(t),style:{display:"block"},as:r.as,"as-child":r.asChild,width:r.width,height:r.height}),{default:q(()=>[fe(r.$slots,"default")]),_:3},16,["as","as-child","width","height"])],4)}}}),v0=ve({__name:"VisuallyHidden",props:{asChild:{type:Boolean},as:{default:"span"}},setup(e){return pt(),(t,n)=>(v(),oe(E(Rn),{as:t.as,"as-child":t.asChild,style:jt({position:"absolute",border:0,width:"1px",display:"inline-block",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})},{default:q(()=>[fe(t.$slots,"default")]),_:3},8,["as","as-child","style"]))}});function m0(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}m0();const Hs="tooltip.open",[ua,h0]=vo("TooltipProvider"),g0=ve({__name:"TooltipProvider",props:{delayDuration:{default:700},skipDelayDuration:{default:300},disableHoverableContent:{type:Boolean,default:!1},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean,default:!1}},setup(e){const t=e,{delayDuration:n,skipDelayDuration:o,disableHoverableContent:r,disableClosingTrigger:a,ignoreNonKeyboardFocus:i,disabled:s}=xl(t);pt();const l=D(!0),d=D(!1),{start:u,stop:c}=Ls(()=>{l.value=!0},o,{immediate:!1});return h0({isOpenDelayed:l,delayDuration:n,onOpen(){c(),l.value=!1},onClose(){u()},isPointerInTransitRef:d,disableHoverableContent:r,disableClosingTrigger:a,disabled:s,ignoreNonKeyboardFocus:i}),(f,p)=>fe(f.$slots,"default")}}),[nr,y0]=vo("TooltipRoot"),b0=ve({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},delayDuration:{default:void 0},disableHoverableContent:{type:Boolean,default:void 0},disableClosingTrigger:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,default:void 0}},emits:["update:open"],setup(e,{emit:t}){const n=e,o=t;pt();const r=ua(),a=L(()=>{var $;return($=n.disableHoverableContent)!=null?$:r.disableHoverableContent.value}),i=L(()=>{var $;return($=n.disableClosingTrigger)!=null?$:r.disableClosingTrigger.value}),s=L(()=>{var $;return($=n.disabled)!=null?$:r.disabled.value}),l=L(()=>{var $;return($=n.delayDuration)!=null?$:r.delayDuration.value}),d=L(()=>{var $;return($=n.ignoreNonKeyboardFocus)!=null?$:r.ignoreNonKeyboardFocus.value}),u=Lg(n,"open",o,{defaultValue:n.defaultOpen,passive:n.open===void 0});_e(u,$=>{r.onClose&&($?(r.onOpen(),document.dispatchEvent(new CustomEvent(Hs))):r.onClose())});const c=D(!1),f=D(),p=L(()=>u.value?c.value?"delayed-open":"instant-open":"closed"),{start:g,stop:y}=Ls(()=>{c.value=!0,u.value=!0},l,{immediate:!1});function b(){y(),c.value=!1,u.value=!0}function _(){y(),u.value=!1}function k(){g()}return y0({contentId:"",open:u,stateAttribute:p,trigger:f,onTriggerChange($){f.value=$},onTriggerEnter(){r.isOpenDelayed.value?k():b()},onTriggerLeave(){a.value?_():y()},onOpen:b,onClose:_,disableHoverableContent:a,disableClosingTrigger:i,disabled:s,ignoreNonKeyboardFocus:d}),($,m)=>(v(),oe(E(n0),null,{default:q(()=>[fe($.$slots,"default")]),_:3}))}}),w0=ve({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e,n=nr(),o=ua();n.contentId||(n.contentId=Wg(void 0,"radix-vue-tooltip-content"));const{forwardRef:r,currentElement:a}=pt(),i=D(!1),s=D(!1),l=L(()=>n.disabled.value?{}:{click:y,focus:p,pointermove:c,pointerleave:f,pointerdown:u,blur:g});Se(()=>{n.onTriggerChange(a.value)});function d(){i.value=!1}function u(){i.value=!0,document.addEventListener("pointerup",d,{once:!0})}function c(b){b.pointerType!=="touch"&&!s.value&&!o.isPointerInTransitRef.value&&(n.onTriggerEnter(),s.value=!0)}function f(){n.onTriggerLeave(),s.value=!1}function p(b){var _,k;i.value||n.ignoreNonKeyboardFocus.value&&!((k=(_=b.target).matches)!=null&&k.call(_,":focus-visible"))||n.onOpen()}function g(){n.onClose()}function y(){n.disableClosingTrigger.value||n.onClose()}return(b,_)=>(v(),oe(E(o0),{"as-child":""},{default:q(()=>[N(E(Rn),Be({ref:E(r),"aria-describedby":E(n).open.value?E(n).contentId:void 0,"data-state":E(n).stateAttribute.value,as:b.as,"as-child":t.asChild},_l(l.value)),{default:q(()=>[fe(b.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3}))}}),Is=ve({__name:"TooltipContentImpl",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{default:0},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean,default:!0},collisionBoundary:{default:()=>[]},collisionPadding:{default:0},arrowPadding:{default:0},sticky:{default:"partial"},hideWhenDetached:{type:Boolean,default:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const n=e,o=t,r=nr(),{forwardRef:a}=pt(),i=Pr(),s=L(()=>{var u;return(u=i.default)==null?void 0:u.call(i)}),l=L(()=>{var u;if(n.ariaLabel)return n.ariaLabel;let c="";function f(p){typeof p.children=="string"?c+=p.children:Array.isArray(p.children)&&p.children.forEach(g=>f(g))}return(u=s.value)==null||u.forEach(p=>f(p)),c}),d=L(()=>{const f=n,{ariaLabel:u}=f;return Ue(f,["ariaLabel"])});return Se(()=>{Er(window,"scroll",u=>{const c=u.target;c!=null&&c.contains(r.trigger.value)&&r.onClose()}),Er(window,Hs,r.onClose)}),(u,c)=>(v(),oe(E(e0),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:c[0]||(c[0]=f=>o("escapeKeyDown",f)),onPointerDownOutside:c[1]||(c[1]=f=>{var p;E(r).disableClosingTrigger.value&&(p=E(r).trigger.value)!=null&&p.contains(f.target)&&f.preventDefault(),o("pointerDownOutside",f)}),onFocusOutside:c[2]||(c[2]=Gn(()=>{},["prevent"])),onDismiss:c[3]||(c[3]=f=>E(r).onClose())},{default:q(()=>[N(E(u0),Be({ref:E(a),"data-state":E(r).stateAttribute.value},K(K({},u.$attrs),d.value),{style:{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),{default:q(()=>[fe(u.$slots,"default"),N(E(v0),{id:E(r).contentId,role:"tooltip"},{default:q(()=>[ye(z(l.value),1)]),_:1},8,["id"])]),_:3},16,["data-state","style"])]),_:3}))}}),x0=ve({__name:"TooltipContentHoverable",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},setup(e){const t=Vs(e),{forwardRef:n,currentElement:o}=pt(),{trigger:r,onClose:a}=nr(),i=ua(),{isPointerInTransit:s,onPointerExit:l}=jg(r,o);return i.isPointerInTransitRef=s,l(()=>{a()}),(d,u)=>(v(),oe(Is,Be({ref:E(n)},E(t)),{default:q(()=>[fe(d.$slots,"default")]),_:3},16))}}),_0=ve({__name:"TooltipContent",props:{ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"top"},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const n=e,o=t,r=nr(),a=Vg(n,o),{forwardRef:i}=pt();return(s,l)=>E(r).open.value?(v(),oe(wn(E(r).disableHoverableContent.value?Is:x0),Be({key:0,ref:E(i)},E(a)),{default:q(()=>[fe(s.$slots,"default")]),_:3},16)):X("",!0)}}),C0=ve({__name:"TooltipArrow",props:{width:{default:10},height:{default:5},asChild:{type:Boolean},as:{default:"svg"}},setup(e){const t=e;return pt(),(n,o)=>(v(),oe(E(p0),Ct(Et(t)),{default:q(()=>[fe(n.$slots,"default")]),_:3},16))}}),O0=ve({__name:"TooltipPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(n,o)=>(v(),oe(E(Kg),Ct(Et(t)),{default:q(()=>[fe(n.$slots,"default")]),_:3},16))}}),$0={class:"rounded bg-gray-900 px-2 py-1 text-xs text-white shadow-xl"},k0=ve({inheritAttrs:!1,__name:"Tooltip",props:{text:{default:""},hoverDelay:{default:.5},placement:{default:"top"},arrowClass:{default:"fill-gray-900"},disabled:{type:Boolean,default:!1}},setup(e){const t=e,n=L(()=>t.hoverDelay*1e3);return(o,r)=>o.disabled?fe(o.$slots,"default",{key:0}):(v(),oe(E(g0),{key:1,delayDuration:n.value},{default:q(()=>[N(E(b0),null,{default:q(()=>[N(E(w0),{"as-child":""},{default:q(()=>[fe(o.$slots,"default")]),_:3}),N(E(O0),null,{default:q(()=>[t.text||o.$slots.body?(v(),oe(E(_0),{key:0,side:t.placement,"side-offset":4,class:"z-[100]"},{default:q(()=>[fe(o.$slots,"body",{},()=>[h("div",$0,[h("div",null,z(t.text),1)])]),N(E(C0),{class:de(t.arrowClass),width:8,height:4},null,8,["class"])]),_:3},8,["side"])):X("",!0)]),_:3})]),_:3})]),_:3},8,["delayDuration"]))}}),gt={doctypeFields:{},linkOptions:{},clientScripts:{}};function da(){return Q(this,null,function*(){try{return(yield(yield fetch("/api/method/frappe.auth.get_logged_user")).json()).message||null}catch(e){return console.error("Error getting current user:",e),null}})}function A0(){return Q(this,null,function*(){try{const t=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Has Role",fields:["role"],filters:{parenttype:"User",parent:yield da()}})})).json();return t.message?t.message.map(n=>n.role):[]}catch(e){return console.error("Error fetching user roles:",e),[]}})}function T0(){return Q(this,null,function*(){try{const t=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"User Permission",fields:["name","allow","for_value","apply_to_all_doctypes","applicable_for"],filters:{user:yield da()}})})).json();return t.message?t.message:[]}catch(e){return console.error("Error fetching user permissions:",e),[]}})}function E0(e){return Q(this,null,function*(){try{const n=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"DocPerm",fields:["name","role","permlevel","read","write","create","delete","submit","cancel","amend","report","import","export","print","email","share","if_owner"],filters:{parent:e}})})).json();return n.message?n.message:[]}catch(t){return console.error(`Error fetching permissions for ${e}:`,t),[]}})}function Ns(e){return Q(this,null,function*(){if(gt.doctypeFields[e])return console.log(`Using cached fields for ${e}`),gt.doctypeFields[e];try{console.log(`Fetching complete doctype information for ${e}...`);const t={fields:[],meta:null,permissions:[]},n=new Set;try{console.log(`Trying custom API for ${e}...`);const i=yield fetch("/api/method/oms.api.get_doctype_fields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e}),credentials:"include"});if(i.ok){const s=yield i.json();s&&s.message&&Array.isArray(s.message)&&(console.log(`Custom API returned ${s.message.length} fields`),s.message.forEach(l=>{l&&l.fieldname&&!n.has(l.fieldname)&&(t.fields.push(l),n.add(l.fieldname))}))}}catch(i){console.warn("Custom API failed or not available:",i)}try{console.log(`Trying resource API for ${e}...`);const i=yield fetch(`/api/resource/DocType/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(i.ok){const s=yield i.json();s&&s.data&&(console.log(`Resource API returned data for ${e}`),t.meta=s.data,s.data.fields&&Array.isArray(s.data.fields)&&s.data.fields.forEach(l=>{if(l&&l.fieldname)if(n.has(l.fieldname)){const d=t.fields.find(u=>u.fieldname===l.fieldname);d&&Object.keys(l).forEach(u=>{(d[u]===void 0||d[u]===null)&&(d[u]=l[u])})}else t.fields.push(l),n.add(l.fieldname)}))}}catch(i){console.warn("Resource API failed:",i)}try{console.log(`Trying desk form load API for ${e}...`);const i=yield fetch("/api/method/frappe.desk.form.load.getdoctype",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e}),credentials:"include"});if(i.ok){const s=yield i.json();s&&s.message&&s.message.docs&&s.message.docs[0]&&(console.log(`Form load API returned data for ${e}`),t.meta?Object.keys(s.message.docs[0]).forEach(l=>{l!=="fields"&&(t.meta[l]===void 0||t.meta[l]===null)&&(t.meta[l]=s.message.docs[0][l])}):t.meta=s.message.docs[0],s.message.perm&&(t.permissions=s.message.perm),s.message.docs[0].fields&&Array.isArray(s.message.docs[0].fields)&&s.message.docs[0].fields.forEach(l=>{if(l&&l.fieldname)if(n.has(l.fieldname)){const d=t.fields.find(u=>u.fieldname===l.fieldname);d&&Object.keys(l).forEach(u=>{(u==="description"&&l[u]||d[u]===void 0||d[u]===null)&&(d[u]=l[u])})}else t.fields.push(l),n.add(l.fieldname)}))}}catch(i){console.warn("Form load API failed:",i)}if(t.fields.length===0)try{console.log(`Trying get_doctype API for ${e}...`);const i=yield fetch("/api/method/frappe.desk.form.load.getdoctype",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e,with_parent:1}),credentials:"include"});if(i.ok){const s=yield i.json();s&&s.message&&s.message.docs&&s.message.docs[0]&&(console.log(`Get doctype API returned data for ${e}`),t.meta||(t.meta=s.message.docs[0]),s.message.docs[0].fields&&Array.isArray(s.message.docs[0].fields)&&s.message.docs[0].fields.forEach(l=>{l&&l.fieldname&&!n.has(l.fieldname)&&(t.fields.push(l),n.add(l.fieldname))}))}}catch(i){console.warn("Get doctype API failed:",i)}if(t.fields.length===0)throw new Error(`Could not fetch fields for ${e} from any API`);t.fields=t.fields.map(i=>K({fieldname:i.fieldname||"",fieldtype:i.fieldtype||"Data",label:i.label||i.fieldname||"",reqd:i.reqd||0,hidden:i.hidden||0,read_only:i.read_only||0,options:i.options||"",default:i.default||"",description:i.description||"",idx:i.idx||0,allow_in_quick_entry:i.allow_in_quick_entry||0,collapsible:i.collapsible||0},i)),t.fields.sort((i,s)=>(i.idx||0)-(s.idx||0)),gt.doctypeFields[e]=t,console.log(`Successfully merged field data for ${e} from multiple sources`),console.log(`Total fields: ${t.fields.length}`);const o=t.fields.filter(i=>i.allow_in_quick_entry===1),r=t.fields.filter(i=>i.fieldtype==="Section Break"&&i.collapsible===1),a=t.fields.filter(i=>i.description&&i.description.trim()!=="");return console.log(`Fields with allow_in_quick_entry=1: ${o.length}`),console.log(`Collapsible sections: ${r.length}`),console.log(`Fields with descriptions: ${a.length}`),t}catch(t){throw console.error("Error fetching doctype fields:",t),t}})}function S0(e){return Q(this,null,function*(){try{const n=(yield Ns(e)).fields||[],o={};for(const r of n)o[r.fieldname]=r.permlevel||0;return o}catch(t){return console.error(`Error getting field permissions for ${e}:`,t),{}}})}function D0(a){return Q(this,arguments,function*(e,t=["name"],n={},o=0,r=9999){const i=`${e}:${t.join(",")}:${JSON.stringify(n)}:${o}:${r}`;if(gt.linkOptions[i])return gt.linkOptions[i];try{const l=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e,fields:t,filters:n,start:o,limit_page_length:r})})).json();return l.message?(gt.linkOptions[i]=l.message,l.message):[]}catch(s){return console.error(`Error fetching options for ${e}:`,s),[]}})}function P0(e){return Q(this,null,function*(){if(gt.clientScripts[e])return gt.clientScripts[e];try{const n=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Client Script",fields:["name","script","dt","enabled"],filters:{dt:e,enabled:1}})})).json();return n.message?(gt.clientScripts[e]=n.message,n.message):[]}catch(t){return console.error(`Error fetching client scripts for ${e}:`,t),[]}})}function F0(e,t){return Q(this,null,function*(){try{const o=yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e,name:t})})).json();if(o.message)return o.message;throw new Error(`Document ${e} ${t} not found`)}catch(n){throw console.error(`Error fetching document ${e} ${t}:`,n),n}})}function L0(e){return Q(this,null,function*(){try{const{doctype:t,fields:n=["*"],filters:o={},orFilters:r,start:a=0,limit:i=20,orderBy:s="creation desc"}=e,l={doctype:t,fields:n,filters:o,start:a,limit_page_length:i};if(r&&r.length>0&&(l.or_filters=r),s){const[c,f]=s.split(" ");l.order_by=`${c} ${f}`}const u=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).json();if(u.message){const f=yield(yield fetch("/api/method/frappe.client.get_count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:t,filters:o})})).json();return{records:u.message,totalCount:f.message||u.message.length}}return{records:[],totalCount:0}}catch(t){throw console.error(`Error fetching document list for ${e.doctype}:`,t),t}})}function zs(e){return Q(this,null,function*(){try{const n=yield(yield fetch("/api/method/frappe.client.insert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc:e})})).json();if(n.message)return n.message;throw new Error("Failed to create document")}catch(t){throw console.error(`Error creating document ${e.doctype}:`,t),t}})}function Us(e){return Q(this,null,function*(){try{const n=yield(yield fetch("/api/method/frappe.client.save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc:e})})).json();if(n.message)return n.message;throw new Error("Failed to update document")}catch(t){throw console.error(`Error updating document ${e.doctype} ${e.name}:`,t),t}})}function M0(e,t=!1){return Q(this,null,function*(){return t?zs(e):Us(e)})}function R0(e,t){return Q(this,null,function*(){try{const n=yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e,name:t})}),o=yield n.json();if(n.ok&&(o.message==="ok"||o.message===null||o.message===void 0))return{success:!0};let r="Failed to delete document";if(o.exc_type||o.exception)if(o.exc_type==="LinkExistsError"||o.exception&&o.exception.includes("LinkExistsError"))r=o.exception||o.message||"Document is linked to other records";else if(o._server_messages)try{const a=JSON.parse(o._server_messages);Array.isArray(a)&&a.length>0&&(r=JSON.parse(a[0]).message||r)}catch(a){r=o._server_messages}else o.exception?r=o.exception:o.message&&(r=o.message);return{success:!1,error:r}}catch(n){return console.error(`Error deleting document ${e} ${t}:`,n),{success:!1,error:n.message||"Network error occurred"}}})}function qs(e){return Q(this,null,function*(){try{const t=new FormData;t.append("file",e),t.append("is_private",0);const o=yield(yield fetch("/api/method/upload_file",{method:"POST",body:t})).json();if(o.exc_type||o.exception){let r="Failed to upload file";if(o._server_messages)try{const a=JSON.parse(o._server_messages);Array.isArray(a)?r=JSON.parse(a[0]).message||r:r=a.message||r}catch(a){r=o._server_messages}else if(o.exception){const a=o.exception.match(/ValidationError: (.*?)($|\n)/);a&&a[1]&&(r=a[1])}throw console.error("Upload failed:",r),new Error(r)}if(o.message&&o.message.file_url)return console.log("File uploaded successfully:",o.message.file_url),o.message.file_url;throw new Error("Failed to upload file: No file URL returned")}catch(t){throw console.error("Error uploading file:",t),t}})}function Ws(e,t,n,o){return Q(this,null,function*(){try{if(!n||!t)throw new Error("Document name and type are required to attach a file");const i=yield(yield fetch("/api/method/frappe.client.insert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc:{doctype:"File",file_url:e,attached_to_doctype:t,attached_to_name:n,attached_to_field:o,is_private:0}})})).json();if(i.exc_type||i.exception){let s="Failed to attach file to document";if(i._server_messages)try{const l=JSON.parse(i._server_messages);Array.isArray(l)?s=JSON.parse(l[0]).message||s:s=l.message||s}catch(l){s=i._server_messages}else if(i.exception){const l=i.exception.match(/ValidationError: (.*?)($|\n)/);l&&l[1]&&(s=l[1])}throw console.error("Attachment failed:",s),new Error(s)}return i.message&&i.message.file_url?(console.log("File attached successfully:",i.message.file_url),i.message.file_url):e}catch(r){throw console.error("Error attaching file to document:",r),r}})}function V0(e,t,n,o){return Q(this,null,function*(){try{const r=yield qs(e);return o?yield Ws(r,t,o,n):r}catch(r){throw console.error("Error in uploadFile:",r),r}})}function j0(e){return Q(this,null,function*(){try{const n=yield(yield fetch("/api/method/frappe.desk.form.load.getdoctype",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e,with_parent:1})})).json();return n.message&&n.message.docs&&n.message.docs[0]?n.message.docs[0].fields||[]:[]}catch(t){return console.error(`Error fetching fields for ${e}:`,t),[]}})}function B0(o){return Q(this,arguments,function*(e,t=["name"],n={}){try{const a=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:e,fields:t,filters:n,limit_page_length:500})})).json();return a.message?a.message:[]}catch(r){return console.error(`Error fetching options for ${e}:`,r),[]}})}function H0(){gt.doctypeFields={},gt.linkOptions={},gt.clientScripts={}}const _t={getCurrentUser:da,fetchUserRoles:A0,fetchUserPermissions:T0,fetchDocPermissions:E0,fetchDoctypeFields:Ns,getFieldPermissions:S0,fetchLinkOptions:D0,fetchClientScripts:P0,fetchDocument:F0,fetchDocumentList:L0,createDocument:zs,updateDocument:Us,saveDocument:M0,deleteDocument:R0,uploadFile:V0,uploadFileToTemp:qs,attachFileToDoc:Ws,clearCache:H0,fetchChildTableFields:j0,fetchLinkOption:B0};function Eo(){return Q(this,null,function*(){try{const e=yield fetch("/api/method/frappe.auth.get_logged_user");if(!e.ok)return console.error("Error fetching current user: Response not OK"),null;const t=yield e.json();return t.message?(console.log("Current user:",t.message),t.message):null}catch(e){return console.error("Error fetching current user:",e),null}})}const I0={class:"filter-dropdown-container"},N0={class:"filter-dropdown bg-white rounded-lg shadow-lg p-3 border"},z0={key:0,class:"mb-3"},U0=["value"],q0={class:"block text-xs font-medium text-gray-700 mb-1"},W0={key:0,class:"relative"},J0=["onUpdate:modelValue","placeholder","onFocus","onInput","onBlur"],Y0={key:0,class:"absolute z-[200] mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm"},K0=["onMousedown"],X0={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4 text-blue-600"},G0={key:0,class:"py-2 px-3 text-gray-500 italic"},Q0=["onMousedown"],Z0=["onUpdate:modelValue"],ey={value:""},ty=["value"],ny={key:2,class:"flex gap-2"},oy=["onUpdate:modelValue"],ry=["onUpdate:modelValue"],ay=["onUpdate:modelValue","placeholder"],iy={class:"mb-3"},sy={class:"mb-3"},ly=["value"],uy=["value"],dy={__name:"FilterPanel",props:{statusField:{type:Object,default:null},filterableFields:{type:Array,required:!0},sortableFields:{type:Array,required:!0},linkFieldOptions:{type:Object,default:()=>({})},statusFilter:{type:String,default:""},customFilters:{type:Object,default:()=>({})},dateFilters:{type:Object,default:()=>({})},assignmentFilter:{type:String,default:""},sortOption:{type:String,default:"creation desc"}},emits:["update:statusFilter","update:customFilters","update:dateFilters","update:assignmentFilter","update:sortOption","reset","apply"],setup(e,{emit:t}){const n=e,o=t,r=D(n.statusFilter),a=D(K({},n.customFilters)),i=D(K({},n.dateFilters)),s=D(n.assignmentFilter),l=D(n.sortOption),d=D({}),u=D(null),c=D({});Se(()=>{n.filterableFields.forEach(O=>{if(O.fieldtype==="Link"&&a.value[O.fieldname]){const C=(n.linkFieldOptions[O.fieldname]||[]).find(V=>V.value===a.value[O.fieldname]);C?d.value[O.fieldname]=C.label:d.value[O.fieldname]=a.value[O.fieldname]}else d.value[O.fieldname]="";c.value[O.fieldname]=n.linkFieldOptions[O.fieldname]||[]})}),_e(()=>n.statusFilter,O=>{r.value=O}),_e(()=>n.customFilters,O=>{a.value=K({},O),n.filterableFields.forEach(A=>{if(A.fieldtype==="Link"&&O[A.fieldname]){const V=(n.linkFieldOptions[A.fieldname]||[]).find(ae=>ae.value===O[A.fieldname]);V&&(d.value[A.fieldname]=V.label)}})},{deep:!0}),_e(()=>n.dateFilters,O=>{i.value=K({},O)},{deep:!0}),_e(()=>n.assignmentFilter,O=>{s.value=O}),_e(()=>n.sortOption,O=>{l.value=O});const f=O=>{u.value=O,g(O)},p=O=>{setTimeout(()=>{u.value===O&&(u.value=null)},200)},g=O=>{const A=d.value[O]||"",C=n.linkFieldOptions[O]||[];A?c.value[O]=C.filter(V=>V.label.toLowerCase().includes(A.toLowerCase())):c.value[O]=C},y=O=>c.value[O.fieldname]||[],b=(O,A,C)=>{a.value[O]=A,d.value[O]=C,$(),u.value=null},_=O=>{a.value[O]="",d.value[O]="",$(),u.value=null},k=()=>{o("update:statusFilter",r.value)},$=()=>{o("update:customFilters",K({},a.value))},m=()=>{o("update:dateFilters",K({},i.value))},P=()=>{o("update:assignmentFilter",s.value)},T=()=>{o("update:sortOption",l.value)},j=()=>n.statusField&&n.statusField.options?n.statusField.options.split(`
`):["Open","Closed","Resolved","On Hold","Replied"],F=O=>O.options?O.options.split(`
`):[],S=()=>{r.value="",a.value={},d.value={};const O={};for(const A in i.value)O[A]={from:"",to:""};i.value=O,s.value="",l.value="creation desc",o("update:statusFilter",""),o("update:customFilters",{}),o("update:dateFilters",O),o("update:assignmentFilter",""),o("update:sortOption","creation desc"),o("reset")},x=()=>{o("update:statusFilter",r.value),o("update:customFilters",K({},a.value)),o("update:dateFilters",K({},i.value)),o("update:assignmentFilter",s.value),o("update:sortOption",l.value),o("apply")};return(O,A)=>(v(),w("div",I0,[h("div",N0,[e.statusField?(v(),w("div",z0,[A[4]||(A[4]=h("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Status",-1)),et(h("select",{"onUpdate:modelValue":A[0]||(A[0]=C=>r.value=C),class:"w-full border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:k},[A[3]||(A[3]=h("option",{value:""},"All Status",-1)),(v(!0),w(ge,null,ke(j(),C=>(v(),w("option",{key:C,value:C},z(C),9,U0))),128))],544),[[wo,r.value]])])):X("",!0),(v(!0),w(ge,null,ke(e.filterableFields,C=>(v(),w("div",{key:C.fieldname,class:"mb-3"},[h("label",q0,z(C.label),1),C.fieldtype==="Link"?(v(),w("div",W0,[et(h("input",{"onUpdate:modelValue":V=>d.value[C.fieldname]=V,type:"text",class:"w-full border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Search ${C.label}...`,onFocus:V=>f(C.fieldname),onInput:V=>g(C.fieldname),onBlur:V=>p(C.fieldname)},null,40,J0),[[zn,d.value[C.fieldname]]]),u.value===C.fieldname?(v(),w("div",Y0,[(v(!0),w(ge,null,ke(y(C),V=>(v(),w("div",{key:V.value,class:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-gray-100",onMousedown:ae=>b(C.fieldname,V.value,V.label)},[h("span",{class:de(["block truncate",{"font-semibold":a.value[C.fieldname]===V.value}])},z(V.label),3),a.value[C.fieldname]===V.value?(v(),w("span",X0,A[5]||(A[5]=[h("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[h("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):X("",!0)],40,K0))),128)),y(C).length===0?(v(),w("div",G0," No results found ")):X("",!0),h("div",{class:"py-2 px-3 text-blue-600 hover:bg-gray-100 cursor-pointer border-t",onMousedown:V=>_(C.fieldname)}," Clear selection ",40,Q0)])):X("",!0)])):C.fieldtype==="Select"?et((v(),w("select",{key:1,"onUpdate:modelValue":V=>a.value[C.fieldname]=V,class:"w-full border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:$},[h("option",ey,"All "+z(C.label),1),(v(!0),w(ge,null,ke(F(C),V=>(v(),w("option",{key:V,value:V},z(V),9,ty))),128))],40,Z0)),[[wo,a.value[C.fieldname]]]):C.fieldtype==="Date"||C.fieldtype==="Datetime"?(v(),w("div",ny,[et(h("input",{"onUpdate:modelValue":V=>i.value[C.fieldname].from=V,type:"date",class:"w-1/2 border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"From",onChange:m},null,40,oy),[[zn,i.value[C.fieldname].from]]),et(h("input",{"onUpdate:modelValue":V=>i.value[C.fieldname].to=V,type:"date",class:"w-1/2 border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"To",onChange:m},null,40,ry),[[zn,i.value[C.fieldname].to]])])):et((v(),w("input",{key:3,"onUpdate:modelValue":V=>a.value[C.fieldname]=V,type:"text",class:"w-full border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Filter by ${C.label}`,onInput:$},null,40,ay)),[[zn,a.value[C.fieldname]]])]))),128)),h("div",iy,[A[7]||(A[7]=h("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Assignment",-1)),et(h("select",{"onUpdate:modelValue":A[1]||(A[1]=C=>s.value=C),class:"w-full border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:P},A[6]||(A[6]=[h("option",{value:""},"All Records",-1),h("option",{value:"assigned_to_me"},"Assigned to Me",-1),h("option",{value:"created_by_me"},"Created by Me",-1),h("option",{value:"both"},"Both",-1)]),544),[[wo,s.value]])]),h("div",sy,[A[10]||(A[10]=h("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Sort By",-1)),et(h("select",{"onUpdate:modelValue":A[2]||(A[2]=C=>l.value=C),class:"w-full border rounded-lg py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:T},[A[8]||(A[8]=h("option",{value:"creation desc"},"Newest First",-1)),A[9]||(A[9]=h("option",{value:"creation asc"},"Oldest First",-1)),(v(!0),w(ge,null,ke(e.sortableFields,C=>(v(),w("option",{key:C.fieldname,value:`${C.fieldname} asc`},z(C.label)+" (A-Z) ",9,ly))),128)),(v(!0),w(ge,null,ke(e.sortableFields,C=>(v(),w("option",{key:`${C.fieldname}-desc`,value:`${C.fieldname} desc`},z(C.label)+" (Z-A) ",9,uy))),128))],544),[[wo,l.value]])]),h("div",{class:"flex justify-between"},[h("button",{onClick:S,class:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50"}," Reset "),h("button",{onClick:x,class:"px-3 py-1.5 text-sm bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-colors"}," Apply ")])])]))}},cy=be(dy,[["__scopeId","data-v-0009866c"]]),fy={class:"p-4"},py={class:"bg-white rounded-xl shadow-md p-3 mb-4 sticky top-0 z-10"},vy={class:"flex items-center gap-2"},my={class:"flex-1 relative"},hy=["placeholder"],gy={class:"relative"},yy={key:0,class:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center"},by={key:0,class:"flex justify-center items-center py-8"},wy={key:1,class:"bg-white rounded-xl shadow-md p-6 text-center"},xy={class:"w-16 h-16 mx-auto mb-4 rounded-full bg-blue-100 flex items-center justify-center"},_y={class:"text-gray-600 mb-4"},Cy={key:2,class:"space-y-4"},Oy=["onClick"],$y={class:"flex justify-between items-start"},ky={class:"flex-1"},Ay={class:"flex items-center space-x-2 flex-wrap gap-2"},Ty={class:"text-sm text-gray-500"},Ey={key:1,class:"flex items-center text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full"},Sy={key:2,class:"flex items-center text-gray-600 bg-gray-50 px-2 py-0.5 rounded-full"},Dy={class:"text-xs font-medium"},Py={class:"font-semibold text-gray-800 mt-1 text-lg"},Fy={class:"flex flex-wrap gap-4 mt-2"},Ly={key:3,class:"mt-6 flex justify-between items-center"},My=["disabled"],Ry={class:"text-sm text-gray-600 bg-white px-4 py-2 rounded-lg border"},Vy=["disabled"],jy={__name:"ListView",props:{doctype:{type:String,required:!0},titleField:{type:String,default:"subject"},listFields:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},showOnlyOwnRecords:{type:Boolean,default:!1}},emits:["record-click"],setup(e,{emit:t}){const n=e,o=Fr();yi();const r=D([]),a=D(!0),i=D([]);D(null);const s=D({}),l=D([]),d=D(!1),u=D(null),c=D({}),f=D({}),p=D(""),g=D(""),y=D({}),b=D({}),_=D("creation desc"),k=D(""),$=D(!1),m=D(1),P=D(20),T=D(1),j=D(0),F=D([]),S=()=>`${n.doctype.toLowerCase()}_list_state`,x=()=>{const R={searchQuery:p.value,statusFilter:g.value,customFilters:y.value,dateFilters:b.value,sortOption:_.value,assignmentFilter:k.value,currentPage:m.value};localStorage.setItem(S(),JSON.stringify(R))},O=()=>{try{const R=localStorage.getItem(S());if(R){const B=JSON.parse(R);return p.value=B.searchQuery||"",g.value=B.statusFilter||"",y.value=B.customFilters||{},b.value=B.dateFilters||{},_.value=B.sortOption||"creation desc",k.value=B.assignmentFilter||"",m.value=B.currentPage||1,!0}}catch(R){console.error("Error loading filter state:",R)}return!1},A=L(()=>n.doctype.toLowerCase().replace(/\s+/g,"-")),C=L(()=>g.value!==""||p.value!==""||k.value!==""||Object.values(y.value).some(R=>R!=="")||Object.values(b.value).some(R=>R.from||R.to)),V=L(()=>{let R=0;return g.value&&R++,p.value&&R++,k.value&&R++,R+=Object.values(y.value).filter(B=>B!=="").length,R+=Object.values(b.value).filter(B=>B.from||B.to).length,R}),ae=L(()=>i.value.find(R=>R.fieldname==="status")),ne=L(()=>i.value.filter(R=>["Data","Link","Select","Date","Datetime"].includes(R.fieldtype))),te=L(()=>i.value.filter(R=>["Data","Link","Select","Date","Datetime","Int","Float"].includes(R.fieldtype)&&!["name","creation","modified","modified_by","owner"].includes(R.fieldname)&&R.fieldname!=="status").slice(0,5)),le=L(()=>{if(n.listFields.length>0)return n.listFields.map(G=>i.value.find(xe=>xe.fieldname===G)).filter(Boolean);const R=i.value.filter(G=>G.in_list_view===1||G.in_list_view===!0||G.in_list_view==="1");if(R.length>0)return R.slice(0,4);const B=["name","title","subject","status","creation"];return i.value.filter(G=>B.includes(G.fieldname)).slice(0,3)}),me=()=>Q(this,null,function*(){try{d.value=!0,console.log(`Permission check for ${n.doctype}: canCreate = ${d.value}`);const R=yield fetch("/api/method/frappe.client.get_permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:n.doctype})});if(R.ok){const B=yield R.json();B.message&&(d.value=!0,console.log(`Direct permissions for ${n.doctype}:`,B.message))}}catch(R){console.error("Error checking permissions:",R),d.value=!0}}),he=()=>Q(this,null,function*(){try{const R=yield _t.fetchDoctypeFields(n.doctype);if(Array.isArray(R))i.value=R;else if(R&&R.fields)i.value=R.fields;else throw new Error("Invalid response format");i.value.filter(B=>B.fieldtype==="Date"||B.fieldtype==="Datetime").forEach(B=>{b.value[B.fieldname]={from:"",to:""}}),yield Ce()}catch(R){console.error("Error fetching doctype fields:",R),R.value="Failed to load doctype fields"}}),Ve=()=>Q(this,null,function*(){try{const B=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"User Permission",fields:["name","user","allow","for_value"],filters:{user:["=",yield Eo()]}})})).json();B.message&&(l.value=B.message,console.log("User permissions:",l.value))}catch(R){console.error("Error fetching user permissions:",R)}}),Ce=()=>Q(this,null,function*(){const R=[...le.value,...te.value].filter(B=>B&&B.fieldtype==="Link").reduce((B,G)=>(B.some(xe=>xe.fieldname===G.fieldname)||B.push(G),B),[]);for(const B of R)try{console.log(`Fetching options for ${B.fieldname} (${B.options})`);let G=[];B.options==="Project"?G=(yield _t.fetchLinkOptions("Project",["name","project_name"])).map(ue=>({value:ue.name,label:ue.project_name||ue.name})):B.options==="Contact"?G=(yield _t.fetchLinkOptions("Contact",["name","first_name","last_name"])).map(ue=>({value:ue.name,label:`${ue.first_name||""} ${ue.last_name||""} (${ue.name})`})):G=(yield _t.fetchLinkOptions(B.options,["name"])).map(ue=>({value:ue.name,label:ue.name})),s.value[B.fieldname]=G}catch(G){console.error(`Error fetching options for ${B.fieldname}:`,G)}}),Me=()=>Q(this,null,function*(){try{u.value||(u.value=yield Eo());const B=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"ToDo",fields:["reference_name","allocated_to"],filters:{reference_type:n.doctype,status:"Open"}})})).json();if(B.message){const G={},xe={};B.message.forEach(ue=>{ue.allocated_to===u.value&&(G[ue.reference_name]=!0),xe[ue.reference_name]=ue.allocated_to}),c.value=G,f.value=xe,console.log("Assigned records:",c.value),console.log("Assigned users:",f.value)}}catch(R){console.error("Error fetching assigned records:",R)}}),je=R=>c.value[R.name]===!0||R.allocated_to&&R.allocated_to===u.value,Ae=R=>f.value[R.name]&&f.value[R.name]!==u.value,He=R=>{const B=f.value[R.name];return B?B.substring(0,2).toUpperCase():""},Ie=()=>Q(this,null,function*(){a.value=!0;try{const R=K({},n.filters);W(R),u.value||(u.value=yield Eo()),yield Me();let B=[];if(k.value){if(k.value==="assigned_to_me"){const ue=Object.keys(c.value);ue.length>0?B.push(["name","in",ue]):B.push(["name","=","no-assignments-found"]),i.value.some(Ke=>Ke.fieldname==="allocated_to")&&B.push(["allocated_to","=",u.value])}else if(k.value==="created_by_me")B.push(["owner","=",u.value]);else if(k.value==="both"){const ue=Object.keys(c.value);ue.length>0&&B.push(["name","in",ue]),i.value.some(Ke=>Ke.fieldname==="allocated_to")&&B.push(["allocated_to","=",u.value]),B.push(["owner","=",u.value])}}else n.showOnlyOwnRecords&&u.value&&(B.push(["owner","=",u.value]),i.value.some(ce=>ce.fieldname==="allocated_to")&&B.push(["allocated_to","=",u.value]),Object.keys(c.value).length>0&&B.push(["name","in",Object.keys(c.value)]));g.value&&(R.status=g.value);for(const[ue,ce]of Object.entries(y.value))ce&&(R[ue]=ce);for(const[ue,ce]of Object.entries(b.value))ce.from&&ce.to?R[ue]=["between",[ce.from,ce.to]]:ce.from?R[ue]=[">=",ce.from]:ce.to&&(R[ue]=["<=",ce.to]);let G=[];if(p.value.trim()){const ue=p.value.trim();G.push([n.doctype,"name","like",`%${ue}%`]),G.push([n.doctype,n.titleField,"like",`%${ue}%`])}console.log("Fetching all records with filters:",R),console.log("OR filters:",B);const xe=yield _t.fetchDocumentList({doctype:n.doctype,fields:["*"],filters:R,orFilters:B.length>0?B:G.length>0?G:void 0,limit:1e3,orderBy:_.value});F.value=xe.records,j.value=xe.records.length,T.value=Math.ceil(j.value/P.value),console.log(`Fetched ${F.value.length} total records. Pages: ${T.value}`),I(),x()}catch(R){console.error(`Error fetching ${n.doctype} records:`,R),R.value=`Failed to load ${n.doctype} records`}finally{a.value=!1}}),I=()=>{const R=(m.value-1)*P.value,B=Math.min(R+P.value,F.value.length);console.log(`Updating displayed records for page ${m.value}, start: ${R}, end: ${B}`),r.value=F.value.slice(R,B),console.log(`Displaying ${r.value.length} records for page ${m.value}`)},W=R=>{const B=l.value.filter(G=>G.allow===n.doctype);if(B.length>0){const G={};for(const xe of B){const ue=i.value.filter(ce=>ce.fieldtype==="Link"&&ce.options===xe.allow);for(const ce of ue)G[ce.fieldname]||(G[ce.fieldname]=[]),G[ce.fieldname].push(xe.for_value)}for(const[xe,ue]of Object.entries(G))ue.length===1?R[xe]=ue[0]:R[xe]=["in",ue]}},M=R=>R[n.titleField]||R.name||"Untitled",ee=R=>{switch(R.toLowerCase()){case"open":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-green-100 text-green-800";case"resolved":return"bg-blue-100 text-blue-800";case"on hold":case"hold":return"bg-orange-100 text-orange-800";case"replied":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},re=R=>{if(!R)return ma;switch(R.fieldname){case"project":return Ml;case"priority":return Ll;case"custom_raised_by_contact":case"raised_by":case"allocated_to":return Dl;case"creation":case"modified":return Pl;case"status":return Bl;case"company":return Sl;case"custom_raised_by_mobile":return El;case"email":return Tl;default:return ma}},$e=R=>R?R.label||R.fieldname:"",at=(R,B)=>{if(!R||!B)return"";const G=R[B.fieldname];return G==null?"":B.fieldtype==="Link"&&R[`${B.fieldname}_data`]?R[`${B.fieldname}_data`].label||G:B.fieldtype==="Date"||B.fieldtype==="Datetime"?it(G):G},it=R=>R?new Date(R).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",We=R=>{x(),o.push(`/${A.value}/${R.name}`)},U=()=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{if(m.value=1,p.value.trim()){const R=p.value.trim().toLowerCase(),B=F.value.filter(G=>G.name.toLowerCase().includes(R)||G[n.titleField]&&G[n.titleField].toLowerCase().includes(R));r.value=B.slice(0,P.value),j.value=B.length,T.value=Math.ceil(j.value/P.value)}else I();x()},300)},J=()=>{g.value="",_.value="creation desc",p.value="",y.value={},k.value="";for(const R in b.value)b.value[R]={from:"",to:""};$.value=!1,m.value=1,localStorage.removeItem(S()),Ie()},Y=()=>{$.value=!1,m.value=1,Ie()},Z=()=>{m.value>1&&(m.value--,I(),x())},ie=()=>{m.value<T.value&&(m.value++,I(),x())},ze=R=>{const B=document.querySelector(".filter-dropdown"),G=document.querySelector(".filter-toggle-btn");$.value&&B&&!B.contains(R.target)&&!G.contains(R.target)&&($.value=!1)};return Se(()=>Q(this,null,function*(){console.log(`ListView component mounted for ${n.doctype}`);try{u.value=yield Eo(),yield me(),yield he(),yield Ve();const R=O();console.log(`Filter state loaded: ${R}`),yield Me(),yield Ie()}catch(R){console.error("Error initializing component:",R),R.value="Failed to initialize component"}document.addEventListener("click",ze)})),_e(_,()=>{m.value=1,Ie()}),_e(()=>n.doctype,()=>Q(this,null,function*(){a.value=!0,i.value=[],r.value=[],F.value=[],m.value=1,localStorage.removeItem(S());try{yield me(),yield he(),yield Ve(),yield Me(),yield Ie()}catch(R){console.error("Error when doctype changed:",R)}finally{a.value=!1}})),_e(()=>n.filters,()=>{m.value=1,Ie()},{deep:!0}),qo(()=>{x()}),ct(()=>{document.removeEventListener("click",ze)}),(R,B)=>(v(),w("div",fy,[h("div",py,[h("div",vy,[h("div",my,[et(h("input",{"onUpdate:modelValue":B[0]||(B[0]=G=>p.value=G),type:"text",placeholder:`Search ${e.doctype}...`,class:"w-full pl-8 pr-2 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:U},null,40,hy),[[zn,p.value]]),N(E(Vl),{class:"h-4 w-4 text-gray-400 absolute left-2 top-2.5"})]),h("div",gy,[h("button",{onClick:B[1]||(B[1]=G=>$.value=!$.value),class:de(["p-2 border rounded-lg hover:bg-gray-50 relative filter-toggle-btn",{"bg-blue-50 border-blue-300":C.value}])},[N(E(Rl),{class:de(["h-5 w-5",C.value?"text-blue-600":"text-gray-600"])},null,8,["class"]),C.value?(v(),w("span",yy,z(V.value),1)):X("",!0)],2),$.value?(v(),oe(cy,{key:0,"status-field":ae.value,"filterable-fields":te.value,"sortable-fields":ne.value,"link-field-options":s.value,"status-filter":g.value,"custom-filters":y.value,"date-filters":b.value,"assignment-filter":k.value,"sort-option":_.value,"onUpdate:statusFilter":B[2]||(B[2]=G=>g.value=G),"onUpdate:customFilters":B[3]||(B[3]=G=>y.value=G),"onUpdate:dateFilters":B[4]||(B[4]=G=>b.value=G),"onUpdate:assignmentFilter":B[5]||(B[5]=G=>k.value=G),"onUpdate:sortOption":B[6]||(B[6]=G=>_.value=G),onReset:J,onApply:Y},null,8,["status-field","filterable-fields","sortable-fields","link-field-options","status-filter","custom-filters","date-filters","assignment-filter","sort-option"])):X("",!0)]),d.value?(v(),w("button",{key:0,onClick:B[7]||(B[7]=G=>R.$router.push(`/${A.value}/new`)),class:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg flex items-center hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-md"},[N(E(jl),{class:"h-5 w-5 mr-1"}),B[9]||(B[9]=ye(" New "))])):X("",!0)])]),a.value?(v(),w("div",by,B[10]||(B[10]=[h("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):r.value.length===0?(v(),w("div",wy,[h("div",xy,[N(E(Fl),{class:"h-8 w-8 text-blue-600"})]),h("p",_y,"No "+z(e.doctype)+" found",1),d.value?(v(),w("button",{key:0,onClick:B[8]||(B[8]=G=>R.$router.push(`/${A.value}/new`)),class:"mt-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-md"}," Create New "+z(e.doctype),1)):X("",!0)])):(v(),w("div",Cy,[(v(!0),w(ge,null,ke(r.value,G=>(v(),w("div",{key:G.name,onClick:xe=>We(G),class:"bg-white rounded-xl shadow-md p-4 cursor-pointer hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 border border-transparent hover:border-blue-100"},[h("div",$y,[h("div",ky,[h("div",Ay,[h("span",Ty,z(G.name),1),G.status?(v(),w("div",{key:0,class:de([ee(G.status),"px-2 py-0.5 rounded-full text-xs font-medium"])},z(G.status),3)):X("",!0),je(G)?(v(),w("div",Ey,[N(E(ha),{class:"h-4 w-4 mr-1"}),B[11]||(B[11]=h("span",{class:"text-xs font-medium"},"Assigned to me",-1))])):Ae(G)?(v(),w("div",Sy,[N(E(ha),{class:"h-4 w-4 mr-1"}),h("span",Dy,z(He(G)),1)])):X("",!0)]),h("h3",Py,z(M(G)),1),h("div",Fy,[(v(!0),w(ge,null,ke(le.value,(xe,ue)=>(v(),w("div",{key:ue,class:"flex items-center text-sm text-gray-500"},[(v(),oe(wn(re(xe)),{class:"h-4 w-4 mr-1 text-blue-500"})),h("span",null,z($e(xe))+": "+z(at(G,xe)),1)]))),128))])])])],8,Oy))),128))])),T.value>1?(v(),w("div",Ly,[h("button",{onClick:Z,disabled:m.value===1,class:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-gray-50 transition-colors flex items-center"},B[12]||(B[12]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ye(" Previous ")]),8,My),h("span",Ry," Page "+z(m.value)+" of "+z(T.value),1),h("button",{onClick:ie,disabled:m.value===T.value,class:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-gray-50 transition-colors flex items-center"},B[13]||(B[13]=[ye(" Next "),h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,Vy)])):X("",!0)]))}},By={key:0,class:"ml-1 text-gray-400 hover:text-gray-600 cursor-help group relative"},Hy={class:"absolute hidden group-hover:block bg-black text-white text-xs rounded p-2 z-50 w-48 -mt-1 ml-4 shadow-lg"},Iy=["innerHTML"],Ny={__name:"FieldDescription",props:{description:{type:String,default:""}},setup(e){return(t,n)=>e.description?(v(),w("span",By,[n[0]||(n[0]=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),h("div",Hy,[h("span",{innerHTML:e.description},null,8,Iy)])])):X("",!0)}},vr=be(Ny,[["__scopeId","data-v-4f9367fa"]]),Tt={global:["naming_series","section_break_19","email_account","via_customer_portal","subject_section"],doctypes:{Issue:["avg_response_time","total_hold_time","lead","first_response_time","user_resolution_time","opening_date","opening_time","resolution_time","agreement_status","service_level_agreement","response_by","resolution_by","response_by_variance","resolution_by_variance","on_hold_since","total_hold_time","user","customer_name","service_level_section","issue_split_from","contact","resolution_details","response","first_responded_on","additional_info","custom_qc_count","custom_qc_rework_count","custom_client_rework_count","custom_client_change_count_","sla_resolution_by","customer","custom_issue_tracker","company"],Task:["sb_depends_on","depends_on","depends_on_tasks","sb_actual","act_start_date","act_end_date","actual_time","sb_costing","total_costing_amount","total_billing_amount","total_expense_claim","sb_more_info","review_date","closing_date","department","custom_custom_title","custom_development_complete","custom_section_break_ixk4k","custom_development_checklist","custom_section_break_5sqth","custom_development_note","custom_qc_date","custom_qc_template","custom_tester","custom_qc_complete","custom_section_break_n3cef","custom_qc_check","custom_section_break_qrtn3","custom_quality_control_notes","tna_base_document_no","tna_planner","tna_status","custom_tna_end_date","completed_by","completed_on","start","duration","is_milestone","custom_section_break_iahoa","custom_task_resource","custom_total_amount"],Timesheet:["sales_invoice","salary_slip","start_date","end_date","total_billed_hours","total_billed_amount","base_total_billable_amount","base_total_billed_amount","base_total_costing_amount","per_billed","section_break_18","note","company","customer","exchange_rate","currency"],"Timesheet Detail":["billing_hours","billing_rate","billing_amount","base_billing_rate","base_billing_amount","costing_rate","costing_amount","base_costing_rate","base_costing_amount","weightage","project_name","is_billable","sales_invoice"]},additional:[]},No=e=>{const t=[...Tt.global,...Tt.additional];if(e)if(Tt.doctypes[e])t.push(...Tt.doctypes[e]);else{const n=Object.keys(Tt.doctypes).find(o=>o.toLowerCase()===e.toLowerCase());n&&t.push(...Tt.doctypes[n])}return t};[...Tt.global,...Tt.doctypes.Issue||[],...Tt.doctypes.Task||[],...Tt.doctypes.TimeSheet||[]];const zy={class:"mb-6"},Uy={class:"flex items-center mb-2"},qy={class:"block text-sm font-medium text-gray-700"},Wy={key:0,class:"text-red-500"},Jy={key:0,class:"flex justify-center items-center py-4 bg-white rounded-lg border border-gray-200"},Yy={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4"},Ky={key:2,class:"bg-white rounded-lg border border-gray-200 p-4 text-center"},Xy={class:"flex flex-col items-center justify-center py-6"},Gy={class:"text-gray-500 mb-4"},Qy={key:3,class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Zy={class:"flex items-center justify-between p-4 border-b border-gray-200"},eb={class:"text-lg font-medium text-gray-900"},tb={class:"overflow-x-auto"},nb={class:"min-w-full divide-y divide-gray-200"},ob={class:"bg-gray-50"},rb={class:"bg-white divide-y divide-gray-200"},ab=["onClick"],ib={key:0,class:"flex items-center"},sb={key:0,class:"text-blue-600"},lb={key:1,class:"text-gray-400 italic"},ub={key:0},db={key:1,class:"text-gray-400 italic"},cb={key:0,class:"whitespace-pre-line max-h-20 overflow-y-auto"},fb={key:1,class:"text-gray-400 italic"},pb={key:0,class:"flex items-center"},vb={key:1,class:"text-gray-400 italic"},mb={key:0,class:"font-medium"},hb={key:1,class:"text-gray-400 italic"},gb={key:0},yb={key:1,class:"text-gray-400 italic"},bb={class:"flex justify-end space-x-2"},wb={class:"text-lg font-medium text-gray-900"},xb={key:0},_b={key:1},Cb={key:2},Ob={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$b={key:0,class:"col-span-1 md:col-span-2 border-t border-gray-200 pt-6 mt-2"},kb={key:0,class:"text-base font-medium text-gray-900 mb-4"},Ab={key:1,class:"hidden md:block"},Tb={class:"block text-sm font-medium text-gray-700 mb-1"},Eb={key:0,class:"text-red-500"},Sb={key:2,class:"flex items-center"},Db={class:"text-sm text-gray-700"},Pb=3,Fb={__name:"ChildTableComponent",props:{modelValue:{type:Array,default:()=>[]},fieldname:{type:String,required:!0},label:{type:String,required:!0},description:{type:String,default:""},required:{type:Boolean,default:!1},isReadOnly:{type:Boolean,default:!1},childDoctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},debug:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=t,r=Ge("formData",D({})),a=D([]),i=D(!0),s=D(!1),l=D({}),d=D(-1),u=D("add"),c=D({}),f=D([]),p=D([]),g=D({}),y=D(null),b=D(null),_=D(!1),k=D({}),$=D(0),m=L(()=>{const I=No(n.childDoctype),W=["name","owner","creation","modified","modified_by","docstatus","idx","parent","parentfield","parenttype"];return a.value.filter(M=>!M.hidden&&M.fieldtype!=="Section Break"&&M.fieldtype!=="Column Break"&&M.fieldtype!=="HTML"&&M.fieldtype!=="Button"&&!W.includes(M.fieldname)&&!I.includes(M.fieldname))}),P=L(()=>{const I=No(n.childDoctype),W=["name","owner","creation","modified","modified_by","docstatus","idx","parent","parentfield","parenttype"];return a.value.filter(M=>!W.includes(M.fieldname)).filter(M=>!I.includes(M.fieldname)).sort((M,ee)=>(M.idx||0)-(ee.idx||0))}),T=L(()=>{const I=m.value.filter(W=>W.in_list_view===!0||W.in_list_view===1||W.in_list_view==="1");return I.length===0?m.value.slice(0,5):I}),j=()=>Q(this,null,function*(){var I;try{$.value++;const M=yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"DocType",name:n.childDoctype}),credentials:"include"})).json();a.value=((I=M.message)==null?void 0:I.fields)||[],a.value.sort((ee,re)=>(ee.idx||0)-(re.idx||0))}catch(W){if(console.error("Error fetching fields:",W),$.value<Pb)return yield j();W.value=`Could not fetch fields for ${n.childDoctype}`,a.value=[]}}),F=()=>Q(this,null,function*(){var W;const I=a.value.filter(M=>M.fieldtype==="Link");for(const M of I)try{if(!M.options)continue;if(M.options==="Task"){f.value=yield S();continue}if(M.options==="Issue"){p.value=yield x();continue}const $e=((W=(yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"DocType",name:M.options,fields:["title_field"]}),credentials:"include"})).json()).message)==null?void 0:W.title_field)||"name",at=["name",$e],it=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:M.options,fields:at,limit_page_length:0}),credentials:"include"});if(it.ok){const We=yield it.json();c.value[M.fieldname]=We.message.map(U=>({value:U.name,label:U[$e]||U.name,description:U.name}))}else{const We=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:M.options,fields:["name"],limit_page_length:0}),credentials:"include"});if(We.ok){const U=yield We.json();c.value[M.fieldname]=U.message.map(J=>({value:J.name,label:J.name,description:J.name}))}}}catch(ee){console.error(`Error fetching options for ${M.fieldname}:`,ee),c.value[M.fieldname]=[]}}),S=(I=null)=>Q(this,null,function*(){try{const ee=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Task",fields:["name","subject","project"],filters:I?{project:I}:{},limit_page_length:0}),credentials:"include"});return ee.ok?(yield ee.json()).message.map($e=>({value:$e.name,label:$e.subject||$e.name,description:$e.name,project:$e.project})):[]}catch(W){return console.error("Error fetching tasks:",W),[]}}),x=(I=null)=>Q(this,null,function*(){try{const ee=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"Issue",fields:["name","subject","project"],filters:I?{project:I}:{},limit_page_length:0}),credentials:"include"});return ee.ok?(yield ee.json()).message.map($e=>({value:$e.name,label:$e.subject||$e.name,description:$e.name,project:$e.project})):[]}catch(W){return console.error("Error fetching issues:",W),[]}}),O=I=>{if(I.options==="Task"){const ee=l.value.project||r.value.project;return ee?f.value.filter(re=>re.project===ee):f.value}if(I.options==="Issue"){const ee=l.value.project||r.value.project;return ee?p.value.filter(re=>re.project===ee):p.value}const W=c.value[I.fieldname]||[],M=g.value[I.fieldname]||"";return M?W.filter(ee=>ee.label.toLowerCase().includes(M.toLowerCase())||ee.value.toLowerCase().includes(M.toLowerCase())||ee.description&&ee.description.toLowerCase().includes(M.toLowerCase())):W},A=(I,W)=>Q(this,null,function*(){if(g.value[I.fieldname]=W,(I.options==="Task"||I.options==="Issue")&&(l.value.project||r.value.project)){const M=l.value.project||r.value.project;I.options==="Task"?f.value=yield S(M):I.options==="Issue"&&(p.value=yield x(M))}}),C=(I,W)=>{l.value[I.fieldname]=W},V=I=>{var W;return((W=I.options)==null?void 0:W.split(`
`).filter(Boolean))||[]},ae=I=>I===!0||I===1||I==="1"||I==="Yes",ne=I=>{const W={};return I.fieldtype==="Check"?W.width="80px":I.fieldtype==="Int"||I.fieldtype==="Float"?W.width="100px":I.fieldtype==="Date"||I.fieldtype==="Color"?W.width="120px":I.fieldtype==="Small Text"&&(W.minWidth="200px"),W},te=(I,W)=>{if(!W)return"";if(I.options==="Task"){const re=f.value.find($e=>$e.value===W);return re?re.label:W}if(I.options==="Issue"){const re=p.value.find($e=>$e.value===W);return re?re.label:W}const ee=(c.value[I.fieldname]||[]).find(re=>re.value===W);return ee?ee.label:W},le=I=>{if(!I)return"";try{return new Date(I).toLocaleDateString()}catch(W){return I}},me=I=>{try{return parseFloat(I).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}catch(W){return I}},he=I=>n.isReadOnly||I.read_only===1||I.read_only===!0||I.read_only==="1",Ve=I=>{I&&(I.preventDefault(),I.stopPropagation()),l.value={},g.value={},a.value.forEach(W=>{W.fieldtype==="Check"?l.value[W.fieldname]=!1:W.default?l.value[W.fieldname]=W.default:l.value[W.fieldname]=""}),l.value.parentfield=n.fieldname,l.value.parenttype=n.parentDoctype,delete l.value.parent,delete l.value.name,r.value.project&&(l.value.project=r.value.project),d.value=-1,u.value="add",s.value=!0},Ce=I=>{l.value=JSON.parse(JSON.stringify(n.modelValue[I])),d.value=I,u.value="view",s.value=!0},Me=()=>{u.value="edit"},je=()=>Q(this,null,function*(){_.value=!0,k.value={};try{let I=!1;if(P.value.forEach(ee=>{ee.reqd&&!l.value[ee.fieldname]&&(k.value[ee.fieldname]=`${ee.label} is required`,I=!0)}),I)throw new Error("Please fill in all required fields");P.value.forEach(ee=>{if(["Int","Float","Currency","Percent"].includes(ee.fieldtype)){const re=l.value[ee.fieldname];re!=null&&re!==""&&(l.value[ee.fieldname]=parseFloat(re))}});const W=[...n.modelValue||[]],M=K({},l.value);delete M.parent,u.value==="edit"?W[d.value]=M:W.push(M),o("update:modelValue",W),o("change",W),He()}catch(I){console.error("Error saving row:",I)}finally{_.value=!1}}),Ae=I=>{if(confirm("Are you sure you want to delete this entry?")){const W=[...n.modelValue];W.splice(I,1),o("update:modelValue",W),o("change",W)}},He=()=>{s.value=!1,l.value={},d.value=-1,g.value={},y.value=null,k.value={}},Ie=()=>Q(this,null,function*(){i.value=!0,b.value=null,$.value=0;try{yield j(),yield F()}catch(I){b.value=I.message||"Failed to load child table fields"}finally{i.value=!1}});return _e(()=>l.value.project,I=>Q(this,null,function*(){if(!s.value)return;const W=a.value.find(ee=>ee.fieldtype==="Link"&&ee.options==="Task"),M=a.value.find(ee=>ee.fieldtype==="Link"&&ee.options==="Issue");W&&(f.value=yield S(I)),M&&(p.value=yield x(I))})),Se(()=>Q(this,null,function*(){try{i.value=!0,yield j(),yield F()}catch(I){b.value=I.message||"Failed to load child table fields"}finally{i.value=!1}})),_e(()=>n.childDoctype,()=>Q(this,null,function*(){i.value=!0,a.value=[],c.value={},f.value=[],p.value=[],$.value=0,b.value=null;try{yield j(),yield F()}catch(I){console.error("Error when childDoctype changed:",I)}finally{i.value=!1}})),(I,W)=>(v(),w("div",zy,[h("div",Uy,[h("label",qy,[ye(z(e.label)+" ",1),e.required?(v(),w("span",Wy,"*")):X("",!0)]),e.description?(v(),oe(E(k0),{key:0,text:e.description,class:"ml-1"},{default:q(()=>[N(E(Fe),{name:"help-circle",class:"h-4 w-4 text-gray-400"})]),_:1},8,["text"])):X("",!0)]),i.value?(v(),w("div",Jy,[N(E(Fe),{name:"loader",class:"h-6 w-6 animate-spin text-blue-600"})])):b.value?(v(),w("div",Yy,[h("p",null,z(b.value),1),N(E(Ee),{onClick:Ie,variant:"ghost",size:"sm",theme:"red",class:"mt-2"},{default:q(()=>W[2]||(W[2]=[ye(" Retry ")])),_:1})])):(e.modelValue||[]).length===0?(v(),w("div",Ky,[h("div",Xy,[N(E(Fe),{name:"file-text",class:"h-12 w-12 text-gray-300 mb-2"}),h("p",Gy,"No "+z(e.label.toLowerCase())+" added yet",1),e.isReadOnly?X("",!0):(v(),oe(E(Ee),{key:0,onClick:Ve,variant:"solid",size:"sm"},{default:q(()=>[N(E(Fe),{name:"plus",class:"h-4 w-4 mr-2"}),ye(" Add "+z(e.label),1)]),_:1}))])])):(v(),w("div",Qy,[h("div",Zy,[h("h3",eb,z(e.label),1),e.isReadOnly?X("",!0):(v(),oe(E(Ee),{key:0,onClick:Gn(Ve,["stop"]),variant:"solid",size:"sm"},{default:q(()=>[N(E(Fe),{name:"plus",class:"h-4 w-4 mr-1"}),W[3]||(W[3]=ye(" Add "))]),_:1}))]),h("div",tb,[h("table",nb,[h("thead",ob,[h("tr",null,[(v(!0),w(ge,null,ke(T.value,M=>(v(),w("th",{key:M.fieldname,class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",style:jt(ne(M))},z(M.label),5))),128)),W[4]||(W[4]=h("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24 sticky right-0 bg-gray-50"}," Actions ",-1))])]),h("tbody",rb,[(v(!0),w(ge,null,ke(e.modelValue,(M,ee)=>(v(),w("tr",{key:ee,class:"hover:bg-gray-50 cursor-pointer",onClick:re=>Ce(ee)},[(v(!0),w(ge,null,ke(T.value,re=>(v(),w("td",{key:re.fieldname,class:"px-4 py-3 text-sm text-gray-900",style:jt(ne(re))},[re.fieldtype==="Check"?(v(),w("div",ib,[N(E(xr),{modelValue:ae(M[re.fieldname]),disabled:!0},null,8,["modelValue"])])):re.fieldtype==="Link"?(v(),w(ge,{key:1},[M[re.fieldname]?(v(),w("span",sb,z(te(re,M[re.fieldname])),1)):(v(),w("span",lb,"—"))],64)):re.fieldtype==="Date"||re.fieldtype==="Datetime"?(v(),w(ge,{key:2},[M[re.fieldname]?(v(),w("span",ub,z(le(M[re.fieldname])),1)):(v(),w("span",db,"—"))],64)):re.fieldtype==="Small Text"?(v(),w(ge,{key:3},[M[re.fieldname]?(v(),w("div",cb,z(M[re.fieldname]),1)):(v(),w("span",fb,"—"))],64)):re.fieldtype==="Color"?(v(),w(ge,{key:4},[M[re.fieldname]?(v(),w("div",pb,[h("div",{class:"h-4 w-4 rounded mr-1",style:jt({backgroundColor:M[re.fieldname]})},null,4),h("span",null,z(M[re.fieldname]),1)])):(v(),w("span",vb,"—"))],64)):re.fieldtype==="Currency"||re.fieldtype==="Float"?(v(),w(ge,{key:5},[M[re.fieldname]!==void 0&&M[re.fieldname]!==null&&M[re.fieldname]!==""?(v(),w("span",mb,z(me(M[re.fieldname])),1)):(v(),w("span",hb,"—"))],64)):(v(),w(ge,{key:6},[M[re.fieldname]!==void 0&&M[re.fieldname]!==null&&M[re.fieldname]!==""?(v(),w("span",gb,z(M[re.fieldname]),1)):(v(),w("span",yb,"—"))],64))],4))),128)),h("td",{class:"px-4 py-3 text-sm text-right whitespace-nowrap sticky right-0 bg-white",onClick:W[0]||(W[0]=Gn(()=>{},["stop"]))},[h("div",bb,[N(E(Ee),{onClick:re=>Ae(ee),variant:"ghost",size:"sm",theme:"red"},{default:q(()=>[N(E(Fe),{name:"trash-2",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])],8,ab))),128))])])])])),N(E(Ro),{modelValue:s.value,"onUpdate:modelValue":W[1]||(W[1]=M=>s.value=M),size:"2xl"},{"body-title":q(()=>[h("h3",wb,[u.value==="view"?(v(),w("span",xb,"View")):u.value==="edit"?(v(),w("span",_b,"Edit")):(v(),w("span",Cb,"Add")),ye(" "+z(e.label),1)])]),"body-content":q(()=>[h("div",Ob,[(v(!0),w(ge,null,ke(P.value,M=>(v(),w(ge,{key:M.fieldname},[M.fieldtype==="Section Break"?(v(),w("div",$b,[M.label?(v(),w("h4",kb,z(M.label),1)):X("",!0)])):M.fieldtype==="Column Break"?(v(),w("div",Ab)):(v(),w("div",{key:2,class:de(["col-span-1",{"md:col-span-2":M.fieldtype==="Text Editor"||M.fieldtype==="Long Text"||M.fieldtype==="Small Text"}])},[h("label",Tb,[ye(z(M.label)+" ",1),M.reqd?(v(),w("span",Eb,"*")):X("",!0)]),M.fieldtype==="Link"?(v(),oe(E(Mo),{key:0,options:O(M),modelValue:te(M,l.value[M.fieldname]),placeholder:`Select ${M.label}`,disabled:u.value==="view"||he(M),"onUpdate:modelValue":ee=>C(M,ee),"onUpdate:query":ee=>A(M,ee),class:"w-full"},null,8,["options","modelValue","placeholder","disabled","onUpdate:modelValue","onUpdate:query"])):M.fieldtype==="Select"?(v(),oe(E(ns),{key:1,options:V(M),modelValue:l.value[M.fieldname],placeholder:`Select ${M.label}`,disabled:u.value==="view"||he(M),"onUpdate:modelValue":ee=>l.value[M.fieldname]=ee,class:"w-full"},null,8,["options","modelValue","placeholder","disabled","onUpdate:modelValue"])):M.fieldtype==="Check"?(v(),w("div",Sb,[N(E(xr),{modelValue:l.value[M.fieldname],disabled:u.value==="view"||he(M),"onUpdate:modelValue":ee=>l.value[M.fieldname]=ee,class:"mr-2"},null,8,["modelValue","disabled","onUpdate:modelValue"]),h("span",Db,z(M.label),1)])):M.fieldtype==="Date"?(v(),oe(E(Vt),{key:3,type:"date",modelValue:l.value[M.fieldname],placeholder:`Select ${M.label}`,disabled:u.value==="view"||he(M),"onUpdate:modelValue":ee=>l.value[M.fieldname]=ee,class:"w-full"},null,8,["modelValue","placeholder","disabled","onUpdate:modelValue"])):M.fieldtype==="Datetime"?(v(),oe(E(ts),{key:4,modelValue:l.value[M.fieldname],placeholder:`Select ${M.label}`,disabled:u.value==="view"||he(M),"onUpdate:modelValue":ee=>l.value[M.fieldname]=ee,class:"w-full"},null,8,["modelValue","placeholder","disabled","onUpdate:modelValue"])):M.fieldtype==="Text Editor"?(v(),oe(E(Os),{key:5,content:l.value[M.fieldname]||"",placeholder:`Enter ${M.label}`,editable:u.value!=="view"&&!he(M),onChange:ee=>l.value[M.fieldname]=ee,class:"w-full"},null,8,["content","placeholder","editable","onChange"])):["Long Text","Small Text"].includes(M.fieldtype)?(v(),oe(E(Vt),{key:6,type:"textarea",modelValue:l.value[M.fieldname],placeholder:`Enter ${M.label}`,disabled:u.value==="view"||he(M),rows:M.fieldtype==="Long Text"?4:2,"onUpdate:modelValue":ee=>l.value[M.fieldname]=ee,class:"w-full"},null,8,["modelValue","placeholder","disabled","rows","onUpdate:modelValue"])):(v(),oe(E(Vt),{key:7,modelValue:l.value[M.fieldname],placeholder:`Enter ${M.label}`,disabled:u.value==="view"||he(M),"onUpdate:modelValue":ee=>l.value[M.fieldname]=ee,class:"w-full"},null,8,["modelValue","placeholder","disabled","onUpdate:modelValue"])),k.value[M.fieldname]?(v(),oe(E(qr),{key:8,message:k.value[M.fieldname],class:"mt-1"},null,8,["message"])):X("",!0)],2))],64))),128))])]),actions:q(()=>[N(E(Ee),{onClick:He,variant:"outline",class:"mr-2"},{default:q(()=>[ye(z(u.value==="view"?"Close":"Cancel"),1)]),_:1}),u.value==="view"?(v(),oe(E(Ee),{key:0,onClick:Me,variant:"solid"},{default:q(()=>W[5]||(W[5]=[ye(" Edit ")])),_:1})):u.value!=="view"?(v(),oe(E(Ee),{key:1,onClick:je,variant:"solid",loading:_.value},{default:q(()=>[ye(z(u.value==="edit"?"Update":"Add"),1)]),_:1},8,["loading"])):X("",!0)]),_:1},8,["modelValue"])]))}},Lb=be(Fb,[["__scopeId","data-v-32d810cc"]]),Mb=["data-fieldname"],Rb={class:"text-lg font-semibold text-gray-900 flex items-center"},Vb={key:1,class:"column-break"},jb={key:2,class:"field-wrapper"},Bb={key:3,class:"text-editor-wrapper"},Hb={key:5,class:"flex items-center"},Ib={key:9,class:"file-upload-field"},Nb={key:0,class:"mb-3"},zb={key:0,class:"relative inline-block"},Ub=["src"],qb={key:1,class:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border"},Wb={class:"flex items-center"},Jb={class:"text-sm text-gray-700 font-medium"},Yb={key:1,class:"file-upload-area"},Kb=["accept"],Xb={class:"text-sm text-gray-600"},Gb={class:"text-xs text-gray-500 mt-1"},Qb={key:10,class:"table-field"},Zb={__name:"FormField",props:{fieldtype:String,fieldname:String,modelValue:[String,Number,Boolean,Array,Object],default:[String,Number,Boolean,Array,Object],label:String,description:String,options:[String,Array],linkFilters:Object,documentList:Array,readOnly:[Boolean,Number],reqd:[Boolean,Number],hidden:{type:[Boolean,Number],default:!1},errorMessage:String,minDate:String,maxDate:String,maxLength:Number,addSectionPadding:{type:Boolean,default:!0},collapsible:{type:Boolean,default:!1},parentCollapsedSections:{type:Object,default:()=>({})},currentSectionName:{type:String,default:""}},emits:["update:modelValue","file-upload","file-remove","link-search","section-toggle"],setup(e,{emit:t}){const n=e,o=t,r=Ge("linkFieldOptions",D({})),a=D(null),i=D(!1),s=D(null),l=D(""),d=L(()=>!n.hidden),u=L(()=>["Int","Float","Currency","Percent"].includes(n.fieldtype));L(()=>["Section Break","Column Break"].includes(n.fieldtype));const c=L(()=>!!n.readOnly),f=L(()=>!!n.errorMessage),p=L(()=>n.fieldtype==="Section Break"||n.fieldtype==="Column Break"?!1:n.currentSectionName&&n.parentCollapsedSections[n.currentSectionName]),g=L(()=>n.fieldtype==="Link"&&n.fieldname?r.value[n.fieldname]||[]:[]),y=L(()=>n.fieldtype==="Select"&&n.options?(typeof n.options=="string"?n.options.split(`
`):n.options).map(x=>({label:x,value:x})):[]),b=()=>{switch(n.fieldtype){case"Email":return"email";case"Password":return"password";case"Phone":return"tel";case"URL":return"url";default:return"text"}},_=L(()=>n.fieldtype==="Link"&&n.modelValue&&g.value.find(S=>S.value===n.modelValue)||null),k=S=>{o("update:modelValue",(S==null?void 0:S.value)||S)},$=S=>{o("link-search",{fieldname:n.fieldname,query:S})},m=()=>{i.value=!i.value,o("section-toggle",{fieldname:n.fieldname,collapsed:i.value})},P=()=>{a.value&&a.value.click()},T=S=>{const x=S.target.files[0];if(!x)return;const O=5*1024*1024;if(x.size>O){o("error","File size must be less than 5MB");return}if(n.fieldtype==="Attach Image"&&!x.type.startsWith("image/")){o("error","Please upload an image file");return}if(n.fieldtype==="Attach Image"){const A=new FileReader;A.onload=C=>{s.value=C.target.result},A.readAsDataURL(x)}l.value=x.name,o("file-upload",{file:x,fieldname:n.fieldname})},j=()=>{s.value=null,l.value="",o("file-remove",n.fieldname),o("update:modelValue",null)},F=()=>{n.modelValue!==void 0&&n.modelValue!==null||(n.default?n.fieldtype==="Check"?o("update:modelValue",n.default==="1"||n.default===!0):n.fieldtype==="Date"&&n.default==="Today"?o("update:modelValue",new Date().toISOString().split("T")[0]):u.value?o("update:modelValue",parseFloat(n.default||0)):o("update:modelValue",n.default):n.fieldtype==="Check"?o("update:modelValue",!1):n.fieldtype==="Table"?o("update:modelValue",[]):o("update:modelValue",""))};return Se(()=>{(n.modelValue===void 0||n.modelValue===null||n.modelValue==="")&&F(),n.fieldtype==="Section Break"&&n.collapsible&&(i.value=!0)}),(S,x)=>d.value?(v(),w("div",{key:0,class:"field-container","data-fieldname":e.fieldname},[e.fieldtype==="Section Break"?(v(),w("div",{key:0,class:de(["section-break",{"mt-6":e.addSectionPadding}])},[e.label?(v(),w("div",{key:0,class:de(["section-header",{"cursor-pointer hover:bg-gray-100 p-3 rounded-lg":e.collapsible}]),onClick:x[0]||(x[0]=O=>e.collapsible?m():null)},[h("h3",Rb,[e.collapsible?(v(),oe(E(Fe),{key:0,name:"chevron-down",class:de(["h-5 w-5 mr-2 text-blue-600 transition-transform duration-200",{"transform rotate-180":i.value}])},null,8,["class"])):X("",!0),ye(" "+z(e.label),1)]),N(vr,{description:e.description},null,8,["description"])],2)):X("",!0)],2)):e.fieldtype==="Column Break"?(v(),w("div",Vb)):p.value?X("",!0):(v(),w("div",jb,[["Check"].includes(e.fieldtype)?X("",!0):(v(),w("label",{key:0,class:de(["block text-sm font-medium text-gray-700 mb-2",{"after:content-['*'] after:text-red-500 after:ml-1":e.reqd}])},[ye(z(e.label)+" ",1),N(vr,{description:e.description},null,8,["description"])],2)),e.fieldtype==="Link"?(v(),oe(E(Mo),{key:1,options:g.value,modelValue:_.value,placeholder:`Select ${e.label}`,disabled:c.value,"onUpdate:modelValue":k,"onUpdate:query":$,class:"w-full"},null,8,["options","modelValue","placeholder","disabled"])):e.fieldtype==="Select"?(v(),oe(E(Mo),{key:2,options:y.value,modelValue:e.modelValue,placeholder:`Select ${e.label}`,disabled:c.value,"onUpdate:modelValue":x[1]||(x[1]=O=>o("update:modelValue",(O==null?void 0:O.value)||O)),class:"w-full"},null,8,["options","modelValue","placeholder","disabled"])):e.fieldtype==="Text Editor"?(v(),w("div",Bb,[N(E(Os),{content:e.modelValue||"",placeholder:`Write ${e.label.toLowerCase()}...`,editable:!c.value,onChange:x[2]||(x[2]=O=>o("update:modelValue",O)),"editor-class":"prose-sm min-h-[8rem] border-0 p-3","bubble-menu":!0,"fixed-menu":!0,"starterkit-options":{heading:{levels:[2,3,4]}}},null,8,["content","placeholder","editable"])])):["Long Text","Small Text","Text"].includes(e.fieldtype)?(v(),oe(E(Vt),{key:4,type:"textarea",value:e.modelValue,placeholder:`Enter ${e.label}`,disabled:c.value,rows:e.fieldtype==="Long Text"?6:3,onInput:x[3]||(x[3]=O=>o("update:modelValue",O)),class:"w-full"},null,8,["value","placeholder","disabled","rows"])):e.fieldtype==="Check"?(v(),w("div",Hb,[N(E(Vt),{type:"checkbox",value:e.modelValue,disabled:c.value,onInput:x[4]||(x[4]=O=>o("update:modelValue",O)),class:"mr-2"},null,8,["value","disabled"]),h("label",{class:de(["text-sm font-medium text-gray-700",{"after:content-['*'] after:text-red-500 after:ml-1":e.reqd}])},[ye(z(e.label)+" ",1),N(vr,{description:e.description},null,8,["description"])],2)])):e.fieldtype==="Date"?(v(),oe(E(Vt),{key:6,type:"date",value:e.modelValue,placeholder:`Select ${e.label}`,disabled:c.value,min:e.minDate,max:e.maxDate,onInput:x[5]||(x[5]=O=>o("update:modelValue",O)),class:"w-full"},null,8,["value","placeholder","disabled","min","max"])):e.fieldtype==="Datetime"?(v(),oe(E(ts),{key:7,value:e.modelValue,placeholder:`Select ${e.label}`,disabled:c.value,"onUpdate:modelValue":x[6]||(x[6]=O=>o("update:modelValue",O)),class:"w-full"},null,8,["value","placeholder","disabled"])):u.value?(v(),oe(E(Vt),{key:8,type:"number",value:e.modelValue,placeholder:`Enter ${e.label}`,disabled:c.value,step:e.fieldtype==="Int"?"1":"0.01",onInput:x[7]||(x[7]=O=>o("update:modelValue",O)),class:"w-full"},null,8,["value","placeholder","disabled","step"])):["Attach","Attach Image"].includes(e.fieldtype)?(v(),w("div",Ib,[s.value?(v(),w("div",Nb,[e.fieldtype==="Attach Image"?(v(),w("div",zb,[h("img",{src:s.value,alt:"Preview",class:"h-32 w-auto rounded-lg object-cover border shadow-sm"},null,8,Ub),c.value?X("",!0):(v(),oe(E(Ee),{key:0,variant:"ghost",size:"sm",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",onClick:j},{default:q(()=>[N(E(Fe),{name:"x",class:"h-4 w-4"})]),_:1}))])):(v(),w("div",qb,[h("div",Wb,[N(E(Fe),{name:"file",class:"h-6 w-6 text-gray-500 mr-3"}),h("span",Jb,z(l.value),1)]),c.value?X("",!0):(v(),oe(E(Ee),{key:0,variant:"ghost",size:"sm",class:"text-red-500 hover:text-red-600",onClick:j},{default:q(()=>[N(E(Fe),{name:"x",class:"h-4 w-4"})]),_:1}))]))])):X("",!0),!s.value&&!c.value?(v(),w("div",Yb,[h("input",{ref_key:"fileInputRef",ref:a,type:"file",accept:e.fieldtype==="Attach Image"?"image/*":"*",onChange:T,class:"hidden"},null,40,Kb),h("div",{class:de(["border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer",{"border-red-500":f.value}]),onClick:P},[N(E(Fe),{name:"upload",class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),h("div",Xb,[x[10]||(x[10]=h("span",{class:"font-medium text-blue-600 hover:text-blue-500"},"Upload a file",-1)),x[11]||(x[11]=h("span",null," or drag and drop",-1)),h("p",Gb,z(e.fieldtype==="Attach Image"?"PNG, JPG, GIF up to 5MB":"Any file type up to 5MB"),1)])],2)])):X("",!0)])):e.fieldtype==="Table"?(v(),w("div",Qb,[N(Lb,{modelValue:e.modelValue||[],fieldname:e.fieldname,label:e.label,description:e.description,required:e.reqd,isReadOnly:c.value,childDoctype:e.options,"onUpdate:modelValue":x[8]||(x[8]=O=>o("update:modelValue",O))},null,8,["modelValue","fieldname","label","description","required","isReadOnly","childDoctype"])])):(v(),oe(E(Vt),{key:11,type:b(),value:e.modelValue,placeholder:`Enter ${e.label}`,disabled:c.value,maxlength:e.maxLength||140,onInput:x[9]||(x[9]=O=>o("update:modelValue",O)),class:"w-full"},null,8,["type","value","placeholder","disabled","maxlength"])),e.errorMessage?(v(),oe(E(qr),{key:12,message:e.errorMessage,class:"mt-1"},null,8,["message"])):X("",!0)]))],8,Mb)):X("",!0)}},ai=be(Zb,[["__scopeId","data-v-de2d4260"]]),e1={class:"flex flex-col gap-3 py-4"},t1={class:"file-select"},n1={class:"select-button cursor-pointer"},o1={class:"flex flex-col w-full border shadow-sm items-center rounded p-3 gap-2"},r1={key:0,class:"w-full"},a1={class:"w-full flex flex-col items-center gap-2"},i1={class:"flex flex-row items-center justify-between text-gray-700 text-sm"},s1=["onClick"],l1={class:"font-bold"},u1={class:"flex flex-row gap-4"},d1={__name:"FileUploaderView",props:{modelValue:{type:Array,required:!0,default:()=>[]}},emits:["handle-file-select","handle-file-delete"],setup(e,{emit:t}){const n=t,o=D(!1),r=D(null);function a(d){console.log("Preview file:",d)}function i(d){r.value=d,o.value=!0}function s(){n("handle-file-delete",r.value),l()}function l(){o.value=!1,r.value=null}return(d,u)=>(v(),w("div",e1,[h("label",t1,[u[3]||(u[3]=h("h2",{class:"text-base font-semibold text-gray-800 pb-4"},"Attachments",-1)),h("div",n1,[h("div",o1,[N(E(Fe),{name:"upload",class:"h-6 w-6 text-gray-700"}),u[2]||(u[2]=h("span",{class:"block text-sm font-normal leading-5 text-gray-700"}," Upload images or documents ",-1))]),h("input",{class:"hidden",ref:"input",type:"file",multiple:"",accept:"*",onChange:u[0]||(u[0]=c=>n("handle-file-select",c))},null,544)])]),e.modelValue.length?(v(),w("div",r1,[h("ul",a1,[(v(!0),w(ge,null,ke(e.modelValue,c=>(v(),w("li",{class:"bg-gray-100 rounded p-2 w-full",key:c.file_name||c.name},[h("div",i1,[h("span",{class:"grow",onClick:f=>a(c)},z(c.file_name||c.name),9,s1),N(E(Fe),{name:"x",class:"h-4 w-4 cursor-pointer text-gray-700",onClick:()=>i(c)},null,8,["onClick"])])]))),128))]),r.value?(v(),oe(E(Ro),{key:0,modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=c=>o.value=c)},{"body-title":q(()=>u[4]||(u[4]=[h("h2",{class:"text-lg font-bold"},"Delete Attachment",-1)])),"body-content":q(()=>[h("p",null,[u[5]||(u[5]=ye(" Are you sure you want to delete the attachment ")),h("span",l1,z(r.value.file_name),1),u[6]||(u[6]=ye("? "))])]),actions:q(()=>[h("div",u1,[N(E(Ee),{variant:"outline",class:"py-5 w-full",onClick:l},{default:q(()=>u[7]||(u[7]=[ye(" Cancel ")])),_:1}),N(E(Ee),{variant:"solid",theme:"red",onClick:s,class:"py-5 w-full"},{default:q(()=>u[8]||(u[8]=[ye(" Delete ")])),_:1})])]),_:1},8,["modelValue"])):X("",!0)])):X("",!0)]))}},c1={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-0 sm:p-4"},f1={class:"bg-white w-full sm:max-w-md sm:rounded-lg overflow-hidden animate-slide-up sm:animate-fade-in"},p1={class:"flex justify-between items-center border-b px-4 py-3 bg-gradient-to-r from-blue-50 to-white"},v1={class:"text-lg font-medium text-gray-900"},m1={class:"px-4 py-4 space-y-4 max-h-[70vh] overflow-y-auto"},h1={class:"flex items-center p-3 bg-blue-50 rounded-lg"},g1={key:0,class:"flex items-center ml-3"},y1={class:"h-8 w-8 rounded-full overflow-hidden flex items-center justify-center bg-blue-600 text-white mr-2"},b1=["src","alt"],w1={key:1,class:"text-sm font-medium"},x1={class:"text-sm font-medium text-gray-700 truncate max-w-[100px]"},_1={class:"grid grid-cols-3 gap-2"},C1={class:"bg-gray-50 px-4 py-4 flex gap-3"},O1={__name:"AssignmentDialog",props:{doctype:{type:String,required:!0},docname:{type:String,required:!0}},emits:["assignment-added","assignment-error"],setup(e,{emit:t}){const n=e,o=t,r=D(!1),a=D(!1),i=D(""),s=D([]),l=D(null),d=D(!1),u=D(""),c=D([]),f=D({doctype:n.doctype,name:n.docname,assign_to:"",description:"",priority:"Medium",complete_by:""}),p=L(()=>i.value?c.value.filter(A=>A.label.toLowerCase().includes(i.value.toLowerCase())):c.value),g=L(()=>f.value.assign_to!==""),y=()=>Q(this,null,function*(){r.value=!0,_(),yield k(),yield Promise.all([S(),x()]),$()}),b=()=>{r.value=!1,_()},_=()=>{a.value=!1,i.value="",f.value={doctype:n.doctype,name:n.docname,assign_to:"",description:"",priority:"Medium",complete_by:""}},k=()=>Q(this,null,function*(){try{const C=yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:n.doctype,name:n.docname,fields:["name","title","subject"]})})).json();if(C.message){const V=C.message;u.value=V.title||V.subject||V.name||n.docname}}catch(A){console.error("Error fetching document title:",A),u.value=n.docname}}),$=()=>{const A=u.value||n.docname;f.value.description=`Please review this ${n.doctype}: ${A}`},m=A=>{a.value=A,a.value&&l.value?(f.value.assign_to=l.value.value,i.value=l.value.fullName?`${l.value.fullName} (${l.value.userId})`:l.value.userId):(f.value.assign_to="",i.value="")},P=A=>{typeof A=="string"?f.value.assign_to=A:A&&A.value&&(f.value.assign_to=A.value,i.value=A.fullName?`${A.fullName} (${A.userId})`:A.userId)},T=A=>{if(!A)return"";if(A.includes("@"))return A.substring(0,2).toUpperCase();const C=A.split(" ");return C.length===1?C[0].charAt(0).toUpperCase():(C[0].charAt(0)+C[C.length-1].charAt(0)).toUpperCase()},j=(A,C)=>{A.target.style.display="none",C&&(C.image=null)},F=A=>A?A.startsWith("/private/")?`/api/method/frappe.utils.file_manager.get_file?private=1&file=${encodeURIComponent(A)}`:A:null,S=()=>Q(this,null,function*(){try{const C=yield(yield fetch("/api/method/frappe.auth.get_logged_user")).json();if(C.message){const ae=yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"User",name:C.message,fields:["name","full_name","user_image"]})})).json();if(ae.message){const ne=ae.message;l.value={value:ne.name,label:ne.full_name?`${ne.full_name} (${ne.name})`:ne.name,fullName:ne.full_name||"",userId:ne.name,image:ne.user_image?F(ne.user_image):null}}}}catch(A){console.error("Error fetching current user:",A)}}),x=()=>Q(this,null,function*(){try{const C=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"User",fields:["name","full_name","user_image"],filters:{enabled:1},limit_page_length:0})})).json();C.message&&(c.value=C.message.map(V=>({value:V.name,label:V.full_name?`${V.full_name} (${V.name})`:V.name,fullName:V.full_name||"",userId:V.name,image:V.user_image?F(V.user_image):null})),s.value=c.value)}catch(A){console.error("Error fetching users:",A),c.value=[],s.value=[]}}),O=()=>Q(this,null,function*(){var A,C;if(g.value)try{d.value=!0;const ae=yield(yield fetch("/api/method/frappe.desk.form.assign_to.add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assign_to:[f.value.assign_to],doctype:n.doctype,name:n.docname,description:f.value.description,priority:f.value.priority,date:f.value.complete_by||null})})).json();if(ae.message){const ne={name:ae.message.name||Date.now().toString(),allocated_to:f.value.assign_to,allocated_to_fullname:((A=c.value.find(te=>te.value===f.value.assign_to))==null?void 0:A.fullName)||f.value.assign_to,user_image:((C=c.value.find(te=>te.value===f.value.assign_to))==null?void 0:C.image)||null,description:f.value.description,priority:f.value.priority,date:f.value.complete_by||null};o("assignment-added",ne),b()}else throw new Error("Failed to create assignment")}catch(V){console.error("Error creating assignment:",V),o("assignment-error",V.message||"Failed to create assignment")}finally{d.value=!1}});return _e(()=>n.doctype,A=>{f.value.doctype=A}),_e(()=>n.docname,A=>{f.value.name=A}),(A,C)=>(v(),w("div",null,[N(E(Ee),{onClick:y,variant:"outline",size:"sm",class:"text-blue-600 border-blue-600 hover:bg-blue-50"},{prefix:q(()=>C[7]||(C[7]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),default:q(()=>[C[8]||(C[8]=ye(" Assign "))]),_:1}),r.value?(v(),w("div",c1,[h("div",f1,[h("div",p1,[h("h3",v1,"Assign "+z(e.doctype),1),N(E(Ee),{onClick:b,variant:"ghost",size:"sm"},{default:q(()=>C[9]||(C[9]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:1})]),h("div",m1,[h("div",h1,[N(E($o),{type:"checkbox","model-value":a.value,size:"sm",variant:"subtle","onUpdate:modelValue":m,class:"flex"},{label:q(()=>C[10]||(C[10]=[h("span",{class:"text-gray-700 font-medium"},"Assign to me",-1)])),_:1},8,["model-value"]),a.value&&l.value?(v(),w("div",g1,[h("div",y1,[l.value.image?(v(),w("img",{key:0,src:l.value.image,alt:l.value.label,class:"h-full w-full object-cover",onError:C[0]||(C[0]=V=>j(V,l.value))},null,40,b1)):(v(),w("span",w1,z(T(l.value.label)),1))]),h("span",x1,z(l.value.fullName||l.value.userId),1)])):X("",!0)]),h("div",null,[N(E($o),{type:"autocomplete","model-value":f.value.assign_to,options:p.value,placeholder:"Search users...",disabled:a.value,size:"sm",variant:"subtle","onUpdate:modelValue":P,"onUpdate:query":C[1]||(C[1]=V=>i.value=V)},{label:q(()=>C[11]||(C[11]=[ye(" Assign To "),h("span",{class:"text-red-500"},"*",-1)])),_:1},8,["model-value","options","disabled"])]),h("div",null,[N(E($o),{type:"date","model-value":f.value.complete_by,size:"sm",variant:"subtle","onUpdate:modelValue":C[2]||(C[2]=V=>f.value.complete_by=V)},{label:q(()=>C[12]||(C[12]=[ye(" Complete By ")])),_:1},8,["model-value"])]),h("div",null,[C[16]||(C[16]=h("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Priority",-1)),h("div",_1,[N(E(Ee),{onClick:C[3]||(C[3]=V=>f.value.priority="Low"),variant:f.value.priority==="Low"?"solid":"outline",size:"sm",class:de(["text-sm font-medium",f.value.priority==="Low"?"bg-green-600 text-white":"text-green-700 border-green-300"])},{default:q(()=>C[13]||(C[13]=[ye(" Low ")])),_:1},8,["variant","class"]),N(E(Ee),{onClick:C[4]||(C[4]=V=>f.value.priority="Medium"),variant:f.value.priority==="Medium"?"solid":"outline",size:"sm",class:de(["text-sm font-medium",f.value.priority==="Medium"?"bg-yellow-600 text-white":"text-yellow-700 border-yellow-300"])},{default:q(()=>C[14]||(C[14]=[ye(" Medium ")])),_:1},8,["variant","class"]),N(E(Ee),{onClick:C[5]||(C[5]=V=>f.value.priority="High"),variant:f.value.priority==="High"?"solid":"outline",size:"sm",class:de(["text-sm font-medium",f.value.priority==="High"?"bg-red-600 text-white":"text-red-700 border-red-300"])},{default:q(()=>C[15]||(C[15]=[ye(" High ")])),_:1},8,["variant","class"])])]),h("div",null,[N(E($o),{type:"textarea","model-value":f.value.description,rows:3,size:"sm",variant:"subtle",placeholder:"Add a comment...","onUpdate:modelValue":C[6]||(C[6]=V=>f.value.description=V)},{label:q(()=>C[17]||(C[17]=[ye(" Comment ")])),_:1},8,["model-value"])])]),h("div",C1,[N(E(Ee),{onClick:b,variant:"outline",class:"flex-1"},{default:q(()=>C[18]||(C[18]=[ye(" Cancel ")])),_:1}),N(E(Ee),{onClick:O,variant:"solid",class:"flex-1",disabled:!g.value||d.value,loading:d.value},{default:q(()=>[ye(z(d.value?"Assigning...":"Assign"),1)]),_:1},8,["disabled","loading"])])])])):X("",!0)]))}},$1=be(O1,[["__scopeId","data-v-3f638477"]]),k1={class:"assignment-list"},A1={key:0,class:"flex justify-center items-center py-1"},T1={key:1},E1={key:0,class:"text-gray-500 text-xs italic"},S1={key:1,class:"flex flex-wrap gap-1"},D1=["onClick","title"],P1={class:"h-6 w-6 rounded-full overflow-hidden flex items-center justify-center bg-blue-600 text-white border border-white shadow-sm"},F1=["src","alt","onError"],L1={key:1,class:"text-xs font-medium"},M1=["title"],R1=["data-popup-id"],V1={class:"flex items-center justify-between mb-2"},j1={class:"flex items-center min-w-0 flex-1"},B1={class:"h-8 w-8 rounded-full overflow-hidden flex items-center justify-center bg-blue-600 text-white mr-2 flex-shrink-0"},H1=["src","alt","onError"],I1={key:1,class:"text-xs font-medium"},N1={class:"font-medium text-blue-700 text-sm truncate"},z1=["onClick"],U1={class:"text-xs text-gray-600 space-y-1"},q1={key:0,class:"truncate"},W1={key:1},J1={class:"flex items-center"},Y1={__name:"AssignmentList",props:{doctype:{type:String,required:!0},docname:{type:String,required:!0}},emits:["assignment-removed","assignment-error"],setup(e,{expose:t,emit:n}){const o=e,r=n,a=D([]),i=D(!0),s=D(null),l=D(null),d=D(null),u=()=>Q(this,null,function*(){if(!(!o.doctype||!o.docname))try{i.value=!0;const S=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"ToDo",fields:["name","allocated_to","owner","description","priority","date","status"],filters:{reference_type:o.doctype,reference_name:o.docname,status:"Open"}})})).json();if(S.message){const O=S.message.map(A=>Q(this,null,function*(){try{const V=yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"User",name:A.allocated_to,fields:["name","full_name","user_image"]})})).json();return V.message&&(A.allocated_to_fullname=V.message.full_name||A.allocated_to,A.user_image=V.message.user_image?g(V.message.user_image):null),A}catch(C){return console.error("Error fetching user details:",C),A}}));a.value=yield Promise.all(O)}else a.value=[]}catch(F){console.error("Error fetching assignments:",F),a.value=[]}finally{i.value=!1}}),c=F=>s.value&&F.allocated_to===s.value,f=(F,S)=>{F.target.style.display="none",S&&(S.user_image=null)},p=F=>{if(!F)return;const S=a.value.findIndex(x=>x.allocated_to===F.allocated_to);S>=0?a.value[S]=K(K({},a.value[S]),F):a.value.push(F)},g=F=>F?F.startsWith("/private/")?`/api/method/frappe.utils.file_manager.get_file?private=1&file=${encodeURIComponent(F)}`:F:null,y=F=>{if(!F)return"";if(F.includes("@"))return F.substring(0,2).toUpperCase();const S=F.split(" ");return S.length===1?S[0].charAt(0).toUpperCase():(S[0].charAt(0)+S[S.length-1].charAt(0)).toUpperCase()},b=F=>{if(!F)return"No due date";const S=new Date(F),x=new Date,O=new Date(x);return O.setDate(O.getDate()+1),S.toDateString()===x.toDateString()?"Today":S.toDateString()===O.toDateString()?"Tomorrow":S.toLocaleDateString("en-US",{month:"short",day:"numeric"})},_=()=>Q(this,null,function*(){try{const S=yield(yield fetch("/api/method/frappe.auth.get_logged_user")).json();S.message&&(s.value=S.message)}catch(F){console.error("Error fetching current user:",F)}}),k=F=>s.value&&(F.owner===s.value||F.allocated_to===s.value),$=F=>Q(this,null,function*(){try{if((yield(yield fetch("/api/method/frappe.client.set_value",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"ToDo",name:F,fieldname:"status",value:"Cancelled"})})).json()).message)a.value=a.value.filter(O=>O.name!==F),r("assignment-removed",F),l.value=null;else throw new Error("Failed to remove assignment")}catch(S){console.error("Error removing assignment:",S),r("assignment-error",S.message||"Failed to remove assignment")}}),m=F=>window.innerWidth<640?{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"calc(100vw - 2rem)",maxWidth:"300px"}:{top:"100%",left:"0",marginTop:"8px"},P=F=>{l.value===F.name?l.value=null:l.value=F.name},T=F=>{l.value&&!F.target.closest(".assignment-list")&&(l.value=null)};_e([()=>o.doctype,()=>o.docname],()=>{u()});const j=F=>{F.detail&&F.detail.doctype===o.doctype&&F.detail.docname===o.docname&&p(F.detail.assignment)};return Se(()=>{_(),u(),document.addEventListener("click",T),window.addEventListener("assignment-added",j)}),ct(()=>{document.removeEventListener("click",T),window.removeEventListener("assignment-added",j)}),t({addAssignment:p,removeAssignment:$,fetchAssignments:u}),(F,S)=>(v(),w("div",k1,[i.value?(v(),w("div",A1,S[0]||(S[0]=[h("div",{class:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"},null,-1)]))):(v(),w("div",T1,[a.value.length===0?(v(),w("div",E1," No assignments ")):(v(),w("div",S1,[(v(!0),w(ge,null,ke(a.value,x=>(v(),w("div",{key:x.name,class:"relative"},[h("div",{onClick:O=>P(x),class:"cursor-pointer transition-transform hover:scale-110",title:c(x)?"You":x.allocated_to_fullname||x.allocated_to},[h("div",P1,[x.user_image?(v(),w("img",{key:0,src:x.user_image,alt:c(x)?"You":x.allocated_to_fullname||x.allocated_to,class:"h-full w-full object-cover",onError:O=>f(O,x)},null,40,F1)):(v(),w("span",L1,z(y(x.allocated_to_fullname||x.allocated_to)),1))]),h("div",{class:de(["absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full border border-white",{"bg-red-500":x.priority==="High","bg-yellow-500":x.priority==="Medium","bg-green-500":x.priority==="Low"}]),title:`Priority: ${x.priority}`},null,10,M1)],8,D1),l.value===x.name?(v(),w("div",{key:0,ref_for:!0,ref_key:"popupRef",ref:d,"data-popup-id":x.name,class:"fixed bg-white rounded-lg shadow-lg z-50 w-64 p-3 border",style:jt(m())},[h("div",V1,[h("div",j1,[h("div",B1,[x.user_image?(v(),w("img",{key:0,src:x.user_image,alt:c(x)?"You":x.allocated_to_fullname,class:"h-full w-full object-cover",onError:O=>f(O,x)},null,40,H1)):(v(),w("span",I1,z(y(x.allocated_to_fullname)),1))]),h("div",N1,z(c(x)?"You":x.allocated_to_fullname),1)]),k(x)?(v(),w("button",{key:0,onClick:O=>$(x.name),class:"text-gray-400 hover:text-red-500 ml-2 p-1 flex-shrink-0",title:"Remove assignment"},S[1]||(S[1]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,z1)):X("",!0)]),h("div",U1,[x.description?(v(),w("div",q1,[S[2]||(S[2]=h("span",{class:"font-medium"},"Comment:",-1)),ye(" "+z(x.description),1)])):X("",!0),x.date?(v(),w("div",W1,[S[3]||(S[3]=h("span",{class:"font-medium"},"Due:",-1)),ye(" "+z(b(x.date)),1)])):X("",!0),h("div",J1,[S[4]||(S[4]=h("span",{class:"font-medium mr-1"},"Priority:",-1)),h("div",{class:de(["px-2 py-0.5 rounded-full text-xs",{"bg-red-100 text-red-800":x.priority==="High","bg-yellow-100 text-yellow-800":x.priority==="Medium","bg-green-100 text-green-800":x.priority==="Low"}])},z(x.priority),3)])])],12,R1)):X("",!0)]))),128))]))]))]))}},K1=be(Y1,[["__scopeId","data-v-9ac4caf2"]]),X1={class:"space-y-3"},G1={key:0,class:"text-center py-8 text-gray-500"},Q1=["onClick"],Z1={class:"flex justify-between items-start"},ew={class:"flex-1 min-w-0"},tw={class:"flex items-center mb-2"},nw={class:"font-medium text-gray-900 truncate"},ow={key:0,class:"text-sm text-gray-700 mb-2 truncate"},rw={class:"flex items-center text-xs text-gray-500 space-x-4"},aw={key:1},iw={class:"ml-4 flex-shrink-0"},sw={__name:"ConnectedRecords",props:{doctype:{type:String,required:!0},records:{type:Array,default:()=>[]}},emits:["navigate-to-record"],setup(e){const t=o=>o?new Date(o).toLocaleDateString():"",n=o=>({Open:"blue","In Progress":"yellow",Completed:"green",Closed:"gray",Cancelled:"red",Draft:"gray",Submitted:"blue",Approved:"green",Rejected:"red"})[o]||"gray";return(o,r)=>(v(),w("div",X1,[e.records.length===0?(v(),w("div",G1,[N(E(Fe),{name:"file-text",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),h("p",null,"No connected "+z(e.doctype)+" records found",1)])):X("",!0),(v(!0),w(ge,null,ke(e.records,a=>(v(),w("div",{key:a.name,class:"bg-gray-50 p-4 rounded-lg border hover:shadow-md transition-shadow cursor-pointer",onClick:i=>o.$emit("navigate-to-record",e.doctype,a.name)},[h("div",Z1,[h("div",ew,[h("div",tw,[N(E(Fe),{name:"file-text",class:"h-4 w-4 mr-2 text-blue-600 flex-shrink-0"}),h("h4",nw,z(a.name),1)]),a.title||a.subject?(v(),w("div",ow,z(a.title||a.subject),1)):X("",!0),h("div",rw,[a.status?(v(),oe(E(kc),{key:0,label:a.status,theme:n(a.status),class:"text-xs"},null,8,["label","theme"])):X("",!0),h("span",null,"Created: "+z(t(a.creation)),1),a.modified!==a.creation?(v(),w("span",aw," Modified: "+z(t(a.modified)),1)):X("",!0)])]),h("div",iw,[N(E(Fe),{name:"chevron-right",class:"h-5 w-5 text-gray-400"})])])],8,Q1))),128))]))}},lw={class:"min-h-screen bg-gray-50"},uw={class:"fixed top-0 left-0 right-0 z-30 bg-white shadow-sm border-b"},dw={class:"px-4 py-3"},cw={class:"flex items-center justify-between"},fw={class:"flex items-center min-w-0 flex-1"},pw={class:"text-lg font-semibold text-gray-900 truncate"},vw={key:0,class:"flex items-center gap-2 ml-3"},mw={key:0,class:"mt-3"},hw={class:"border-b border-gray-200"},gw={class:"-mb-px flex space-x-8 overflow-x-auto"},yw=["onClick"],bw={class:"text-xl font-bold"},ww={class:"space-y-4 max-h-[60vh] overflow-y-auto"},xw={class:"flex gap-3"},_w={key:0,class:"pb-20"},Cw={key:0},Ow={key:0,class:"mx-4 mt-4 bg-white rounded-lg p-4 shadow-sm border"},$w={class:"flex items-center justify-between"},kw={class:"flex items-center space-x-2 min-w-0 flex-1"},Aw={key:1,class:"mx-4 mt-4 bg-white rounded-lg shadow-sm border"},Tw={class:"p-4 border-b"},Ew={class:"text-lg font-medium text-gray-900 flex items-center"},Sw={class:"text-sm text-gray-600 mt-1"},Dw={class:"p-4"},Pw={class:"space-y-4"},Fw={class:"font-medium text-gray-700 mb-3 flex items-center"},Lw={class:"space-y-2"},Mw=["onClick"],Rw={class:"flex justify-between items-center"},Vw={class:"flex items-center min-w-0 flex-1"},jw={class:"min-w-0 flex-1"},Bw={class:"font-medium text-gray-900 truncate"},Hw={key:0,class:"text-sm text-gray-600 truncate"},Iw={key:0,class:"text-center"},Nw={class:"mx-4 mt-4 bg-white rounded-lg shadow-sm border"},zw={class:"p-4 md:p-6"},Uw={class:"space-y-6"},qw={key:1,class:"mt-6"},Ww={key:1,class:"mx-4 mt-4"},Jw={key:0,class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-20"},Yw={class:"p-4 pb-safe"},Kw={class:"flex gap-3 max-w-md mx-auto"},Xw={key:0,class:"mb-4"},Gw={class:"bg-red-50 border border-red-200 rounded-lg p-4"},Qw={class:"flex"},Zw=["innerHTML"],ex={key:1},tx={class:"flex gap-3"},nx={__name:"FormView",props:{doctype:{type:String,required:!0},modelValue:{type:Object,required:!0},fields:{type:Array,required:!0},docname:{type:String,required:!1},mode:{type:String,default:"add",validator:e=>["add","edit"].includes(e)},showAttachmentView:{type:Boolean,default:!0}},emits:["validateForm","update:modelValue"],setup(e,{emit:t}){const n=e,o=t,r=Fr(),a=D("form"),i=D([]),s=D(""),l=D({}),d=D(!1),u=D(""),c=D(!1),f=D(!1),p=D({}),g=D({}),y=D(null),b=D({}),_=D(!1),k=D([]),$=D({}),m=D({});dt("linkFieldOptions",g);const P=L({get(){return n.modelValue},set(U){o("update:modelValue",U)}}),T=L(()=>n.mode==="add"?`New ${n.doctype}`:n.docname?`${n.doctype} ${n.docname}`:`Edit ${n.doctype}`),j=L(()=>Object.keys(p.value).length>0&&Object.values(p.value).some(U=>U.length>0)),F=L(()=>No(n.doctype)),S=L(()=>{const U=["name","owner","creation","modified","modified_by","docstatus","idx"],J=n.fields.filter(Z=>!(!Z||!Z.fieldname||U.includes(Z.fieldname)||Z.hidden===1||Z.hidden===!0||Z.hidden==="1"||F.value.includes(Z.fieldname))).sort((Z,ie)=>(Z.idx||0)-(ie.idx||0));let Y="";return J.forEach((Z,ie)=>{Z.fieldtype==="Section Break"&&(Y=Z.fieldname,Z.collapsible&&(Z.fieldname in b.value||(b.value[Z.fieldname]=!0))),m.value[ie]=Y}),J}),x=U=>U.fieldtype==="Link"&&g.value[U.fieldname]?g.value[U.fieldname]:[],O=U=>!!U.read_only||n.mode==="edit"&&P.value.docstatus!==0,A=(U,J)=>m.value[J]||"",C=(U,J)=>{P.value[U]=J,l.value[U]&&delete l.value[U]},V=U=>{console.log("File upload:",U)},ae=U=>{P.value[U]=null},ne=U=>Q(this,null,function*(){var Z;const{fieldname:J,query:Y}=U;if(!(!Y||Y.length<2))try{const ie=S.value.find(ce=>ce.fieldname===J);if(!ie||!ie.options)return;const B=((Z=(yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"DocType",name:ie.options,fields:["title_field"]}),credentials:"include"})).json()).message)==null?void 0:Z.title_field)||"name",G=[B,"name"];ie.options==="Project"&&G.push("project_name"),(ie.options==="Contact"||ie.options==="User")&&G.push("full_name");const ue=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:ie.options,fields:["name",B,...ie.options==="Project"?["project_name"]:[]],filters:G.map(ce=>[ce,"like",`%${Y}%`]),limit_page_length:20}),credentials:"include"})).json();if(ue.message){const ce=ue.message.map(Ke=>{const Ut=Ke[B]||Ke.name,Vn=ie.options==="Project"?Ke.project_name:null;return{value:Ke.name,label:Vn?`${Vn} (${Ke.name})`:Ut,description:Vn||Ut}});g.value[J]=[...ce,...(g.value[J]||[]).filter(Ke=>!ce.some(Ut=>Ut.value===Ke.value))]}}catch(ie){console.error(`Error searching ${J}:`,ie)}}),te=U=>{b.value[U.fieldname]=U.collapsed},le=U=>{n.docname?he([...U.target.files]):i.value.push(...U.target.files)},me=U=>{i.value=i.value.filter(J=>J!==U)},he=U=>Q(this,null,function*(){console.log("Uploading files:",U)}),Ve=()=>{const U={},J=S.value.filter(Y=>Y.reqd);for(const Y of J){const Z=P.value[Y.fieldname];!Z&&Z!==0&&Z!==!1&&(U[Y.fieldname]=`${Y.label} is required`)}return l.value=U,Object.keys(U).length>0?(s.value="Please fill in all required fields",!1):(s.value="",!0)},Ce=()=>Q(this,null,function*(){if(!Ve()){nn({title:"Validation Error",text:"Please fill in all required fields",icon:"alert-circle",iconClasses:"text-red-500"});return}f.value=!0;try{o("validateForm"),n.mode==="add"?yield Me():yield je(),nn({title:"Success",text:`${n.doctype} ${n.mode==="add"?"created":"updated"} successfully!`,icon:"check-circle",iconClasses:"text-green-500"})}catch(U){console.error("Form submission error:",U),s.value=U.message||"An error occurred while saving",nn({title:"Error",text:U.message||"An error occurred while saving",icon:"alert-circle",iconClasses:"text-red-500"})}finally{f.value=!1}}),Me=()=>Q(this,null,function*(){const U=yield fetch("/api/method/frappe.client.insert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc:P.value}),credentials:"include"}),J=yield U.json();if(!U.ok)throw new Error(J.message||"Failed to create document");const Y=`${n.doctype.replace(/\s+/g,"")}DetailView`;try{yield r.push({name:Y,params:{id:J.message.name}})}catch(Z){const ie=n.doctype.toLowerCase().replace(/\s+/g,"-");yield r.push(`/${ie}/${J.message.name}`)}}),je=()=>Q(this,null,function*(){const U=yield fetch("/api/method/frappe.client.save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc:P.value}),credentials:"include"}),J=yield U.json();if(!U.ok)throw new Error(J.message||"Failed to update document")}),Ae=()=>{r.back()},He=()=>{u.value="",d.value=!0},Ie=()=>Q(this,null,function*(){c.value=!0,u.value="";try{const U=yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:n.doctype,name:n.docname}),credentials:"include"}),J=yield U.json();if(!U.ok){if(J.exc_type==="LinkExistsError"){const Y=J._server_messages?JSON.parse(J._server_messages)[0]:{message:J.exception||"This document is linked to other documents and cannot be deleted."},Z=typeof Y=="string"?JSON.parse(Y):Y;u.value=Z.message||"This document is linked to other documents and cannot be deleted.";return}throw new Error(J.message||"Failed to delete document")}nn({title:"Success",text:`${n.doctype} deleted successfully!`,icon:"check-circle",iconClasses:"text-green-500"}),d.value=!1,r.back()}catch(U){console.error("Delete error:",U),u.value=U.message||"Failed to delete document"}finally{c.value=!1}}),I=(U,J)=>{const Y=U.toLowerCase().replace(/\s+/g,"-");r.push(`/${Y}/${J}`)},W=U=>{y.value&&y.value.addAssignment(U),nn({title:"Success",text:"Assignment added successfully!",icon:"check-circle",iconClasses:"text-green-500"})},M=()=>{nn({title:"Success",text:"Assignment removed successfully!",icon:"check-circle",iconClasses:"text-green-500"})},ee=U=>{nn({title:"Error",text:U,icon:"alert-circle",iconClasses:"text-red-500"})},re=()=>Q(this,null,function*(){if(!(!n.docname||n.mode!=="edit"))try{const U=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({doctype:"DocField",fields:["parent","fieldname","options"],filters:{fieldtype:"Link",options:n.doctype},limit_page_length:0})});if(!U.ok){console.warn("Could not fetch connected records - insufficient permissions");return}const Y=(yield U.json()).message||[],Z={};for(const ie of Y)try{const ze=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({doctype:ie.parent,fields:["name","creation","modified","title","subject","status"],filters:{[ie.fieldname]:n.docname},limit_page_length:100})});if(ze.ok){const R=yield ze.json();R.message&&R.message.length>0&&(Z[ie.parent]=R.message)}}catch(ze){console.error(`Error fetching linked records for ${ie.parent}:`,ze)}p.value=Z}catch(U){console.error("Error fetching connected records:",U)}}),$e=()=>Q(this,null,function*(){var J,Y;const U=S.value.filter(Z=>Z.fieldtype==="Link");for(const Z of U)try{if(!Z.options)continue;const R=((J=(yield(yield fetch("/api/method/frappe.client.get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"DocType",name:Z.options,fields:["title_field"]}),credentials:"include"})).json()).message)==null?void 0:J.title_field)||"name",G=["name",R,...{Project:["project_name"],Contact:["full_name"],User:["full_name"]}[Z.options]||[]].filter((ce,Ke,Ut)=>Ut.indexOf(ce)===Ke),xe=yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:Z.options,fields:G,limit_page_length:0,order_by:"modified desc"}),credentials:"include"});if(!xe.ok)throw new Error(`Failed to fetch options for ${Z.fieldname}`);const ue=yield xe.json();ue.message&&(g.value[Z.fieldname]=ue.message.map(ce=>Z.options==="Project"?{value:ce.name,label:ce.project_name,description:ce.name}:{value:ce.name,label:ce[R]||ce.name,description:ce.name}))}catch(ie){console.error(`Error fetching options for ${Z.fieldname}:`,ie);const R=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:Z.options,fields:["name"],limit_page_length:20}),credentials:"include"})).json();g.value[Z.fieldname]=((Y=R.message)==null?void 0:Y.map(B=>({value:B.name,label:B.name,description:B.name})))||[]}}),at=()=>{if(n.mode!=="add")return;const U=S.value.filter(J=>J.allow_in_quick_entry===1||J.reqd===1).slice(0,5);U.length>0&&(k.value=U,$.value={},U.forEach(J=>{$.value[J.fieldname]=J.default||""}),_.value=!0)},it=()=>Q(this,null,function*(){const U={},J=k.value.filter(Y=>Y.reqd);for(const Y of J){const Z=$.value[Y.fieldname];!Z&&Z!==0&&Z!==!1&&(U[Y.fieldname]=`${Y.label} is required`)}if(Object.keys(U).length>0){l.value=U;return}Object.assign(P.value,$.value),_.value=!1,yield Ce()}),We=()=>{Object.assign(P.value,$.value),_.value=!1};return Se(()=>Q(this,null,function*(){yield $e(),n.mode==="edit"&&n.docname?yield re():n.mode==="add"&&at()})),_e(()=>n.mode,U=>Q(this,null,function*(){U==="edit"&&n.docname?yield re():U==="add"&&at()})),_e(()=>S.value,()=>Q(this,null,function*(){yield $e()}),{deep:!0}),(U,J)=>(v(),w("div",lw,[h("div",uw,[h("div",dw,[h("div",cw,[h("div",fw,[N(E(Ee),{variant:"ghost",class:"mr-3 p-2 -ml-2",onClick:Ae},{default:q(()=>[N(E(Fe),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),h("h1",pw,z(T.value),1)]),e.mode==="edit"&&e.docname?(v(),w("div",vw,[N(E(Ee),{variant:"ghost",onClick:He,class:"p-2 text-red-600 hover:bg-red-50"},{default:q(()=>[N(E(Fe),{name:"trash-2",class:"h-5 w-5"})]),_:1})])):X("",!0)]),e.mode==="edit"&&e.docname&&j.value?(v(),w("div",mw,[h("div",hw,[h("nav",gw,[h("button",{onClick:J[0]||(J[0]=Y=>a.value="form"),class:de(["py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap",a.value==="form"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Form ",2),(v(!0),w(ge,null,ke(p.value,(Y,Z)=>(v(),w("button",{key:Z,onClick:ie=>a.value=Z,class:de(["py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap",a.value===Z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},z(Z)+" ("+z(Y.length)+") ",11,yw))),128))])])])):X("",!0)])]),h("div",{class:de(["pt-16",{"pt-28":e.mode==="edit"&&e.docname&&j.value}])},[N(E(Ro),{modelValue:_.value,"onUpdate:modelValue":J[1]||(J[1]=Y=>_.value=Y)},{"body-title":q(()=>[h("h2",bw,"Quick Add "+z(e.doctype),1)]),"body-content":q(()=>[h("div",ww,[(v(!0),w(ge,null,ke(k.value,Y=>(v(),oe(ai,{key:Y.fieldname,fieldtype:Y.fieldtype,fieldname:Y.fieldname,modelValue:$.value[Y.fieldname],"onUpdate:modelValue":Z=>$.value[Y.fieldname]=Z,default:Y.default,label:Y.label,options:Y.options,linkFilters:Y.linkFilters,documentList:x(Y),readOnly:O(Y),reqd:!!Y.reqd,hidden:!!Y.hidden,errorMessage:l.value[Y.fieldname],description:Y.description},null,8,["fieldtype","fieldname","modelValue","onUpdate:modelValue","default","label","options","linkFilters","documentList","readOnly","reqd","hidden","errorMessage","description"]))),128))])]),actions:q(()=>[h("div",xw,[N(E(Ee),{variant:"outline",class:"flex-1",onClick:We},{default:q(()=>J[9]||(J[9]=[ye(" Full Form ")])),_:1}),N(E(Ee),{variant:"solid",class:"flex-1",onClick:it,loading:f.value},{default:q(()=>J[10]||(J[10]=[ye(" Save ")])),_:1},8,["loading"])])]),_:1},8,["modelValue"]),_.value?X("",!0):(v(),w("div",_w,[!e.mode==="edit"||!j.value||a.value==="form"?(v(),w("div",Cw,[e.mode==="edit"&&e.docname?(v(),w("div",Ow,[h("div",$w,[h("div",kw,[N(E(Fe),{name:"users",class:"h-4 w-4 flex-shrink-0 text-gray-500"}),J[11]||(J[11]=h("h3",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Assigned To",-1)),N(K1,{ref_key:"assignmentListRef",ref:y,class:"flex-shrink-0",doctype:e.doctype,docname:e.docname,onAssignmentRemoved:M,onAssignmentError:ee},null,8,["doctype","docname"])]),N($1,{class:"flex-shrink-0 ml-2",doctype:e.doctype,docname:e.docname,onAssignmentAdded:W,onAssignmentError:ee},null,8,["doctype","docname"])])])):X("",!0),e.mode==="edit"&&e.docname&&j.value?(v(),w("div",Aw,[h("div",Tw,[h("h3",Ew,[N(E(Fe),{name:"link",class:"h-5 w-5 mr-2 text-blue-600"}),J[12]||(J[12]=ye(" Connected Records "))]),h("p",Sw," Records linked to this "+z(e.doctype),1)]),h("div",Dw,[h("div",Pw,[(v(!0),w(ge,null,ke(p.value,(Y,Z)=>(v(),w("div",{key:Z,class:"bg-gray-50 p-4 rounded-lg"},[h("h4",Fw,[J[13]||(J[13]=h("span",{class:"inline-block w-2 h-2 bg-blue-600 rounded-full mr-2"},null,-1)),ye(" "+z(Z)+" ("+z(Y.length)+") ",1)]),h("div",Lw,[(v(!0),w(ge,null,ke(Y.slice(0,3),ie=>(v(),w("div",{key:ie.name,class:"bg-white p-3 rounded border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:ze=>I(Z,ie.name)},[h("div",Rw,[h("div",Vw,[N(E(Fe),{name:"file-text",class:"h-4 w-4 mr-2 text-blue-600 flex-shrink-0"}),h("div",jw,[h("div",Bw,z(ie.name),1),ie.title||ie.subject?(v(),w("div",Hw,z(ie.title||ie.subject),1)):X("",!0)])]),N(E(Fe),{name:"chevron-right",class:"h-4 w-4 text-gray-400 flex-shrink-0"})])],8,Mw))),128)),Y.length>3?(v(),w("div",Iw,[N(E(Ee),{variant:"ghost",size:"sm",onClick:ie=>a.value=Z},{default:q(()=>[ye(" View all "+z(Y.length)+" "+z(Z)+" records → ",1)]),_:2},1032,["onClick"])])):X("",!0)])]))),128))])])])):X("",!0),h("div",Nw,[h("div",zw,[s.value?(v(),oe(E(qr),{key:0,message:s.value,class:"mb-4"},null,8,["message"])):X("",!0),h("div",Uw,[(v(!0),w(ge,null,ke(S.value,(Y,Z)=>(v(),oe(ai,{key:Y.fieldname,fieldtype:Y.fieldtype,fieldname:Y.fieldname,modelValue:P.value[Y.fieldname],"onUpdate:modelValue":[ie=>P.value[Y.fieldname]=ie,ie=>C(Y.fieldname,ie)],default:Y.default,label:Y.label,options:Y.options,linkFilters:Y.linkFilters,documentList:x(Y),readOnly:O(Y),reqd:!!Y.reqd,hidden:!!Y.hidden,errorMessage:l.value[Y.fieldname],description:Y.description,collapsible:!!Y.collapsible,parentCollapsedSections:b.value,currentSectionName:A(Y,Z),onFileUpload:J[2]||(J[2]=ie=>V(ie)),onFileRemove:J[3]||(J[3]=ie=>ae(ie)),onLinkSearch:J[4]||(J[4]=ie=>ne(ie)),onSectionToggle:J[5]||(J[5]=ie=>te(ie))},null,8,["fieldtype","fieldname","modelValue","onUpdate:modelValue","default","label","options","linkFilters","documentList","readOnly","reqd","hidden","errorMessage","description","collapsible","parentCollapsedSections","currentSectionName"]))),128))]),e.showAttachmentView?(v(),w("div",qw,[N(d1,{modelValue:i.value,"onUpdate:modelValue":J[6]||(J[6]=Y=>i.value=Y),onHandleFileSelect:le,onHandleFileDelete:me},null,8,["modelValue"])])):X("",!0)])])])):a.value&&a.value!=="form"?(v(),w("div",Ww,[N(sw,{doctype:a.value,records:p.value[a.value]||[],onNavigateToRecord:I},null,8,["doctype","records"])])):X("",!0)]))],2),_.value?X("",!0):(v(),w("div",Jw,[h("div",Yw,[h("div",Kw,[N(E(Ee),{variant:"outline",class:"flex-1",onClick:Ae,disabled:f.value},{default:q(()=>J[14]||(J[14]=[ye(" Cancel ")])),_:1},8,["disabled"]),N(E(Ee),{variant:"solid",class:"flex-1",onClick:Ce,loading:f.value},{default:q(()=>[ye(z(e.mode==="edit"?"Update":"Create"),1)]),_:1},8,["loading"])])])])),N(E(Ro),{modelValue:d.value,"onUpdate:modelValue":J[8]||(J[8]=Y=>d.value=Y)},{"body-title":q(()=>J[15]||(J[15]=[h("h2",{class:"text-xl font-bold"},"Confirm Delete",-1)])),"body-content":q(()=>[u.value?(v(),w("div",Xw,[h("div",Gw,[h("div",Qw,[N(E(Fe),{name:"alert-circle",class:"h-5 w-5 text-red-400 mr-2 flex-shrink-0 mt-0.5"}),h("div",null,[J[16]||(J[16]=h("h3",{class:"text-sm font-medium text-red-800"},"Cannot Delete Document",-1)),h("div",{class:"mt-2 text-sm text-red-700",innerHTML:u.value},null,8,Zw)])])])])):(v(),w("p",ex,"Are you sure you want to delete this "+z(e.doctype)+"? This action cannot be undone.",1))]),actions:q(()=>[h("div",tx,[N(E(Ee),{variant:"outline",class:"flex-1",onClick:J[7]||(J[7]=Y=>d.value=!1)},{default:q(()=>[ye(z(u.value?"Close":"Cancel"),1)]),_:1}),u.value?X("",!0):(v(),oe(E(Ee),{key:0,variant:"solid",theme:"red",class:"flex-1",onClick:Ie,loading:c.value},{default:q(()=>J[17]||(J[17]=[ye(" Delete ")])),_:1},8,["loading"]))])]),_:1},8,["modelValue"])]))}},ox=be(nx,[["__scopeId","data-v-acb0ecea"]]);function rx(){const e=D(null),t=D([]),n=D([]),o=D({}),r=D(!1),a=D(!1),i=D(!1),s=D(!1),l=()=>Q(this,null,function*(){if(e.value)return e.value;try{return e.value=yield _t.getCurrentUser(),e.value}catch(y){return console.error("Error getting current user:",y),null}}),d=()=>Q(this,null,function*(){e.value||(yield l());try{return t.value=yield _t.fetchUserRoles(),console.log("User roles:",t.value),t.value}catch(y){return console.error("Error fetching user roles:",y),[]}});return{currentUser:e,userRoles:t,userPermissions:n,doctypePermissions:o,canCreate:r,canRead:a,canWrite:i,canDelete:s,getCurrentUser:l,fetchUserRoles:d,fetchUserPermissions:()=>Q(this,null,function*(){e.value||(yield l());try{return n.value=yield _t.fetchUserPermissions(),console.log("User permissions:",n.value),n.value}catch(y){return console.error("Error fetching user permissions:",y),[]}}),checkPermissions:y=>Q(this,null,function*(){e.value||(yield l()),t.value.length||(yield d());try{const b=yield fetch("/api/method/frappe.client.get_permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:y})});if(b.ok){const $=yield b.json();if($.message)return o.value[y]=$.message,r.value=$.message.create||!1,a.value=$.message.read||!1,i.value=$.message.write||!1,s.value=$.message.delete||!1,console.log(`Direct permissions for ${y}:`,$.message),$.message}const _=yield _t.fetchDocPermissions(y),k={create:!1,read:!1,write:!1,delete:!1};for(const $ of _)t.value.includes($.role)&&($.create&&(k.create=!0),$.read&&(k.read=!0),$.write&&(k.write=!0),$.delete&&(k.delete=!0));return o.value[y]=k,r.value=k.create,a.value=k.read,i.value=k.write,s.value=k.delete,console.log(`Processed permissions for ${y}:`,k),k}catch(b){console.error(`Error checking permissions for ${y}:`,b);const _={create:!0,read:!0,write:!0,delete:!0};return o.value[y]=_,r.value=!0,a.value=!0,i.value=!0,s.value=!0,_}}),hasPermission:(y,b)=>o.value[y]&&o.value[y][b]||!1,isOwner:y=>y.owner===e.value,isAssignedToMe:(y,b)=>Q(this,null,function*(){e.value||(yield l());try{const k=yield(yield fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctype:"ToDo",fields:["name"],filters:{reference_type:y,reference_name:b,allocated_to:e.value,status:"Open"}})})).json();return k.message&&k.message.length>0}catch(_){return console.error("Error checking assignment:",_),!1}})}}const lx={__name:"GenerateUI",props:{doctype:{type:String,required:!0},titleField:{type:String,default:"name"},listFields:{type:Array,default:()=>[]},detailFields:{type:Array,default:()=>[]},defaultValues:{type:Object,default:()=>({})},showOnlyOwnRecords:{type:Boolean,default:!1},standardFilters:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},emits:["record-deleted","form-submitted","record-updated"],setup(e,{emit:t}){const n=yi();Fr();const o=e,r=D([]),a=D({}),i=D(!0),{currentUser:s,canCreate:l,canRead:d,canWrite:u,canDelete:c,userPermissions:f,checkPermissions:p}=rx(),g=L(()=>o.doctype.toLowerCase().replace(/\s+/g,"-")),y=L(()=>{const x=n.path,O=`/${g.value}`;return x===O?"list":x===`${O}/new`?"add":"edit"}),b=L(()=>n.path===`/${g.value}/new`?null:n.params.id),_=L(()=>No(o.doctype)),k=L(()=>{const x=["name","owner","creation","modified","modified_by","docstatus","idx"];return r.value.filter(O=>!(!O||!O.fieldname||x.includes(O.fieldname)||O.hidden===1||O.hidden===!0||O.hidden==="1"||_.value.includes(O.fieldname))).sort((O,A)=>(O.idx||0)-(A.idx||0)).map(O=>Te(K({},O),{fieldname:O.fieldname||"",fieldtype:O.fieldtype||"Data",label:O.label||O.fieldname||"",reqd:O.reqd||0,hidden:O.hidden||0,read_only:O.read_only||0,options:O.options||"",default:O.default||"",description:O.description||"",idx:O.idx||0,allow_in_quick_entry:O.allow_in_quick_entry||0,collapsible:O.collapsible||0}))}),$=L(()=>{const x=K({doctype:o.doctype},o.defaultValues);return f.value.forEach(O=>{k.value.filter(C=>C.fieldtype==="Link"&&C.options===O.allow).forEach(C=>{x[C.fieldname]||(x[C.fieldname]=O.for_value)})}),x}),m=()=>Q(this,null,function*(){try{i.value=!0,console.log(`Fetching doctype fields for ${o.doctype}...`);const x=yield _t.fetchDoctypeFields(o.doctype);if(x&&x.fields)r.value=x.fields,console.log(`Successfully fetched ${x.fields.length} fields for ${o.doctype}`);else if(Array.isArray(x))r.value=x,console.log(`Successfully fetched ${x.length} fields for ${o.doctype}`);else throw new Error("Invalid fields data in response");y.value==="add"?P():y.value==="edit"&&b.value&&(yield T())}catch(x){console.error(`Error fetching fields for ${o.doctype}:`,x)}finally{i.value=!1}}),P=()=>{const x=K({},$.value);k.value.forEach(O=>{O.default&&!x[O.fieldname]&&(O.fieldtype==="Date"&&O.default==="Today"?x[O.fieldname]=new Date().toISOString().split("T")[0]:O.fieldtype==="Check"?x[O.fieldname]=O.default==="1"||O.default===!0:x[O.fieldname]=O.default)}),a.value=x,console.log("Initialized form data:",a.value)},T=()=>Q(this,null,function*(){try{console.log(`Loading existing record: ${o.doctype} ${b.value}`);const x=yield _t.fetchDocument(o.doctype,b.value);a.value=Te(K({},x),{doctype:o.doctype}),console.log("Loaded record data:",a.value)}catch(x){console.error(`Error loading ${o.doctype} ${b.value}:`,x)}}),j=x=>{a.value=K({},x)},F=()=>{console.log("Form validation triggered")},S=()=>Q(this,null,function*(){yield p(o.doctype),yield m()});return Se(()=>{S()}),_e(()=>o.doctype,x=>{x&&S()}),_e(()=>y.value,x=>{x==="add"?P():x==="edit"&&b.value&&T()},{immediate:!0}),_e(()=>b.value,x=>{x&&y.value==="edit"&&T()},{immediate:!0}),(x,O)=>(v(),w("div",null,[y.value==="list"?(v(),oe(jy,{key:0,doctype:e.doctype,titleField:e.titleField,listFields:e.listFields,showOnlyOwnRecords:e.showOnlyOwnRecords,standardFilters:e.standardFilters,filters:e.filters},null,8,["doctype","titleField","listFields","showOnlyOwnRecords","standardFilters","filters"])):(v(),oe(ox,{key:1,doctype:e.doctype,docname:b.value,fields:k.value,modelValue:a.value,mode:y.value,showAttachmentView:!0,"onUpdate:modelValue":j,onValidateForm:F},null,8,["doctype","docname","fields","modelValue","mode"]))]))}};export{Ro as D,Ur as P,lx as _,k0 as a,$o as b};
